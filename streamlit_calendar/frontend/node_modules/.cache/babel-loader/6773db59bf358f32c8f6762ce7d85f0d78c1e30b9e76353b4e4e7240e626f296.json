{"ast":null,"code":"import { createPlugin } from '@fullcalendar/core/index.js';\nimport premiumCommonPlugin from '@fullcalendar/premium-common/index.js';\nimport { memoize, filterHash, rangesIntersect, isPropsEqual, mapHash, combineEventUis, refineProps, guid, identity, rangesEqual, CalendarImpl, mergeEventStores, isPropsValid, parseFieldSpecs, EventImpl, unpromisify, requestJson } from '@fullcalendar/core/internal.js';\nimport { p as parseResource, R as ResourceApi, a as ResourceSplitter, h as handleResourceStore } from './internal-common.js';\nexport { R as ResourceApi } from './internal-common.js';\nimport '@fullcalendar/core/preact.js';\nfunction massageEventDragMutation(eventMutation, hit0, hit1) {\n  let resource0 = hit0.dateSpan.resourceId;\n  let resource1 = hit1.dateSpan.resourceId;\n  if (resource0 && resource1 && resource0 !== resource1) {\n    eventMutation.resourceMutation = {\n      matchResourceId: resource0,\n      setResourceId: resource1\n    };\n  }\n}\n/*\nTODO: all this would be much easier if we were using a hash!\n*/\nfunction applyEventDefMutation(eventDef, mutation, context) {\n  let resourceMutation = mutation.resourceMutation;\n  if (resourceMutation && computeResourceEditable(eventDef, context)) {\n    let index = eventDef.resourceIds.indexOf(resourceMutation.matchResourceId);\n    if (index !== -1) {\n      let resourceIds = eventDef.resourceIds.slice(); // copy\n      resourceIds.splice(index, 1); // remove\n      if (resourceIds.indexOf(resourceMutation.setResourceId) === -1) {\n        // not already in there\n        resourceIds.push(resourceMutation.setResourceId); // add\n      }\n\n      eventDef.resourceIds = resourceIds;\n    }\n  }\n}\n/*\nHACK\nTODO: use EventUi system instead of this\n*/\nfunction computeResourceEditable(eventDef, context) {\n  let {\n    resourceEditable\n  } = eventDef;\n  if (resourceEditable == null) {\n    let source = eventDef.sourceId && context.getCurrentData().eventSources[eventDef.sourceId];\n    if (source) {\n      resourceEditable = source.extendedProps.resourceEditable; // used the Source::extendedProps hack\n    }\n\n    if (resourceEditable == null) {\n      resourceEditable = context.options.eventResourceEditable;\n      if (resourceEditable == null) {\n        resourceEditable = context.options.editable; // TODO: use defaults system instead\n      }\n    }\n  }\n\n  return resourceEditable;\n}\nfunction transformEventDrop(mutation, context) {\n  let {\n    resourceMutation\n  } = mutation;\n  if (resourceMutation) {\n    let {\n      calendarApi\n    } = context;\n    return {\n      oldResource: calendarApi.getResourceById(resourceMutation.matchResourceId),\n      newResource: calendarApi.getResourceById(resourceMutation.setResourceId)\n    };\n  }\n  return {\n    oldResource: null,\n    newResource: null\n  };\n}\nclass ResourceDataAdder {\n  constructor() {\n    this.filterResources = memoize(filterResources);\n  }\n  transform(viewProps, calendarProps) {\n    if (calendarProps.viewSpec.optionDefaults.needsResourceData) {\n      return {\n        resourceStore: this.filterResources(calendarProps.resourceStore, calendarProps.options.filterResourcesWithEvents, calendarProps.eventStore, calendarProps.dateProfile.activeRange),\n        resourceEntityExpansions: calendarProps.resourceEntityExpansions\n      };\n    }\n    return null;\n  }\n}\nfunction filterResources(resourceStore, doFilterResourcesWithEvents, eventStore, activeRange) {\n  if (doFilterResourcesWithEvents) {\n    let instancesInRange = filterEventInstancesInRange(eventStore.instances, activeRange);\n    let hasEvents = computeHasEvents(instancesInRange, eventStore.defs);\n    Object.assign(hasEvents, computeAncestorHasEvents(hasEvents, resourceStore));\n    return filterHash(resourceStore, (resource, resourceId) => hasEvents[resourceId]);\n  }\n  return resourceStore;\n}\nfunction filterEventInstancesInRange(eventInstances, activeRange) {\n  return filterHash(eventInstances, eventInstance => rangesIntersect(eventInstance.range, activeRange));\n}\nfunction computeHasEvents(eventInstances, eventDefs) {\n  let hasEvents = {};\n  for (let instanceId in eventInstances) {\n    let instance = eventInstances[instanceId];\n    for (let resourceId of eventDefs[instance.defId].resourceIds) {\n      hasEvents[resourceId] = true;\n    }\n  }\n  return hasEvents;\n}\n/*\nmark resources as having events if any of their ancestors have them\nNOTE: resourceStore might not have all the resources that hasEvents{} has keyed\n*/\nfunction computeAncestorHasEvents(hasEvents, resourceStore) {\n  let res = {};\n  for (let resourceId in hasEvents) {\n    let resource;\n    while (resource = resourceStore[resourceId]) {\n      resourceId = resource.parentId; // now functioning as the parentId\n      if (resourceId) {\n        res[resourceId] = true;\n      } else {\n        break;\n      }\n    }\n  }\n  return res;\n}\n/*\nfor making sure events that have editable resources are always draggable in resource views\n*/\nfunction transformIsDraggable(val, eventDef, eventUi, context) {\n  if (!val) {\n    let state = context.getCurrentData();\n    let viewSpec = state.viewSpecs[state.currentViewType];\n    if (viewSpec.optionDefaults.needsResourceData) {\n      if (computeResourceEditable(eventDef, context)) {\n        return true;\n      }\n    }\n  }\n  return val;\n}\n\n// for when non-resource view should be given EventUi info (for event coloring/constraints based off of resource data)\nclass ResourceEventConfigAdder {\n  constructor() {\n    this.buildResourceEventUis = memoize(buildResourceEventUis, isPropsEqual);\n    this.injectResourceEventUis = memoize(injectResourceEventUis);\n  }\n  transform(viewProps, calendarProps) {\n    if (!calendarProps.viewSpec.optionDefaults.needsResourceData) {\n      return {\n        eventUiBases: this.injectResourceEventUis(viewProps.eventUiBases, viewProps.eventStore.defs, this.buildResourceEventUis(calendarProps.resourceStore))\n      };\n    }\n    return null;\n  }\n}\nfunction buildResourceEventUis(resourceStore) {\n  return mapHash(resourceStore, resource => resource.ui);\n}\nfunction injectResourceEventUis(eventUiBases, eventDefs, resourceEventUis) {\n  return mapHash(eventUiBases, (eventUi, defId) => {\n    if (defId) {\n      // not the '' key\n      return injectResourceEventUi(eventUi, eventDefs[defId], resourceEventUis);\n    }\n    return eventUi;\n  });\n}\nfunction injectResourceEventUi(origEventUi, eventDef, resourceEventUis) {\n  let parts = [];\n  // first resource takes precedence, which fights with the ordering of combineEventUis, thus the unshifts\n  for (let resourceId of eventDef.resourceIds) {\n    if (resourceEventUis[resourceId]) {\n      parts.unshift(resourceEventUis[resourceId]);\n    }\n  }\n  parts.unshift(origEventUi);\n  return combineEventUis(parts);\n}\nlet defs = []; // TODO: use plugin system\nfunction registerResourceSourceDef(def) {\n  defs.push(def);\n}\nfunction getResourceSourceDef(id) {\n  return defs[id];\n}\nfunction getResourceSourceDefs() {\n  return defs;\n}\n\n// TODO: make this a plugin-able parser\n// TODO: success/failure\nconst RESOURCE_SOURCE_REFINERS = {\n  id: String,\n  // for array. TODO: move to resource-array\n  resources: identity,\n  // for json feed. TODO: move to resource-json-feed\n  url: String,\n  method: String,\n  startParam: String,\n  endParam: String,\n  timeZoneParam: String,\n  extraParams: identity\n};\nfunction parseResourceSource(input) {\n  let inputObj;\n  if (typeof input === 'string') {\n    inputObj = {\n      url: input\n    };\n  } else if (typeof input === 'function' || Array.isArray(input)) {\n    inputObj = {\n      resources: input\n    };\n  } else if (typeof input === 'object' && input) {\n    // non-null object\n    inputObj = input;\n  }\n  if (inputObj) {\n    let {\n      refined,\n      extra\n    } = refineProps(inputObj, RESOURCE_SOURCE_REFINERS);\n    warnUnknownProps(extra);\n    let metaRes = buildResourceSourceMeta(refined);\n    if (metaRes) {\n      return {\n        _raw: input,\n        sourceId: guid(),\n        sourceDefId: metaRes.sourceDefId,\n        meta: metaRes.meta,\n        publicId: refined.id || '',\n        isFetching: false,\n        latestFetchId: '',\n        fetchRange: null\n      };\n    }\n  }\n  return null;\n}\nfunction buildResourceSourceMeta(refined) {\n  let defs = getResourceSourceDefs();\n  for (let i = defs.length - 1; i >= 0; i -= 1) {\n    // later-added plugins take precedence\n    let def = defs[i];\n    let meta = def.parseMeta(refined);\n    if (meta) {\n      return {\n        meta,\n        sourceDefId: i\n      };\n    }\n  }\n  return null;\n}\nfunction warnUnknownProps(props) {\n  for (let propName in props) {\n    console.warn(`Unknown resource prop '${propName}'`);\n  }\n}\nfunction reduceResourceSource(source, action, context) {\n  let {\n    options,\n    dateProfile\n  } = context;\n  if (!source || !action) {\n    return createSource(options.initialResources || options.resources, dateProfile.activeRange, options.refetchResourcesOnNavigate, context);\n  }\n  switch (action.type) {\n    case 'RESET_RESOURCE_SOURCE':\n      return createSource(action.resourceSourceInput, dateProfile.activeRange, options.refetchResourcesOnNavigate, context);\n    case 'PREV': // TODO: how do we track all actions that affect dateProfile :(\n    case 'NEXT':\n    case 'CHANGE_DATE':\n    case 'CHANGE_VIEW_TYPE':\n      return handleRangeChange(source, dateProfile.activeRange, options.refetchResourcesOnNavigate, context);\n    case 'RECEIVE_RESOURCES':\n    case 'RECEIVE_RESOURCE_ERROR':\n      return receiveResponse(source, action.fetchId, action.fetchRange);\n    case 'REFETCH_RESOURCES':\n      return fetchSource(source, dateProfile.activeRange, context);\n    default:\n      return source;\n  }\n}\nfunction createSource(input, activeRange, refetchResourcesOnNavigate, context) {\n  if (input) {\n    let source = parseResourceSource(input);\n    source = fetchSource(source, refetchResourcesOnNavigate ? activeRange : null, context);\n    return source;\n  }\n  return null;\n}\nfunction handleRangeChange(source, activeRange, refetchResourcesOnNavigate, context) {\n  if (refetchResourcesOnNavigate && !doesSourceIgnoreRange(source) && (!source.fetchRange || !rangesEqual(source.fetchRange, activeRange))) {\n    return fetchSource(source, activeRange, context);\n  }\n  return source;\n}\nfunction doesSourceIgnoreRange(source) {\n  return Boolean(getResourceSourceDef(source.sourceDefId).ignoreRange);\n}\nfunction fetchSource(source, fetchRange, context) {\n  let sourceDef = getResourceSourceDef(source.sourceDefId);\n  let fetchId = guid();\n  sourceDef.fetch({\n    resourceSource: source,\n    range: fetchRange,\n    context\n  }, res => {\n    context.dispatch({\n      type: 'RECEIVE_RESOURCES',\n      fetchId,\n      fetchRange,\n      rawResources: res.rawResources\n    });\n  }, error => {\n    context.dispatch({\n      type: 'RECEIVE_RESOURCE_ERROR',\n      fetchId,\n      fetchRange,\n      error\n    });\n  });\n  return Object.assign(Object.assign({}, source), {\n    isFetching: true,\n    latestFetchId: fetchId\n  });\n}\nfunction receiveResponse(source, fetchId, fetchRange) {\n  if (fetchId === source.latestFetchId) {\n    return Object.assign(Object.assign({}, source), {\n      isFetching: false,\n      fetchRange\n    });\n  }\n  return source;\n}\nfunction reduceResourceStore(store, action, source, context) {\n  if (!store || !action) {\n    return {};\n  }\n  switch (action.type) {\n    case 'RECEIVE_RESOURCES':\n      return receiveRawResources(store, action.rawResources, action.fetchId, source, context);\n    case 'ADD_RESOURCE':\n      return addResource(store, action.resourceHash);\n    case 'REMOVE_RESOURCE':\n      return removeResource(store, action.resourceId);\n    case 'SET_RESOURCE_PROP':\n      return setResourceProp(store, action.resourceId, action.propName, action.propValue);\n    case 'SET_RESOURCE_EXTENDED_PROP':\n      return setResourceExtendedProp(store, action.resourceId, action.propName, action.propValue);\n    default:\n      return store;\n  }\n}\nfunction receiveRawResources(existingStore, inputs, fetchId, source, context) {\n  if (source.latestFetchId === fetchId) {\n    let nextStore = {};\n    for (let input of inputs) {\n      parseResource(input, '', nextStore, context);\n    }\n    return nextStore;\n  }\n  return existingStore;\n}\nfunction addResource(existingStore, additions) {\n  // TODO: warn about duplicate IDs\n  return Object.assign(Object.assign({}, existingStore), additions);\n}\nfunction removeResource(existingStore, resourceId) {\n  let newStore = Object.assign({}, existingStore);\n  delete newStore[resourceId];\n  // promote children\n  for (let childResourceId in newStore) {\n    // a child, *maybe* but probably not\n    if (newStore[childResourceId].parentId === resourceId) {\n      newStore[childResourceId] = Object.assign(Object.assign({}, newStore[childResourceId]), {\n        parentId: ''\n      });\n    }\n  }\n  return newStore;\n}\nfunction setResourceProp(existingStore, resourceId, name, value) {\n  let existingResource = existingStore[resourceId];\n  // TODO: sanitization\n  if (existingResource) {\n    return Object.assign(Object.assign({}, existingStore), {\n      [resourceId]: Object.assign(Object.assign({}, existingResource), {\n        [name]: value\n      })\n    });\n  }\n  return existingStore;\n}\nfunction setResourceExtendedProp(existingStore, resourceId, name, value) {\n  let existingResource = existingStore[resourceId];\n  if (existingResource) {\n    return Object.assign(Object.assign({}, existingStore), {\n      [resourceId]: Object.assign(Object.assign({}, existingResource), {\n        extendedProps: Object.assign(Object.assign({}, existingResource.extendedProps), {\n          [name]: value\n        })\n      })\n    });\n  }\n  return existingStore;\n}\nfunction reduceResourceEntityExpansions(expansions, action) {\n  if (!expansions || !action) {\n    return {};\n  }\n  switch (action.type) {\n    case 'SET_RESOURCE_ENTITY_EXPANDED':\n      return Object.assign(Object.assign({}, expansions), {\n        [action.id]: action.isExpanded\n      });\n    default:\n      return expansions;\n  }\n}\nfunction reduceResources(state, action, context) {\n  let resourceSource = reduceResourceSource(state && state.resourceSource, action, context);\n  let resourceStore = reduceResourceStore(state && state.resourceStore, action, resourceSource, context);\n  let resourceEntityExpansions = reduceResourceEntityExpansions(state && state.resourceEntityExpansions, action);\n  return {\n    resourceSource,\n    resourceStore,\n    resourceEntityExpansions\n  };\n}\nconst EVENT_REFINERS = {\n  resourceId: String,\n  resourceIds: identity,\n  resourceEditable: Boolean\n};\nfunction generateEventDefResourceMembers(refined) {\n  return {\n    resourceIds: ensureStringArray(refined.resourceIds).concat(refined.resourceId ? [refined.resourceId] : []),\n    resourceEditable: refined.resourceEditable\n  };\n}\nfunction ensureStringArray(items) {\n  return (items || []).map(item => String(item));\n}\nfunction transformDateSelectionJoin(hit0, hit1) {\n  let resourceId0 = hit0.dateSpan.resourceId;\n  let resourceId1 = hit1.dateSpan.resourceId;\n  if (resourceId0 && resourceId1) {\n    return {\n      resourceId: resourceId0\n    };\n  }\n  return null;\n}\nCalendarImpl.prototype.addResource = function (input, scrollTo = true) {\n  let currentState = this.getCurrentData();\n  let resourceHash;\n  let resource;\n  if (input instanceof ResourceApi) {\n    resource = input._resource;\n    resourceHash = {\n      [resource.id]: resource\n    };\n  } else {\n    resourceHash = {};\n    resource = parseResource(input, '', resourceHash, currentState);\n  }\n  this.dispatch({\n    type: 'ADD_RESOURCE',\n    resourceHash\n  });\n  if (scrollTo) {\n    // TODO: wait til dispatch completes somehow\n    this.trigger('_scrollRequest', {\n      resourceId: resource.id\n    });\n  }\n  let resourceApi = new ResourceApi(currentState, resource);\n  currentState.emitter.trigger('resourceAdd', {\n    resource: resourceApi,\n    revert: () => {\n      this.dispatch({\n        type: 'REMOVE_RESOURCE',\n        resourceId: resource.id\n      });\n    }\n  });\n  return resourceApi;\n};\nCalendarImpl.prototype.getResourceById = function (id) {\n  id = String(id);\n  let currentState = this.getCurrentData(); // eslint-disable-line react/no-this-in-sfc\n  if (currentState.resourceStore) {\n    // guard against calendar with no resource functionality\n    let rawResource = currentState.resourceStore[id];\n    if (rawResource) {\n      return new ResourceApi(currentState, rawResource);\n    }\n  }\n  return null;\n};\nCalendarImpl.prototype.getResources = function () {\n  let currentState = this.getCurrentData();\n  let {\n    resourceStore\n  } = currentState;\n  let resourceApis = [];\n  if (resourceStore) {\n    // guard against calendar with no resource functionality\n    for (let resourceId in resourceStore) {\n      resourceApis.push(new ResourceApi(currentState, resourceStore[resourceId]));\n    }\n  }\n  return resourceApis;\n};\nCalendarImpl.prototype.getTopLevelResources = function () {\n  let currentState = this.getCurrentData();\n  let {\n    resourceStore\n  } = currentState;\n  let resourceApis = [];\n  if (resourceStore) {\n    // guard against calendar with no resource functionality\n    for (let resourceId in resourceStore) {\n      if (!resourceStore[resourceId].parentId) {\n        resourceApis.push(new ResourceApi(currentState, resourceStore[resourceId]));\n      }\n    }\n  }\n  return resourceApis;\n};\nCalendarImpl.prototype.refetchResources = function () {\n  this.dispatch({\n    type: 'REFETCH_RESOURCES'\n  });\n};\nfunction transformDatePoint(dateSpan, context) {\n  return dateSpan.resourceId ? {\n    resource: context.calendarApi.getResourceById(dateSpan.resourceId)\n  } : {};\n}\nfunction transformDateSpan(dateSpan, context) {\n  return dateSpan.resourceId ? {\n    resource: context.calendarApi.getResourceById(dateSpan.resourceId)\n  } : {};\n}\nfunction isPropsValidWithResources(combinedProps, context) {\n  let splitter = new ResourceSplitter();\n  let sets = splitter.splitProps(Object.assign(Object.assign({}, combinedProps), {\n    resourceStore: context.getCurrentData().resourceStore\n  }));\n  for (let resourceId in sets) {\n    let props = sets[resourceId];\n    // merge in event data from the non-resource segment\n    if (resourceId && sets['']) {\n      // current segment is not the non-resource one, and there IS a non-resource one\n      props = Object.assign(Object.assign({}, props), {\n        eventStore: mergeEventStores(sets[''].eventStore, props.eventStore),\n        eventUiBases: Object.assign(Object.assign({}, sets[''].eventUiBases), props.eventUiBases)\n      });\n    }\n    if (!isPropsValid(props, context, {\n      resourceId\n    }, filterConfig.bind(null, resourceId))) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction filterConfig(resourceId, config) {\n  return Object.assign(Object.assign({}, config), {\n    constraints: filterConstraints(resourceId, config.constraints)\n  });\n}\nfunction filterConstraints(resourceId, constraints) {\n  return constraints.map(constraint => {\n    let defs = constraint.defs;\n    if (defs) {\n      // we are dealing with an EventStore\n      // if any of the events define constraints to resources that are NOT this resource,\n      // then this resource is unconditionally prohibited, which is what a `false` value does.\n      for (let defId in defs) {\n        let resourceIds = defs[defId].resourceIds;\n        if (resourceIds.length && resourceIds.indexOf(resourceId) === -1) {\n          // TODO: use a hash?!!! (for other reasons too)\n          return false;\n        }\n      }\n    }\n    return constraint;\n  });\n}\nfunction transformExternalDef(dateSpan) {\n  return dateSpan.resourceId ? {\n    resourceId: dateSpan.resourceId\n  } : {};\n}\nconst optionChangeHandlers = {\n  resources: handleResources\n};\nfunction handleResources(newSourceInput, context) {\n  let oldSourceInput = context.getCurrentData().resourceSource._raw;\n  if (oldSourceInput !== newSourceInput) {\n    context.dispatch({\n      type: 'RESET_RESOURCE_SOURCE',\n      resourceSourceInput: newSourceInput\n    });\n  }\n}\nconst OPTION_REFINERS = {\n  initialResources: identity,\n  resources: identity,\n  eventResourceEditable: Boolean,\n  refetchResourcesOnNavigate: Boolean,\n  resourceOrder: parseFieldSpecs,\n  filterResourcesWithEvents: Boolean,\n  resourceGroupField: String,\n  resourceAreaWidth: identity,\n  resourceAreaColumns: identity,\n  resourcesInitiallyExpanded: Boolean,\n  datesAboveResources: Boolean,\n  needsResourceData: Boolean,\n  resourceAreaHeaderClassNames: identity,\n  resourceAreaHeaderContent: identity,\n  resourceAreaHeaderDidMount: identity,\n  resourceAreaHeaderWillUnmount: identity,\n  resourceGroupLabelClassNames: identity,\n  resourceGroupLabelContent: identity,\n  resourceGroupLabelDidMount: identity,\n  resourceGroupLabelWillUnmount: identity,\n  resourceLabelClassNames: identity,\n  resourceLabelContent: identity,\n  resourceLabelDidMount: identity,\n  resourceLabelWillUnmount: identity,\n  resourceLaneClassNames: identity,\n  resourceLaneContent: identity,\n  resourceLaneDidMount: identity,\n  resourceLaneWillUnmount: identity,\n  resourceGroupLaneClassNames: identity,\n  resourceGroupLaneContent: identity,\n  resourceGroupLaneDidMount: identity,\n  resourceGroupLaneWillUnmount: identity\n};\nconst LISTENER_REFINERS = {\n  resourcesSet: identity,\n  resourceAdd: identity,\n  resourceChange: identity,\n  resourceRemove: identity\n};\nEventImpl.prototype.getResources = function () {\n  let {\n    calendarApi\n  } = this._context;\n  return this._def.resourceIds.map(resourceId => calendarApi.getResourceById(resourceId));\n};\nEventImpl.prototype.setResources = function (resources) {\n  let resourceIds = [];\n  // massage resources -> resourceIds\n  for (let resource of resources) {\n    let resourceId = null;\n    if (typeof resource === 'string') {\n      resourceId = resource;\n    } else if (typeof resource === 'number') {\n      resourceId = String(resource);\n    } else if (resource instanceof ResourceApi) {\n      resourceId = resource.id; // guaranteed to always have an ID. hmmm\n    } else {\n      console.warn('unknown resource type: ' + resource);\n    }\n    if (resourceId) {\n      resourceIds.push(resourceId);\n    }\n  }\n  this.mutate({\n    standardProps: {\n      resourceIds\n    }\n  });\n};\nregisterResourceSourceDef({\n  ignoreRange: true,\n  parseMeta(refined) {\n    if (Array.isArray(refined.resources)) {\n      return refined.resources;\n    }\n    return null;\n  },\n  fetch(arg, successCallback) {\n    successCallback({\n      rawResources: arg.resourceSource.meta\n    });\n  }\n});\nregisterResourceSourceDef({\n  parseMeta(refined) {\n    if (typeof refined.resources === 'function') {\n      return refined.resources;\n    }\n    return null;\n  },\n  fetch(arg, successCallback, errorCallback) {\n    const dateEnv = arg.context.dateEnv;\n    const func = arg.resourceSource.meta;\n    const publicArg = arg.range ? {\n      start: dateEnv.toDate(arg.range.start),\n      end: dateEnv.toDate(arg.range.end),\n      startStr: dateEnv.formatIso(arg.range.start),\n      endStr: dateEnv.formatIso(arg.range.end),\n      timeZone: dateEnv.timeZone\n    } : {};\n    unpromisify(func.bind(null, publicArg), rawResources => successCallback({\n      rawResources\n    }), errorCallback);\n  }\n});\nregisterResourceSourceDef({\n  parseMeta(refined) {\n    if (refined.url) {\n      return {\n        url: refined.url,\n        method: (refined.method || 'GET').toUpperCase(),\n        extraParams: refined.extraParams\n      };\n    }\n    return null;\n  },\n  fetch(arg, successCallback, errorCallback) {\n    const meta = arg.resourceSource.meta;\n    const requestParams = buildRequestParams(meta, arg.range, arg.context);\n    requestJson(meta.method, meta.url, requestParams).then(([rawResources, response]) => {\n      successCallback({\n        rawResources,\n        response\n      });\n    }, errorCallback);\n  }\n});\n// TODO: somehow consolidate with event json feed\nfunction buildRequestParams(meta, range, context) {\n  let {\n    dateEnv,\n    options\n  } = context;\n  let startParam;\n  let endParam;\n  let timeZoneParam;\n  let customRequestParams;\n  let params = {};\n  if (range) {\n    startParam = meta.startParam;\n    if (startParam == null) {\n      startParam = options.startParam;\n    }\n    endParam = meta.endParam;\n    if (endParam == null) {\n      endParam = options.endParam;\n    }\n    timeZoneParam = meta.timeZoneParam;\n    if (timeZoneParam == null) {\n      timeZoneParam = options.timeZoneParam;\n    }\n    params[startParam] = dateEnv.formatIso(range.start);\n    params[endParam] = dateEnv.formatIso(range.end);\n    if (dateEnv.timeZone !== 'local') {\n      params[timeZoneParam] = dateEnv.timeZone;\n    }\n  }\n  // retrieve any outbound GET/POST data from the options\n  if (typeof meta.extraParams === 'function') {\n    // supplied as a function that returns a key/value object\n    customRequestParams = meta.extraParams();\n  } else {\n    // probably supplied as a straight key/value object\n    customRequestParams = meta.extraParams || {};\n  }\n  Object.assign(params, customRequestParams);\n  return params;\n}\nvar index = createPlugin({\n  name: '@fullcalendar/resource',\n  premiumReleaseDate: '2023-11-29',\n  deps: [premiumCommonPlugin],\n  reducers: [reduceResources],\n  isLoadingFuncs: [state => state.resourceSource && state.resourceSource.isFetching],\n  eventRefiners: EVENT_REFINERS,\n  eventDefMemberAdders: [generateEventDefResourceMembers],\n  isDraggableTransformers: [transformIsDraggable],\n  eventDragMutationMassagers: [massageEventDragMutation],\n  eventDefMutationAppliers: [applyEventDefMutation],\n  dateSelectionTransformers: [transformDateSelectionJoin],\n  datePointTransforms: [transformDatePoint],\n  dateSpanTransforms: [transformDateSpan],\n  viewPropsTransformers: [ResourceDataAdder, ResourceEventConfigAdder],\n  isPropsValid: isPropsValidWithResources,\n  externalDefTransforms: [transformExternalDef],\n  eventDropTransformers: [transformEventDrop],\n  optionChangeHandlers,\n  optionRefiners: OPTION_REFINERS,\n  listenerRefiners: LISTENER_REFINERS,\n  propSetHandlers: {\n    resourceStore: handleResourceStore\n  }\n});\nexport { index as default };","map":{"version":3,"names":["createPlugin","premiumCommonPlugin","memoize","filterHash","rangesIntersect","isPropsEqual","mapHash","combineEventUis","refineProps","guid","identity","rangesEqual","CalendarImpl","mergeEventStores","isPropsValid","parseFieldSpecs","EventImpl","unpromisify","requestJson","p","parseResource","R","ResourceApi","a","ResourceSplitter","h","handleResourceStore","massageEventDragMutation","eventMutation","hit0","hit1","resource0","dateSpan","resourceId","resource1","resourceMutation","matchResourceId","setResourceId","applyEventDefMutation","eventDef","mutation","context","computeResourceEditable","index","resourceIds","indexOf","slice","splice","push","resourceEditable","source","sourceId","getCurrentData","eventSources","extendedProps","options","eventResourceEditable","editable","transformEventDrop","calendarApi","oldResource","getResourceById","newResource","ResourceDataAdder","constructor","filterResources","transform","viewProps","calendarProps","viewSpec","optionDefaults","needsResourceData","resourceStore","filterResourcesWithEvents","eventStore","dateProfile","activeRange","resourceEntityExpansions","doFilterResourcesWithEvents","instancesInRange","filterEventInstancesInRange","instances","hasEvents","computeHasEvents","defs","Object","assign","computeAncestorHasEvents","resource","eventInstances","eventInstance","range","eventDefs","instanceId","instance","defId","res","parentId","transformIsDraggable","val","eventUi","state","viewSpecs","currentViewType","ResourceEventConfigAdder","buildResourceEventUis","injectResourceEventUis","eventUiBases","ui","resourceEventUis","injectResourceEventUi","origEventUi","parts","unshift","registerResourceSourceDef","def","getResourceSourceDef","id","getResourceSourceDefs","RESOURCE_SOURCE_REFINERS","String","resources","url","method","startParam","endParam","timeZoneParam","extraParams","parseResourceSource","input","inputObj","Array","isArray","refined","extra","warnUnknownProps","metaRes","buildResourceSourceMeta","_raw","sourceDefId","meta","publicId","isFetching","latestFetchId","fetchRange","i","length","parseMeta","props","propName","console","warn","reduceResourceSource","action","createSource","initialResources","refetchResourcesOnNavigate","type","resourceSourceInput","handleRangeChange","receiveResponse","fetchId","fetchSource","doesSourceIgnoreRange","Boolean","ignoreRange","sourceDef","fetch","resourceSource","dispatch","rawResources","error","reduceResourceStore","store","receiveRawResources","addResource","resourceHash","removeResource","setResourceProp","propValue","setResourceExtendedProp","existingStore","inputs","nextStore","additions","newStore","childResourceId","name","value","existingResource","reduceResourceEntityExpansions","expansions","isExpanded","reduceResources","EVENT_REFINERS","generateEventDefResourceMembers","ensureStringArray","concat","items","map","item","transformDateSelectionJoin","resourceId0","resourceId1","prototype","scrollTo","currentState","_resource","trigger","resourceApi","emitter","revert","rawResource","getResources","resourceApis","getTopLevelResources","refetchResources","transformDatePoint","transformDateSpan","isPropsValidWithResources","combinedProps","splitter","sets","splitProps","filterConfig","bind","config","constraints","filterConstraints","constraint","transformExternalDef","optionChangeHandlers","handleResources","newSourceInput","oldSourceInput","OPTION_REFINERS","resourceOrder","resourceGroupField","resourceAreaWidth","resourceAreaColumns","resourcesInitiallyExpanded","datesAboveResources","resourceAreaHeaderClassNames","resourceAreaHeaderContent","resourceAreaHeaderDidMount","resourceAreaHeaderWillUnmount","resourceGroupLabelClassNames","resourceGroupLabelContent","resourceGroupLabelDidMount","resourceGroupLabelWillUnmount","resourceLabelClassNames","resourceLabelContent","resourceLabelDidMount","resourceLabelWillUnmount","resourceLaneClassNames","resourceLaneContent","resourceLaneDidMount","resourceLaneWillUnmount","resourceGroupLaneClassNames","resourceGroupLaneContent","resourceGroupLaneDidMount","resourceGroupLaneWillUnmount","LISTENER_REFINERS","resourcesSet","resourceAdd","resourceChange","resourceRemove","_context","_def","setResources","mutate","standardProps","arg","successCallback","errorCallback","dateEnv","func","publicArg","start","toDate","end","startStr","formatIso","endStr","timeZone","toUpperCase","requestParams","buildRequestParams","then","response","customRequestParams","params","premiumReleaseDate","deps","reducers","isLoadingFuncs","eventRefiners","eventDefMemberAdders","isDraggableTransformers","eventDragMutationMassagers","eventDefMutationAppliers","dateSelectionTransformers","datePointTransforms","dateSpanTransforms","viewPropsTransformers","externalDefTransforms","eventDropTransformers","optionRefiners","listenerRefiners","propSetHandlers","default"],"sources":["C:/Users/erden/Videos/FInals/New folder/streamlit-calendar/streamlit_calendar/frontend/node_modules/@fullcalendar/resource/index.js"],"sourcesContent":["import { createPlugin } from '@fullcalendar/core/index.js';\nimport premiumCommonPlugin from '@fullcalendar/premium-common/index.js';\nimport { memoize, filterHash, rangesIntersect, isPropsEqual, mapHash, combineEventUis, refineProps, guid, identity, rangesEqual, CalendarImpl, mergeEventStores, isPropsValid, parseFieldSpecs, EventImpl, unpromisify, requestJson } from '@fullcalendar/core/internal.js';\nimport { p as parseResource, R as ResourceApi, a as ResourceSplitter, h as handleResourceStore } from './internal-common.js';\nexport { R as ResourceApi } from './internal-common.js';\nimport '@fullcalendar/core/preact.js';\n\nfunction massageEventDragMutation(eventMutation, hit0, hit1) {\n    let resource0 = hit0.dateSpan.resourceId;\n    let resource1 = hit1.dateSpan.resourceId;\n    if (resource0 && resource1 &&\n        resource0 !== resource1) {\n        eventMutation.resourceMutation = {\n            matchResourceId: resource0,\n            setResourceId: resource1,\n        };\n    }\n}\n/*\nTODO: all this would be much easier if we were using a hash!\n*/\nfunction applyEventDefMutation(eventDef, mutation, context) {\n    let resourceMutation = mutation.resourceMutation;\n    if (resourceMutation && computeResourceEditable(eventDef, context)) {\n        let index = eventDef.resourceIds.indexOf(resourceMutation.matchResourceId);\n        if (index !== -1) {\n            let resourceIds = eventDef.resourceIds.slice(); // copy\n            resourceIds.splice(index, 1); // remove\n            if (resourceIds.indexOf(resourceMutation.setResourceId) === -1) { // not already in there\n                resourceIds.push(resourceMutation.setResourceId); // add\n            }\n            eventDef.resourceIds = resourceIds;\n        }\n    }\n}\n/*\nHACK\nTODO: use EventUi system instead of this\n*/\nfunction computeResourceEditable(eventDef, context) {\n    let { resourceEditable } = eventDef;\n    if (resourceEditable == null) {\n        let source = eventDef.sourceId && context.getCurrentData().eventSources[eventDef.sourceId];\n        if (source) {\n            resourceEditable = source.extendedProps.resourceEditable; // used the Source::extendedProps hack\n        }\n        if (resourceEditable == null) {\n            resourceEditable = context.options.eventResourceEditable;\n            if (resourceEditable == null) {\n                resourceEditable = context.options.editable; // TODO: use defaults system instead\n            }\n        }\n    }\n    return resourceEditable;\n}\nfunction transformEventDrop(mutation, context) {\n    let { resourceMutation } = mutation;\n    if (resourceMutation) {\n        let { calendarApi } = context;\n        return {\n            oldResource: calendarApi.getResourceById(resourceMutation.matchResourceId),\n            newResource: calendarApi.getResourceById(resourceMutation.setResourceId),\n        };\n    }\n    return {\n        oldResource: null,\n        newResource: null,\n    };\n}\n\nclass ResourceDataAdder {\n    constructor() {\n        this.filterResources = memoize(filterResources);\n    }\n    transform(viewProps, calendarProps) {\n        if (calendarProps.viewSpec.optionDefaults.needsResourceData) {\n            return {\n                resourceStore: this.filterResources(calendarProps.resourceStore, calendarProps.options.filterResourcesWithEvents, calendarProps.eventStore, calendarProps.dateProfile.activeRange),\n                resourceEntityExpansions: calendarProps.resourceEntityExpansions,\n            };\n        }\n        return null;\n    }\n}\nfunction filterResources(resourceStore, doFilterResourcesWithEvents, eventStore, activeRange) {\n    if (doFilterResourcesWithEvents) {\n        let instancesInRange = filterEventInstancesInRange(eventStore.instances, activeRange);\n        let hasEvents = computeHasEvents(instancesInRange, eventStore.defs);\n        Object.assign(hasEvents, computeAncestorHasEvents(hasEvents, resourceStore));\n        return filterHash(resourceStore, (resource, resourceId) => hasEvents[resourceId]);\n    }\n    return resourceStore;\n}\nfunction filterEventInstancesInRange(eventInstances, activeRange) {\n    return filterHash(eventInstances, (eventInstance) => rangesIntersect(eventInstance.range, activeRange));\n}\nfunction computeHasEvents(eventInstances, eventDefs) {\n    let hasEvents = {};\n    for (let instanceId in eventInstances) {\n        let instance = eventInstances[instanceId];\n        for (let resourceId of eventDefs[instance.defId].resourceIds) {\n            hasEvents[resourceId] = true;\n        }\n    }\n    return hasEvents;\n}\n/*\nmark resources as having events if any of their ancestors have them\nNOTE: resourceStore might not have all the resources that hasEvents{} has keyed\n*/\nfunction computeAncestorHasEvents(hasEvents, resourceStore) {\n    let res = {};\n    for (let resourceId in hasEvents) {\n        let resource;\n        while ((resource = resourceStore[resourceId])) {\n            resourceId = resource.parentId; // now functioning as the parentId\n            if (resourceId) {\n                res[resourceId] = true;\n            }\n            else {\n                break;\n            }\n        }\n    }\n    return res;\n}\n/*\nfor making sure events that have editable resources are always draggable in resource views\n*/\nfunction transformIsDraggable(val, eventDef, eventUi, context) {\n    if (!val) {\n        let state = context.getCurrentData();\n        let viewSpec = state.viewSpecs[state.currentViewType];\n        if (viewSpec.optionDefaults.needsResourceData) {\n            if (computeResourceEditable(eventDef, context)) {\n                return true;\n            }\n        }\n    }\n    return val;\n}\n\n// for when non-resource view should be given EventUi info (for event coloring/constraints based off of resource data)\nclass ResourceEventConfigAdder {\n    constructor() {\n        this.buildResourceEventUis = memoize(buildResourceEventUis, isPropsEqual);\n        this.injectResourceEventUis = memoize(injectResourceEventUis);\n    }\n    transform(viewProps, calendarProps) {\n        if (!calendarProps.viewSpec.optionDefaults.needsResourceData) {\n            return {\n                eventUiBases: this.injectResourceEventUis(viewProps.eventUiBases, viewProps.eventStore.defs, this.buildResourceEventUis(calendarProps.resourceStore)),\n            };\n        }\n        return null;\n    }\n}\nfunction buildResourceEventUis(resourceStore) {\n    return mapHash(resourceStore, (resource) => resource.ui);\n}\nfunction injectResourceEventUis(eventUiBases, eventDefs, resourceEventUis) {\n    return mapHash(eventUiBases, (eventUi, defId) => {\n        if (defId) { // not the '' key\n            return injectResourceEventUi(eventUi, eventDefs[defId], resourceEventUis);\n        }\n        return eventUi;\n    });\n}\nfunction injectResourceEventUi(origEventUi, eventDef, resourceEventUis) {\n    let parts = [];\n    // first resource takes precedence, which fights with the ordering of combineEventUis, thus the unshifts\n    for (let resourceId of eventDef.resourceIds) {\n        if (resourceEventUis[resourceId]) {\n            parts.unshift(resourceEventUis[resourceId]);\n        }\n    }\n    parts.unshift(origEventUi);\n    return combineEventUis(parts);\n}\n\nlet defs = []; // TODO: use plugin system\nfunction registerResourceSourceDef(def) {\n    defs.push(def);\n}\nfunction getResourceSourceDef(id) {\n    return defs[id];\n}\nfunction getResourceSourceDefs() {\n    return defs;\n}\n\n// TODO: make this a plugin-able parser\n// TODO: success/failure\nconst RESOURCE_SOURCE_REFINERS = {\n    id: String,\n    // for array. TODO: move to resource-array\n    resources: identity,\n    // for json feed. TODO: move to resource-json-feed\n    url: String,\n    method: String,\n    startParam: String,\n    endParam: String,\n    timeZoneParam: String,\n    extraParams: identity,\n};\nfunction parseResourceSource(input) {\n    let inputObj;\n    if (typeof input === 'string') {\n        inputObj = { url: input };\n    }\n    else if (typeof input === 'function' || Array.isArray(input)) {\n        inputObj = { resources: input };\n    }\n    else if (typeof input === 'object' && input) { // non-null object\n        inputObj = input;\n    }\n    if (inputObj) {\n        let { refined, extra } = refineProps(inputObj, RESOURCE_SOURCE_REFINERS);\n        warnUnknownProps(extra);\n        let metaRes = buildResourceSourceMeta(refined);\n        if (metaRes) {\n            return {\n                _raw: input,\n                sourceId: guid(),\n                sourceDefId: metaRes.sourceDefId,\n                meta: metaRes.meta,\n                publicId: refined.id || '',\n                isFetching: false,\n                latestFetchId: '',\n                fetchRange: null,\n            };\n        }\n    }\n    return null;\n}\nfunction buildResourceSourceMeta(refined) {\n    let defs = getResourceSourceDefs();\n    for (let i = defs.length - 1; i >= 0; i -= 1) { // later-added plugins take precedence\n        let def = defs[i];\n        let meta = def.parseMeta(refined);\n        if (meta) {\n            return { meta, sourceDefId: i };\n        }\n    }\n    return null;\n}\nfunction warnUnknownProps(props) {\n    for (let propName in props) {\n        console.warn(`Unknown resource prop '${propName}'`);\n    }\n}\n\nfunction reduceResourceSource(source, action, context) {\n    let { options, dateProfile } = context;\n    if (!source || !action) {\n        return createSource(options.initialResources || options.resources, dateProfile.activeRange, options.refetchResourcesOnNavigate, context);\n    }\n    switch (action.type) {\n        case 'RESET_RESOURCE_SOURCE':\n            return createSource(action.resourceSourceInput, dateProfile.activeRange, options.refetchResourcesOnNavigate, context);\n        case 'PREV': // TODO: how do we track all actions that affect dateProfile :(\n        case 'NEXT':\n        case 'CHANGE_DATE':\n        case 'CHANGE_VIEW_TYPE':\n            return handleRangeChange(source, dateProfile.activeRange, options.refetchResourcesOnNavigate, context);\n        case 'RECEIVE_RESOURCES':\n        case 'RECEIVE_RESOURCE_ERROR':\n            return receiveResponse(source, action.fetchId, action.fetchRange);\n        case 'REFETCH_RESOURCES':\n            return fetchSource(source, dateProfile.activeRange, context);\n        default:\n            return source;\n    }\n}\nfunction createSource(input, activeRange, refetchResourcesOnNavigate, context) {\n    if (input) {\n        let source = parseResourceSource(input);\n        source = fetchSource(source, refetchResourcesOnNavigate ? activeRange : null, context);\n        return source;\n    }\n    return null;\n}\nfunction handleRangeChange(source, activeRange, refetchResourcesOnNavigate, context) {\n    if (refetchResourcesOnNavigate &&\n        !doesSourceIgnoreRange(source) &&\n        (!source.fetchRange || !rangesEqual(source.fetchRange, activeRange))) {\n        return fetchSource(source, activeRange, context);\n    }\n    return source;\n}\nfunction doesSourceIgnoreRange(source) {\n    return Boolean(getResourceSourceDef(source.sourceDefId).ignoreRange);\n}\nfunction fetchSource(source, fetchRange, context) {\n    let sourceDef = getResourceSourceDef(source.sourceDefId);\n    let fetchId = guid();\n    sourceDef.fetch({\n        resourceSource: source,\n        range: fetchRange,\n        context,\n    }, (res) => {\n        context.dispatch({\n            type: 'RECEIVE_RESOURCES',\n            fetchId,\n            fetchRange,\n            rawResources: res.rawResources,\n        });\n    }, (error) => {\n        context.dispatch({\n            type: 'RECEIVE_RESOURCE_ERROR',\n            fetchId,\n            fetchRange,\n            error,\n        });\n    });\n    return Object.assign(Object.assign({}, source), { isFetching: true, latestFetchId: fetchId });\n}\nfunction receiveResponse(source, fetchId, fetchRange) {\n    if (fetchId === source.latestFetchId) {\n        return Object.assign(Object.assign({}, source), { isFetching: false, fetchRange });\n    }\n    return source;\n}\n\nfunction reduceResourceStore(store, action, source, context) {\n    if (!store || !action) {\n        return {};\n    }\n    switch (action.type) {\n        case 'RECEIVE_RESOURCES':\n            return receiveRawResources(store, action.rawResources, action.fetchId, source, context);\n        case 'ADD_RESOURCE':\n            return addResource(store, action.resourceHash);\n        case 'REMOVE_RESOURCE':\n            return removeResource(store, action.resourceId);\n        case 'SET_RESOURCE_PROP':\n            return setResourceProp(store, action.resourceId, action.propName, action.propValue);\n        case 'SET_RESOURCE_EXTENDED_PROP':\n            return setResourceExtendedProp(store, action.resourceId, action.propName, action.propValue);\n        default:\n            return store;\n    }\n}\nfunction receiveRawResources(existingStore, inputs, fetchId, source, context) {\n    if (source.latestFetchId === fetchId) {\n        let nextStore = {};\n        for (let input of inputs) {\n            parseResource(input, '', nextStore, context);\n        }\n        return nextStore;\n    }\n    return existingStore;\n}\nfunction addResource(existingStore, additions) {\n    // TODO: warn about duplicate IDs\n    return Object.assign(Object.assign({}, existingStore), additions);\n}\nfunction removeResource(existingStore, resourceId) {\n    let newStore = Object.assign({}, existingStore);\n    delete newStore[resourceId];\n    // promote children\n    for (let childResourceId in newStore) { // a child, *maybe* but probably not\n        if (newStore[childResourceId].parentId === resourceId) {\n            newStore[childResourceId] = Object.assign(Object.assign({}, newStore[childResourceId]), { parentId: '' });\n        }\n    }\n    return newStore;\n}\nfunction setResourceProp(existingStore, resourceId, name, value) {\n    let existingResource = existingStore[resourceId];\n    // TODO: sanitization\n    if (existingResource) {\n        return Object.assign(Object.assign({}, existingStore), { [resourceId]: Object.assign(Object.assign({}, existingResource), { [name]: value }) });\n    }\n    return existingStore;\n}\nfunction setResourceExtendedProp(existingStore, resourceId, name, value) {\n    let existingResource = existingStore[resourceId];\n    if (existingResource) {\n        return Object.assign(Object.assign({}, existingStore), { [resourceId]: Object.assign(Object.assign({}, existingResource), { extendedProps: Object.assign(Object.assign({}, existingResource.extendedProps), { [name]: value }) }) });\n    }\n    return existingStore;\n}\n\nfunction reduceResourceEntityExpansions(expansions, action) {\n    if (!expansions || !action) {\n        return {};\n    }\n    switch (action.type) {\n        case 'SET_RESOURCE_ENTITY_EXPANDED':\n            return Object.assign(Object.assign({}, expansions), { [action.id]: action.isExpanded });\n        default:\n            return expansions;\n    }\n}\n\nfunction reduceResources(state, action, context) {\n    let resourceSource = reduceResourceSource(state && state.resourceSource, action, context);\n    let resourceStore = reduceResourceStore(state && state.resourceStore, action, resourceSource, context);\n    let resourceEntityExpansions = reduceResourceEntityExpansions(state && state.resourceEntityExpansions, action);\n    return {\n        resourceSource,\n        resourceStore,\n        resourceEntityExpansions,\n    };\n}\n\nconst EVENT_REFINERS = {\n    resourceId: String,\n    resourceIds: identity,\n    resourceEditable: Boolean,\n};\nfunction generateEventDefResourceMembers(refined) {\n    return {\n        resourceIds: ensureStringArray(refined.resourceIds)\n            .concat(refined.resourceId ? [refined.resourceId] : []),\n        resourceEditable: refined.resourceEditable,\n    };\n}\nfunction ensureStringArray(items) {\n    return (items || []).map((item) => String(item));\n}\n\nfunction transformDateSelectionJoin(hit0, hit1) {\n    let resourceId0 = hit0.dateSpan.resourceId;\n    let resourceId1 = hit1.dateSpan.resourceId;\n    if (resourceId0 && resourceId1) {\n        return { resourceId: resourceId0 };\n    }\n    return null;\n}\n\nCalendarImpl.prototype.addResource = function (input, scrollTo = true) {\n    let currentState = this.getCurrentData();\n    let resourceHash;\n    let resource;\n    if (input instanceof ResourceApi) {\n        resource = input._resource;\n        resourceHash = { [resource.id]: resource };\n    }\n    else {\n        resourceHash = {};\n        resource = parseResource(input, '', resourceHash, currentState);\n    }\n    this.dispatch({\n        type: 'ADD_RESOURCE',\n        resourceHash,\n    });\n    if (scrollTo) {\n        // TODO: wait til dispatch completes somehow\n        this.trigger('_scrollRequest', { resourceId: resource.id });\n    }\n    let resourceApi = new ResourceApi(currentState, resource);\n    currentState.emitter.trigger('resourceAdd', {\n        resource: resourceApi,\n        revert: () => {\n            this.dispatch({\n                type: 'REMOVE_RESOURCE',\n                resourceId: resource.id,\n            });\n        },\n    });\n    return resourceApi;\n};\nCalendarImpl.prototype.getResourceById = function (id) {\n    id = String(id);\n    let currentState = this.getCurrentData(); // eslint-disable-line react/no-this-in-sfc\n    if (currentState.resourceStore) { // guard against calendar with no resource functionality\n        let rawResource = currentState.resourceStore[id];\n        if (rawResource) {\n            return new ResourceApi(currentState, rawResource);\n        }\n    }\n    return null;\n};\nCalendarImpl.prototype.getResources = function () {\n    let currentState = this.getCurrentData();\n    let { resourceStore } = currentState;\n    let resourceApis = [];\n    if (resourceStore) { // guard against calendar with no resource functionality\n        for (let resourceId in resourceStore) {\n            resourceApis.push(new ResourceApi(currentState, resourceStore[resourceId]));\n        }\n    }\n    return resourceApis;\n};\nCalendarImpl.prototype.getTopLevelResources = function () {\n    let currentState = this.getCurrentData();\n    let { resourceStore } = currentState;\n    let resourceApis = [];\n    if (resourceStore) { // guard against calendar with no resource functionality\n        for (let resourceId in resourceStore) {\n            if (!resourceStore[resourceId].parentId) {\n                resourceApis.push(new ResourceApi(currentState, resourceStore[resourceId]));\n            }\n        }\n    }\n    return resourceApis;\n};\nCalendarImpl.prototype.refetchResources = function () {\n    this.dispatch({\n        type: 'REFETCH_RESOURCES',\n    });\n};\nfunction transformDatePoint(dateSpan, context) {\n    return dateSpan.resourceId ?\n        { resource: context.calendarApi.getResourceById(dateSpan.resourceId) } :\n        {};\n}\nfunction transformDateSpan(dateSpan, context) {\n    return dateSpan.resourceId ?\n        { resource: context.calendarApi.getResourceById(dateSpan.resourceId) } :\n        {};\n}\n\nfunction isPropsValidWithResources(combinedProps, context) {\n    let splitter = new ResourceSplitter();\n    let sets = splitter.splitProps(Object.assign(Object.assign({}, combinedProps), { resourceStore: context.getCurrentData().resourceStore }));\n    for (let resourceId in sets) {\n        let props = sets[resourceId];\n        // merge in event data from the non-resource segment\n        if (resourceId && sets['']) { // current segment is not the non-resource one, and there IS a non-resource one\n            props = Object.assign(Object.assign({}, props), { eventStore: mergeEventStores(sets[''].eventStore, props.eventStore), eventUiBases: Object.assign(Object.assign({}, sets[''].eventUiBases), props.eventUiBases) });\n        }\n        if (!isPropsValid(props, context, { resourceId }, filterConfig.bind(null, resourceId))) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction filterConfig(resourceId, config) {\n    return Object.assign(Object.assign({}, config), { constraints: filterConstraints(resourceId, config.constraints) });\n}\nfunction filterConstraints(resourceId, constraints) {\n    return constraints.map((constraint) => {\n        let defs = constraint.defs;\n        if (defs) { // we are dealing with an EventStore\n            // if any of the events define constraints to resources that are NOT this resource,\n            // then this resource is unconditionally prohibited, which is what a `false` value does.\n            for (let defId in defs) {\n                let resourceIds = defs[defId].resourceIds;\n                if (resourceIds.length && resourceIds.indexOf(resourceId) === -1) { // TODO: use a hash?!!! (for other reasons too)\n                    return false;\n                }\n            }\n        }\n        return constraint;\n    });\n}\n\nfunction transformExternalDef(dateSpan) {\n    return dateSpan.resourceId ?\n        { resourceId: dateSpan.resourceId } :\n        {};\n}\n\nconst optionChangeHandlers = {\n    resources: handleResources,\n};\nfunction handleResources(newSourceInput, context) {\n    let oldSourceInput = context.getCurrentData().resourceSource._raw;\n    if (oldSourceInput !== newSourceInput) {\n        context.dispatch({\n            type: 'RESET_RESOURCE_SOURCE',\n            resourceSourceInput: newSourceInput,\n        });\n    }\n}\n\nconst OPTION_REFINERS = {\n    initialResources: identity,\n    resources: identity,\n    eventResourceEditable: Boolean,\n    refetchResourcesOnNavigate: Boolean,\n    resourceOrder: parseFieldSpecs,\n    filterResourcesWithEvents: Boolean,\n    resourceGroupField: String,\n    resourceAreaWidth: identity,\n    resourceAreaColumns: identity,\n    resourcesInitiallyExpanded: Boolean,\n    datesAboveResources: Boolean,\n    needsResourceData: Boolean,\n    resourceAreaHeaderClassNames: identity,\n    resourceAreaHeaderContent: identity,\n    resourceAreaHeaderDidMount: identity,\n    resourceAreaHeaderWillUnmount: identity,\n    resourceGroupLabelClassNames: identity,\n    resourceGroupLabelContent: identity,\n    resourceGroupLabelDidMount: identity,\n    resourceGroupLabelWillUnmount: identity,\n    resourceLabelClassNames: identity,\n    resourceLabelContent: identity,\n    resourceLabelDidMount: identity,\n    resourceLabelWillUnmount: identity,\n    resourceLaneClassNames: identity,\n    resourceLaneContent: identity,\n    resourceLaneDidMount: identity,\n    resourceLaneWillUnmount: identity,\n    resourceGroupLaneClassNames: identity,\n    resourceGroupLaneContent: identity,\n    resourceGroupLaneDidMount: identity,\n    resourceGroupLaneWillUnmount: identity,\n};\nconst LISTENER_REFINERS = {\n    resourcesSet: identity,\n    resourceAdd: identity,\n    resourceChange: identity,\n    resourceRemove: identity,\n};\n\nEventImpl.prototype.getResources = function () {\n    let { calendarApi } = this._context;\n    return this._def.resourceIds.map((resourceId) => calendarApi.getResourceById(resourceId));\n};\nEventImpl.prototype.setResources = function (resources) {\n    let resourceIds = [];\n    // massage resources -> resourceIds\n    for (let resource of resources) {\n        let resourceId = null;\n        if (typeof resource === 'string') {\n            resourceId = resource;\n        }\n        else if (typeof resource === 'number') {\n            resourceId = String(resource);\n        }\n        else if (resource instanceof ResourceApi) {\n            resourceId = resource.id; // guaranteed to always have an ID. hmmm\n        }\n        else {\n            console.warn('unknown resource type: ' + resource);\n        }\n        if (resourceId) {\n            resourceIds.push(resourceId);\n        }\n    }\n    this.mutate({\n        standardProps: {\n            resourceIds,\n        },\n    });\n};\n\nregisterResourceSourceDef({\n    ignoreRange: true,\n    parseMeta(refined) {\n        if (Array.isArray(refined.resources)) {\n            return refined.resources;\n        }\n        return null;\n    },\n    fetch(arg, successCallback) {\n        successCallback({\n            rawResources: arg.resourceSource.meta,\n        });\n    },\n});\n\nregisterResourceSourceDef({\n    parseMeta(refined) {\n        if (typeof refined.resources === 'function') {\n            return refined.resources;\n        }\n        return null;\n    },\n    fetch(arg, successCallback, errorCallback) {\n        const dateEnv = arg.context.dateEnv;\n        const func = arg.resourceSource.meta;\n        const publicArg = arg.range ? {\n            start: dateEnv.toDate(arg.range.start),\n            end: dateEnv.toDate(arg.range.end),\n            startStr: dateEnv.formatIso(arg.range.start),\n            endStr: dateEnv.formatIso(arg.range.end),\n            timeZone: dateEnv.timeZone,\n        } : {};\n        unpromisify(func.bind(null, publicArg), (rawResources) => successCallback({ rawResources }), errorCallback);\n    },\n});\n\nregisterResourceSourceDef({\n    parseMeta(refined) {\n        if (refined.url) {\n            return {\n                url: refined.url,\n                method: (refined.method || 'GET').toUpperCase(),\n                extraParams: refined.extraParams,\n            };\n        }\n        return null;\n    },\n    fetch(arg, successCallback, errorCallback) {\n        const meta = arg.resourceSource.meta;\n        const requestParams = buildRequestParams(meta, arg.range, arg.context);\n        requestJson(meta.method, meta.url, requestParams).then(([rawResources, response]) => {\n            successCallback({ rawResources, response });\n        }, errorCallback);\n    },\n});\n// TODO: somehow consolidate with event json feed\nfunction buildRequestParams(meta, range, context) {\n    let { dateEnv, options } = context;\n    let startParam;\n    let endParam;\n    let timeZoneParam;\n    let customRequestParams;\n    let params = {};\n    if (range) {\n        startParam = meta.startParam;\n        if (startParam == null) {\n            startParam = options.startParam;\n        }\n        endParam = meta.endParam;\n        if (endParam == null) {\n            endParam = options.endParam;\n        }\n        timeZoneParam = meta.timeZoneParam;\n        if (timeZoneParam == null) {\n            timeZoneParam = options.timeZoneParam;\n        }\n        params[startParam] = dateEnv.formatIso(range.start);\n        params[endParam] = dateEnv.formatIso(range.end);\n        if (dateEnv.timeZone !== 'local') {\n            params[timeZoneParam] = dateEnv.timeZone;\n        }\n    }\n    // retrieve any outbound GET/POST data from the options\n    if (typeof meta.extraParams === 'function') {\n        // supplied as a function that returns a key/value object\n        customRequestParams = meta.extraParams();\n    }\n    else {\n        // probably supplied as a straight key/value object\n        customRequestParams = meta.extraParams || {};\n    }\n    Object.assign(params, customRequestParams);\n    return params;\n}\n\nvar index = createPlugin({\n    name: '@fullcalendar/resource',\n    premiumReleaseDate: '2023-11-29',\n    deps: [premiumCommonPlugin],\n    reducers: [reduceResources],\n    isLoadingFuncs: [\n        (state) => state.resourceSource && state.resourceSource.isFetching,\n    ],\n    eventRefiners: EVENT_REFINERS,\n    eventDefMemberAdders: [generateEventDefResourceMembers],\n    isDraggableTransformers: [transformIsDraggable],\n    eventDragMutationMassagers: [massageEventDragMutation],\n    eventDefMutationAppliers: [applyEventDefMutation],\n    dateSelectionTransformers: [transformDateSelectionJoin],\n    datePointTransforms: [transformDatePoint],\n    dateSpanTransforms: [transformDateSpan],\n    viewPropsTransformers: [ResourceDataAdder, ResourceEventConfigAdder],\n    isPropsValid: isPropsValidWithResources,\n    externalDefTransforms: [transformExternalDef],\n    eventDropTransformers: [transformEventDrop],\n    optionChangeHandlers,\n    optionRefiners: OPTION_REFINERS,\n    listenerRefiners: LISTENER_REFINERS,\n    propSetHandlers: { resourceStore: handleResourceStore },\n});\n\nexport { index as default };\n"],"mappings":"AAAA,SAASA,YAAY,QAAQ,6BAA6B;AAC1D,OAAOC,mBAAmB,MAAM,uCAAuC;AACvE,SAASC,OAAO,EAAEC,UAAU,EAAEC,eAAe,EAAEC,YAAY,EAAEC,OAAO,EAAEC,eAAe,EAAEC,WAAW,EAAEC,IAAI,EAAEC,QAAQ,EAAEC,WAAW,EAAEC,YAAY,EAAEC,gBAAgB,EAAEC,YAAY,EAAEC,eAAe,EAAEC,SAAS,EAAEC,WAAW,EAAEC,WAAW,QAAQ,gCAAgC;AAC3Q,SAASC,CAAC,IAAIC,aAAa,EAAEC,CAAC,IAAIC,WAAW,EAAEC,CAAC,IAAIC,gBAAgB,EAAEC,CAAC,IAAIC,mBAAmB,QAAQ,sBAAsB;AAC5H,SAASL,CAAC,IAAIC,WAAW,QAAQ,sBAAsB;AACvD,OAAO,8BAA8B;AAErC,SAASK,wBAAwBA,CAACC,aAAa,EAAEC,IAAI,EAAEC,IAAI,EAAE;EACzD,IAAIC,SAAS,GAAGF,IAAI,CAACG,QAAQ,CAACC,UAAU;EACxC,IAAIC,SAAS,GAAGJ,IAAI,CAACE,QAAQ,CAACC,UAAU;EACxC,IAAIF,SAAS,IAAIG,SAAS,IACtBH,SAAS,KAAKG,SAAS,EAAE;IACzBN,aAAa,CAACO,gBAAgB,GAAG;MAC7BC,eAAe,EAAEL,SAAS;MAC1BM,aAAa,EAAEH;IACnB,CAAC;EACL;AACJ;AACA;AACA;AACA;AACA,SAASI,qBAAqBA,CAACC,QAAQ,EAAEC,QAAQ,EAAEC,OAAO,EAAE;EACxD,IAAIN,gBAAgB,GAAGK,QAAQ,CAACL,gBAAgB;EAChD,IAAIA,gBAAgB,IAAIO,uBAAuB,CAACH,QAAQ,EAAEE,OAAO,CAAC,EAAE;IAChE,IAAIE,KAAK,GAAGJ,QAAQ,CAACK,WAAW,CAACC,OAAO,CAACV,gBAAgB,CAACC,eAAe,CAAC;IAC1E,IAAIO,KAAK,KAAK,CAAC,CAAC,EAAE;MACd,IAAIC,WAAW,GAAGL,QAAQ,CAACK,WAAW,CAACE,KAAK,CAAC,CAAC,CAAC,CAAC;MAChDF,WAAW,CAACG,MAAM,CAACJ,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC;MAC9B,IAAIC,WAAW,CAACC,OAAO,CAACV,gBAAgB,CAACE,aAAa,CAAC,KAAK,CAAC,CAAC,EAAE;QAAE;QAC9DO,WAAW,CAACI,IAAI,CAACb,gBAAgB,CAACE,aAAa,CAAC,CAAC,CAAC;MACtD;;MACAE,QAAQ,CAACK,WAAW,GAAGA,WAAW;IACtC;EACJ;AACJ;AACA;AACA;AACA;AACA;AACA,SAASF,uBAAuBA,CAACH,QAAQ,EAAEE,OAAO,EAAE;EAChD,IAAI;IAAEQ;EAAiB,CAAC,GAAGV,QAAQ;EACnC,IAAIU,gBAAgB,IAAI,IAAI,EAAE;IAC1B,IAAIC,MAAM,GAAGX,QAAQ,CAACY,QAAQ,IAAIV,OAAO,CAACW,cAAc,CAAC,CAAC,CAACC,YAAY,CAACd,QAAQ,CAACY,QAAQ,CAAC;IAC1F,IAAID,MAAM,EAAE;MACRD,gBAAgB,GAAGC,MAAM,CAACI,aAAa,CAACL,gBAAgB,CAAC,CAAC;IAC9D;;IACA,IAAIA,gBAAgB,IAAI,IAAI,EAAE;MAC1BA,gBAAgB,GAAGR,OAAO,CAACc,OAAO,CAACC,qBAAqB;MACxD,IAAIP,gBAAgB,IAAI,IAAI,EAAE;QAC1BA,gBAAgB,GAAGR,OAAO,CAACc,OAAO,CAACE,QAAQ,CAAC,CAAC;MACjD;IACJ;EACJ;;EACA,OAAOR,gBAAgB;AAC3B;AACA,SAASS,kBAAkBA,CAAClB,QAAQ,EAAEC,OAAO,EAAE;EAC3C,IAAI;IAAEN;EAAiB,CAAC,GAAGK,QAAQ;EACnC,IAAIL,gBAAgB,EAAE;IAClB,IAAI;MAAEwB;IAAY,CAAC,GAAGlB,OAAO;IAC7B,OAAO;MACHmB,WAAW,EAAED,WAAW,CAACE,eAAe,CAAC1B,gBAAgB,CAACC,eAAe,CAAC;MAC1E0B,WAAW,EAAEH,WAAW,CAACE,eAAe,CAAC1B,gBAAgB,CAACE,aAAa;IAC3E,CAAC;EACL;EACA,OAAO;IACHuB,WAAW,EAAE,IAAI;IACjBE,WAAW,EAAE;EACjB,CAAC;AACL;AAEA,MAAMC,iBAAiB,CAAC;EACpBC,WAAWA,CAAA,EAAG;IACV,IAAI,CAACC,eAAe,GAAG/D,OAAO,CAAC+D,eAAe,CAAC;EACnD;EACAC,SAASA,CAACC,SAAS,EAAEC,aAAa,EAAE;IAChC,IAAIA,aAAa,CAACC,QAAQ,CAACC,cAAc,CAACC,iBAAiB,EAAE;MACzD,OAAO;QACHC,aAAa,EAAE,IAAI,CAACP,eAAe,CAACG,aAAa,CAACI,aAAa,EAAEJ,aAAa,CAACb,OAAO,CAACkB,yBAAyB,EAAEL,aAAa,CAACM,UAAU,EAAEN,aAAa,CAACO,WAAW,CAACC,WAAW,CAAC;QAClLC,wBAAwB,EAAET,aAAa,CAACS;MAC5C,CAAC;IACL;IACA,OAAO,IAAI;EACf;AACJ;AACA,SAASZ,eAAeA,CAACO,aAAa,EAAEM,2BAA2B,EAAEJ,UAAU,EAAEE,WAAW,EAAE;EAC1F,IAAIE,2BAA2B,EAAE;IAC7B,IAAIC,gBAAgB,GAAGC,2BAA2B,CAACN,UAAU,CAACO,SAAS,EAAEL,WAAW,CAAC;IACrF,IAAIM,SAAS,GAAGC,gBAAgB,CAACJ,gBAAgB,EAAEL,UAAU,CAACU,IAAI,CAAC;IACnEC,MAAM,CAACC,MAAM,CAACJ,SAAS,EAAEK,wBAAwB,CAACL,SAAS,EAAEV,aAAa,CAAC,CAAC;IAC5E,OAAOrE,UAAU,CAACqE,aAAa,EAAE,CAACgB,QAAQ,EAAEvD,UAAU,KAAKiD,SAAS,CAACjD,UAAU,CAAC,CAAC;EACrF;EACA,OAAOuC,aAAa;AACxB;AACA,SAASQ,2BAA2BA,CAACS,cAAc,EAAEb,WAAW,EAAE;EAC9D,OAAOzE,UAAU,CAACsF,cAAc,EAAGC,aAAa,IAAKtF,eAAe,CAACsF,aAAa,CAACC,KAAK,EAAEf,WAAW,CAAC,CAAC;AAC3G;AACA,SAASO,gBAAgBA,CAACM,cAAc,EAAEG,SAAS,EAAE;EACjD,IAAIV,SAAS,GAAG,CAAC,CAAC;EAClB,KAAK,IAAIW,UAAU,IAAIJ,cAAc,EAAE;IACnC,IAAIK,QAAQ,GAAGL,cAAc,CAACI,UAAU,CAAC;IACzC,KAAK,IAAI5D,UAAU,IAAI2D,SAAS,CAACE,QAAQ,CAACC,KAAK,CAAC,CAACnD,WAAW,EAAE;MAC1DsC,SAAS,CAACjD,UAAU,CAAC,GAAG,IAAI;IAChC;EACJ;EACA,OAAOiD,SAAS;AACpB;AACA;AACA;AACA;AACA;AACA,SAASK,wBAAwBA,CAACL,SAAS,EAAEV,aAAa,EAAE;EACxD,IAAIwB,GAAG,GAAG,CAAC,CAAC;EACZ,KAAK,IAAI/D,UAAU,IAAIiD,SAAS,EAAE;IAC9B,IAAIM,QAAQ;IACZ,OAAQA,QAAQ,GAAGhB,aAAa,CAACvC,UAAU,CAAC,EAAG;MAC3CA,UAAU,GAAGuD,QAAQ,CAACS,QAAQ,CAAC,CAAC;MAChC,IAAIhE,UAAU,EAAE;QACZ+D,GAAG,CAAC/D,UAAU,CAAC,GAAG,IAAI;MAC1B,CAAC,MACI;QACD;MACJ;IACJ;EACJ;EACA,OAAO+D,GAAG;AACd;AACA;AACA;AACA;AACA,SAASE,oBAAoBA,CAACC,GAAG,EAAE5D,QAAQ,EAAE6D,OAAO,EAAE3D,OAAO,EAAE;EAC3D,IAAI,CAAC0D,GAAG,EAAE;IACN,IAAIE,KAAK,GAAG5D,OAAO,CAACW,cAAc,CAAC,CAAC;IACpC,IAAIiB,QAAQ,GAAGgC,KAAK,CAACC,SAAS,CAACD,KAAK,CAACE,eAAe,CAAC;IACrD,IAAIlC,QAAQ,CAACC,cAAc,CAACC,iBAAiB,EAAE;MAC3C,IAAI7B,uBAAuB,CAACH,QAAQ,EAAEE,OAAO,CAAC,EAAE;QAC5C,OAAO,IAAI;MACf;IACJ;EACJ;EACA,OAAO0D,GAAG;AACd;;AAEA;AACA,MAAMK,wBAAwB,CAAC;EAC3BxC,WAAWA,CAAA,EAAG;IACV,IAAI,CAACyC,qBAAqB,GAAGvG,OAAO,CAACuG,qBAAqB,EAAEpG,YAAY,CAAC;IACzE,IAAI,CAACqG,sBAAsB,GAAGxG,OAAO,CAACwG,sBAAsB,CAAC;EACjE;EACAxC,SAASA,CAACC,SAAS,EAAEC,aAAa,EAAE;IAChC,IAAI,CAACA,aAAa,CAACC,QAAQ,CAACC,cAAc,CAACC,iBAAiB,EAAE;MAC1D,OAAO;QACHoC,YAAY,EAAE,IAAI,CAACD,sBAAsB,CAACvC,SAAS,CAACwC,YAAY,EAAExC,SAAS,CAACO,UAAU,CAACU,IAAI,EAAE,IAAI,CAACqB,qBAAqB,CAACrC,aAAa,CAACI,aAAa,CAAC;MACxJ,CAAC;IACL;IACA,OAAO,IAAI;EACf;AACJ;AACA,SAASiC,qBAAqBA,CAACjC,aAAa,EAAE;EAC1C,OAAOlE,OAAO,CAACkE,aAAa,EAAGgB,QAAQ,IAAKA,QAAQ,CAACoB,EAAE,CAAC;AAC5D;AACA,SAASF,sBAAsBA,CAACC,YAAY,EAAEf,SAAS,EAAEiB,gBAAgB,EAAE;EACvE,OAAOvG,OAAO,CAACqG,YAAY,EAAE,CAACP,OAAO,EAAEL,KAAK,KAAK;IAC7C,IAAIA,KAAK,EAAE;MAAE;MACT,OAAOe,qBAAqB,CAACV,OAAO,EAAER,SAAS,CAACG,KAAK,CAAC,EAAEc,gBAAgB,CAAC;IAC7E;IACA,OAAOT,OAAO;EAClB,CAAC,CAAC;AACN;AACA,SAASU,qBAAqBA,CAACC,WAAW,EAAExE,QAAQ,EAAEsE,gBAAgB,EAAE;EACpE,IAAIG,KAAK,GAAG,EAAE;EACd;EACA,KAAK,IAAI/E,UAAU,IAAIM,QAAQ,CAACK,WAAW,EAAE;IACzC,IAAIiE,gBAAgB,CAAC5E,UAAU,CAAC,EAAE;MAC9B+E,KAAK,CAACC,OAAO,CAACJ,gBAAgB,CAAC5E,UAAU,CAAC,CAAC;IAC/C;EACJ;EACA+E,KAAK,CAACC,OAAO,CAACF,WAAW,CAAC;EAC1B,OAAOxG,eAAe,CAACyG,KAAK,CAAC;AACjC;AAEA,IAAI5B,IAAI,GAAG,EAAE,CAAC,CAAC;AACf,SAAS8B,yBAAyBA,CAACC,GAAG,EAAE;EACpC/B,IAAI,CAACpC,IAAI,CAACmE,GAAG,CAAC;AAClB;AACA,SAASC,oBAAoBA,CAACC,EAAE,EAAE;EAC9B,OAAOjC,IAAI,CAACiC,EAAE,CAAC;AACnB;AACA,SAASC,qBAAqBA,CAAA,EAAG;EAC7B,OAAOlC,IAAI;AACf;;AAEA;AACA;AACA,MAAMmC,wBAAwB,GAAG;EAC7BF,EAAE,EAAEG,MAAM;EACV;EACAC,SAAS,EAAE/G,QAAQ;EACnB;EACAgH,GAAG,EAAEF,MAAM;EACXG,MAAM,EAAEH,MAAM;EACdI,UAAU,EAAEJ,MAAM;EAClBK,QAAQ,EAAEL,MAAM;EAChBM,aAAa,EAAEN,MAAM;EACrBO,WAAW,EAAErH;AACjB,CAAC;AACD,SAASsH,mBAAmBA,CAACC,KAAK,EAAE;EAChC,IAAIC,QAAQ;EACZ,IAAI,OAAOD,KAAK,KAAK,QAAQ,EAAE;IAC3BC,QAAQ,GAAG;MAAER,GAAG,EAAEO;IAAM,CAAC;EAC7B,CAAC,MACI,IAAI,OAAOA,KAAK,KAAK,UAAU,IAAIE,KAAK,CAACC,OAAO,CAACH,KAAK,CAAC,EAAE;IAC1DC,QAAQ,GAAG;MAAET,SAAS,EAAEQ;IAAM,CAAC;EACnC,CAAC,MACI,IAAI,OAAOA,KAAK,KAAK,QAAQ,IAAIA,KAAK,EAAE;IAAE;IAC3CC,QAAQ,GAAGD,KAAK;EACpB;EACA,IAAIC,QAAQ,EAAE;IACV,IAAI;MAAEG,OAAO;MAAEC;IAAM,CAAC,GAAG9H,WAAW,CAAC0H,QAAQ,EAAEX,wBAAwB,CAAC;IACxEgB,gBAAgB,CAACD,KAAK,CAAC;IACvB,IAAIE,OAAO,GAAGC,uBAAuB,CAACJ,OAAO,CAAC;IAC9C,IAAIG,OAAO,EAAE;MACT,OAAO;QACHE,IAAI,EAAET,KAAK;QACX9E,QAAQ,EAAE1C,IAAI,CAAC,CAAC;QAChBkI,WAAW,EAAEH,OAAO,CAACG,WAAW;QAChCC,IAAI,EAAEJ,OAAO,CAACI,IAAI;QAClBC,QAAQ,EAAER,OAAO,CAAChB,EAAE,IAAI,EAAE;QAC1ByB,UAAU,EAAE,KAAK;QACjBC,aAAa,EAAE,EAAE;QACjBC,UAAU,EAAE;MAChB,CAAC;IACL;EACJ;EACA,OAAO,IAAI;AACf;AACA,SAASP,uBAAuBA,CAACJ,OAAO,EAAE;EACtC,IAAIjD,IAAI,GAAGkC,qBAAqB,CAAC,CAAC;EAClC,KAAK,IAAI2B,CAAC,GAAG7D,IAAI,CAAC8D,MAAM,GAAG,CAAC,EAAED,CAAC,IAAI,CAAC,EAAEA,CAAC,IAAI,CAAC,EAAE;IAAE;IAC5C,IAAI9B,GAAG,GAAG/B,IAAI,CAAC6D,CAAC,CAAC;IACjB,IAAIL,IAAI,GAAGzB,GAAG,CAACgC,SAAS,CAACd,OAAO,CAAC;IACjC,IAAIO,IAAI,EAAE;MACN,OAAO;QAAEA,IAAI;QAAED,WAAW,EAAEM;MAAE,CAAC;IACnC;EACJ;EACA,OAAO,IAAI;AACf;AACA,SAASV,gBAAgBA,CAACa,KAAK,EAAE;EAC7B,KAAK,IAAIC,QAAQ,IAAID,KAAK,EAAE;IACxBE,OAAO,CAACC,IAAI,CAAE,0BAAyBF,QAAS,GAAE,CAAC;EACvD;AACJ;AAEA,SAASG,oBAAoBA,CAACtG,MAAM,EAAEuG,MAAM,EAAEhH,OAAO,EAAE;EACnD,IAAI;IAAEc,OAAO;IAAEoB;EAAY,CAAC,GAAGlC,OAAO;EACtC,IAAI,CAACS,MAAM,IAAI,CAACuG,MAAM,EAAE;IACpB,OAAOC,YAAY,CAACnG,OAAO,CAACoG,gBAAgB,IAAIpG,OAAO,CAACkE,SAAS,EAAE9C,WAAW,CAACC,WAAW,EAAErB,OAAO,CAACqG,0BAA0B,EAAEnH,OAAO,CAAC;EAC5I;EACA,QAAQgH,MAAM,CAACI,IAAI;IACf,KAAK,uBAAuB;MACxB,OAAOH,YAAY,CAACD,MAAM,CAACK,mBAAmB,EAAEnF,WAAW,CAACC,WAAW,EAAErB,OAAO,CAACqG,0BAA0B,EAAEnH,OAAO,CAAC;IACzH,KAAK,MAAM,CAAC,CAAC;IACb,KAAK,MAAM;IACX,KAAK,aAAa;IAClB,KAAK,kBAAkB;MACnB,OAAOsH,iBAAiB,CAAC7G,MAAM,EAAEyB,WAAW,CAACC,WAAW,EAAErB,OAAO,CAACqG,0BAA0B,EAAEnH,OAAO,CAAC;IAC1G,KAAK,mBAAmB;IACxB,KAAK,wBAAwB;MACzB,OAAOuH,eAAe,CAAC9G,MAAM,EAAEuG,MAAM,CAACQ,OAAO,EAAER,MAAM,CAACT,UAAU,CAAC;IACrE,KAAK,mBAAmB;MACpB,OAAOkB,WAAW,CAAChH,MAAM,EAAEyB,WAAW,CAACC,WAAW,EAAEnC,OAAO,CAAC;IAChE;MACI,OAAOS,MAAM;EACrB;AACJ;AACA,SAASwG,YAAYA,CAACzB,KAAK,EAAErD,WAAW,EAAEgF,0BAA0B,EAAEnH,OAAO,EAAE;EAC3E,IAAIwF,KAAK,EAAE;IACP,IAAI/E,MAAM,GAAG8E,mBAAmB,CAACC,KAAK,CAAC;IACvC/E,MAAM,GAAGgH,WAAW,CAAChH,MAAM,EAAE0G,0BAA0B,GAAGhF,WAAW,GAAG,IAAI,EAAEnC,OAAO,CAAC;IACtF,OAAOS,MAAM;EACjB;EACA,OAAO,IAAI;AACf;AACA,SAAS6G,iBAAiBA,CAAC7G,MAAM,EAAE0B,WAAW,EAAEgF,0BAA0B,EAAEnH,OAAO,EAAE;EACjF,IAAImH,0BAA0B,IAC1B,CAACO,qBAAqB,CAACjH,MAAM,CAAC,KAC7B,CAACA,MAAM,CAAC8F,UAAU,IAAI,CAACrI,WAAW,CAACuC,MAAM,CAAC8F,UAAU,EAAEpE,WAAW,CAAC,CAAC,EAAE;IACtE,OAAOsF,WAAW,CAAChH,MAAM,EAAE0B,WAAW,EAAEnC,OAAO,CAAC;EACpD;EACA,OAAOS,MAAM;AACjB;AACA,SAASiH,qBAAqBA,CAACjH,MAAM,EAAE;EACnC,OAAOkH,OAAO,CAAChD,oBAAoB,CAAClE,MAAM,CAACyF,WAAW,CAAC,CAAC0B,WAAW,CAAC;AACxE;AACA,SAASH,WAAWA,CAAChH,MAAM,EAAE8F,UAAU,EAAEvG,OAAO,EAAE;EAC9C,IAAI6H,SAAS,GAAGlD,oBAAoB,CAAClE,MAAM,CAACyF,WAAW,CAAC;EACxD,IAAIsB,OAAO,GAAGxJ,IAAI,CAAC,CAAC;EACpB6J,SAAS,CAACC,KAAK,CAAC;IACZC,cAAc,EAAEtH,MAAM;IACtByC,KAAK,EAAEqD,UAAU;IACjBvG;EACJ,CAAC,EAAGuD,GAAG,IAAK;IACRvD,OAAO,CAACgI,QAAQ,CAAC;MACbZ,IAAI,EAAE,mBAAmB;MACzBI,OAAO;MACPjB,UAAU;MACV0B,YAAY,EAAE1E,GAAG,CAAC0E;IACtB,CAAC,CAAC;EACN,CAAC,EAAGC,KAAK,IAAK;IACVlI,OAAO,CAACgI,QAAQ,CAAC;MACbZ,IAAI,EAAE,wBAAwB;MAC9BI,OAAO;MACPjB,UAAU;MACV2B;IACJ,CAAC,CAAC;EACN,CAAC,CAAC;EACF,OAAOtF,MAAM,CAACC,MAAM,CAACD,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAAEpC,MAAM,CAAC,EAAE;IAAE4F,UAAU,EAAE,IAAI;IAAEC,aAAa,EAAEkB;EAAQ,CAAC,CAAC;AACjG;AACA,SAASD,eAAeA,CAAC9G,MAAM,EAAE+G,OAAO,EAAEjB,UAAU,EAAE;EAClD,IAAIiB,OAAO,KAAK/G,MAAM,CAAC6F,aAAa,EAAE;IAClC,OAAO1D,MAAM,CAACC,MAAM,CAACD,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAAEpC,MAAM,CAAC,EAAE;MAAE4F,UAAU,EAAE,KAAK;MAAEE;IAAW,CAAC,CAAC;EACtF;EACA,OAAO9F,MAAM;AACjB;AAEA,SAAS0H,mBAAmBA,CAACC,KAAK,EAAEpB,MAAM,EAAEvG,MAAM,EAAET,OAAO,EAAE;EACzD,IAAI,CAACoI,KAAK,IAAI,CAACpB,MAAM,EAAE;IACnB,OAAO,CAAC,CAAC;EACb;EACA,QAAQA,MAAM,CAACI,IAAI;IACf,KAAK,mBAAmB;MACpB,OAAOiB,mBAAmB,CAACD,KAAK,EAAEpB,MAAM,CAACiB,YAAY,EAAEjB,MAAM,CAACQ,OAAO,EAAE/G,MAAM,EAAET,OAAO,CAAC;IAC3F,KAAK,cAAc;MACf,OAAOsI,WAAW,CAACF,KAAK,EAAEpB,MAAM,CAACuB,YAAY,CAAC;IAClD,KAAK,iBAAiB;MAClB,OAAOC,cAAc,CAACJ,KAAK,EAAEpB,MAAM,CAACxH,UAAU,CAAC;IACnD,KAAK,mBAAmB;MACpB,OAAOiJ,eAAe,CAACL,KAAK,EAAEpB,MAAM,CAACxH,UAAU,EAAEwH,MAAM,CAACJ,QAAQ,EAAEI,MAAM,CAAC0B,SAAS,CAAC;IACvF,KAAK,4BAA4B;MAC7B,OAAOC,uBAAuB,CAACP,KAAK,EAAEpB,MAAM,CAACxH,UAAU,EAAEwH,MAAM,CAACJ,QAAQ,EAAEI,MAAM,CAAC0B,SAAS,CAAC;IAC/F;MACI,OAAON,KAAK;EACpB;AACJ;AACA,SAASC,mBAAmBA,CAACO,aAAa,EAAEC,MAAM,EAAErB,OAAO,EAAE/G,MAAM,EAAET,OAAO,EAAE;EAC1E,IAAIS,MAAM,CAAC6F,aAAa,KAAKkB,OAAO,EAAE;IAClC,IAAIsB,SAAS,GAAG,CAAC,CAAC;IAClB,KAAK,IAAItD,KAAK,IAAIqD,MAAM,EAAE;MACtBlK,aAAa,CAAC6G,KAAK,EAAE,EAAE,EAAEsD,SAAS,EAAE9I,OAAO,CAAC;IAChD;IACA,OAAO8I,SAAS;EACpB;EACA,OAAOF,aAAa;AACxB;AACA,SAASN,WAAWA,CAACM,aAAa,EAAEG,SAAS,EAAE;EAC3C;EACA,OAAOnG,MAAM,CAACC,MAAM,CAACD,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAAE+F,aAAa,CAAC,EAAEG,SAAS,CAAC;AACrE;AACA,SAASP,cAAcA,CAACI,aAAa,EAAEpJ,UAAU,EAAE;EAC/C,IAAIwJ,QAAQ,GAAGpG,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAAE+F,aAAa,CAAC;EAC/C,OAAOI,QAAQ,CAACxJ,UAAU,CAAC;EAC3B;EACA,KAAK,IAAIyJ,eAAe,IAAID,QAAQ,EAAE;IAAE;IACpC,IAAIA,QAAQ,CAACC,eAAe,CAAC,CAACzF,QAAQ,KAAKhE,UAAU,EAAE;MACnDwJ,QAAQ,CAACC,eAAe,CAAC,GAAGrG,MAAM,CAACC,MAAM,CAACD,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAAEmG,QAAQ,CAACC,eAAe,CAAC,CAAC,EAAE;QAAEzF,QAAQ,EAAE;MAAG,CAAC,CAAC;IAC7G;EACJ;EACA,OAAOwF,QAAQ;AACnB;AACA,SAASP,eAAeA,CAACG,aAAa,EAAEpJ,UAAU,EAAE0J,IAAI,EAAEC,KAAK,EAAE;EAC7D,IAAIC,gBAAgB,GAAGR,aAAa,CAACpJ,UAAU,CAAC;EAChD;EACA,IAAI4J,gBAAgB,EAAE;IAClB,OAAOxG,MAAM,CAACC,MAAM,CAACD,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAAE+F,aAAa,CAAC,EAAE;MAAE,CAACpJ,UAAU,GAAGoD,MAAM,CAACC,MAAM,CAACD,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAAEuG,gBAAgB,CAAC,EAAE;QAAE,CAACF,IAAI,GAAGC;MAAM,CAAC;IAAE,CAAC,CAAC;EACnJ;EACA,OAAOP,aAAa;AACxB;AACA,SAASD,uBAAuBA,CAACC,aAAa,EAAEpJ,UAAU,EAAE0J,IAAI,EAAEC,KAAK,EAAE;EACrE,IAAIC,gBAAgB,GAAGR,aAAa,CAACpJ,UAAU,CAAC;EAChD,IAAI4J,gBAAgB,EAAE;IAClB,OAAOxG,MAAM,CAACC,MAAM,CAACD,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAAE+F,aAAa,CAAC,EAAE;MAAE,CAACpJ,UAAU,GAAGoD,MAAM,CAACC,MAAM,CAACD,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAAEuG,gBAAgB,CAAC,EAAE;QAAEvI,aAAa,EAAE+B,MAAM,CAACC,MAAM,CAACD,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAAEuG,gBAAgB,CAACvI,aAAa,CAAC,EAAE;UAAE,CAACqI,IAAI,GAAGC;QAAM,CAAC;MAAE,CAAC;IAAE,CAAC,CAAC;EACxO;EACA,OAAOP,aAAa;AACxB;AAEA,SAASS,8BAA8BA,CAACC,UAAU,EAAEtC,MAAM,EAAE;EACxD,IAAI,CAACsC,UAAU,IAAI,CAACtC,MAAM,EAAE;IACxB,OAAO,CAAC,CAAC;EACb;EACA,QAAQA,MAAM,CAACI,IAAI;IACf,KAAK,8BAA8B;MAC/B,OAAOxE,MAAM,CAACC,MAAM,CAACD,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAAEyG,UAAU,CAAC,EAAE;QAAE,CAACtC,MAAM,CAACpC,EAAE,GAAGoC,MAAM,CAACuC;MAAW,CAAC,CAAC;IAC3F;MACI,OAAOD,UAAU;EACzB;AACJ;AAEA,SAASE,eAAeA,CAAC5F,KAAK,EAAEoD,MAAM,EAAEhH,OAAO,EAAE;EAC7C,IAAI+H,cAAc,GAAGhB,oBAAoB,CAACnD,KAAK,IAAIA,KAAK,CAACmE,cAAc,EAAEf,MAAM,EAAEhH,OAAO,CAAC;EACzF,IAAI+B,aAAa,GAAGoG,mBAAmB,CAACvE,KAAK,IAAIA,KAAK,CAAC7B,aAAa,EAAEiF,MAAM,EAAEe,cAAc,EAAE/H,OAAO,CAAC;EACtG,IAAIoC,wBAAwB,GAAGiH,8BAA8B,CAACzF,KAAK,IAAIA,KAAK,CAACxB,wBAAwB,EAAE4E,MAAM,CAAC;EAC9G,OAAO;IACHe,cAAc;IACdhG,aAAa;IACbK;EACJ,CAAC;AACL;AAEA,MAAMqH,cAAc,GAAG;EACnBjK,UAAU,EAAEuF,MAAM;EAClB5E,WAAW,EAAElC,QAAQ;EACrBuC,gBAAgB,EAAEmH;AACtB,CAAC;AACD,SAAS+B,+BAA+BA,CAAC9D,OAAO,EAAE;EAC9C,OAAO;IACHzF,WAAW,EAAEwJ,iBAAiB,CAAC/D,OAAO,CAACzF,WAAW,CAAC,CAC9CyJ,MAAM,CAAChE,OAAO,CAACpG,UAAU,GAAG,CAACoG,OAAO,CAACpG,UAAU,CAAC,GAAG,EAAE,CAAC;IAC3DgB,gBAAgB,EAAEoF,OAAO,CAACpF;EAC9B,CAAC;AACL;AACA,SAASmJ,iBAAiBA,CAACE,KAAK,EAAE;EAC9B,OAAO,CAACA,KAAK,IAAI,EAAE,EAAEC,GAAG,CAAEC,IAAI,IAAKhF,MAAM,CAACgF,IAAI,CAAC,CAAC;AACpD;AAEA,SAASC,0BAA0BA,CAAC5K,IAAI,EAAEC,IAAI,EAAE;EAC5C,IAAI4K,WAAW,GAAG7K,IAAI,CAACG,QAAQ,CAACC,UAAU;EAC1C,IAAI0K,WAAW,GAAG7K,IAAI,CAACE,QAAQ,CAACC,UAAU;EAC1C,IAAIyK,WAAW,IAAIC,WAAW,EAAE;IAC5B,OAAO;MAAE1K,UAAU,EAAEyK;IAAY,CAAC;EACtC;EACA,OAAO,IAAI;AACf;AAEA9L,YAAY,CAACgM,SAAS,CAAC7B,WAAW,GAAG,UAAU9C,KAAK,EAAE4E,QAAQ,GAAG,IAAI,EAAE;EACnE,IAAIC,YAAY,GAAG,IAAI,CAAC1J,cAAc,CAAC,CAAC;EACxC,IAAI4H,YAAY;EAChB,IAAIxF,QAAQ;EACZ,IAAIyC,KAAK,YAAY3G,WAAW,EAAE;IAC9BkE,QAAQ,GAAGyC,KAAK,CAAC8E,SAAS;IAC1B/B,YAAY,GAAG;MAAE,CAACxF,QAAQ,CAAC6B,EAAE,GAAG7B;IAAS,CAAC;EAC9C,CAAC,MACI;IACDwF,YAAY,GAAG,CAAC,CAAC;IACjBxF,QAAQ,GAAGpE,aAAa,CAAC6G,KAAK,EAAE,EAAE,EAAE+C,YAAY,EAAE8B,YAAY,CAAC;EACnE;EACA,IAAI,CAACrC,QAAQ,CAAC;IACVZ,IAAI,EAAE,cAAc;IACpBmB;EACJ,CAAC,CAAC;EACF,IAAI6B,QAAQ,EAAE;IACV;IACA,IAAI,CAACG,OAAO,CAAC,gBAAgB,EAAE;MAAE/K,UAAU,EAAEuD,QAAQ,CAAC6B;IAAG,CAAC,CAAC;EAC/D;EACA,IAAI4F,WAAW,GAAG,IAAI3L,WAAW,CAACwL,YAAY,EAAEtH,QAAQ,CAAC;EACzDsH,YAAY,CAACI,OAAO,CAACF,OAAO,CAAC,aAAa,EAAE;IACxCxH,QAAQ,EAAEyH,WAAW;IACrBE,MAAM,EAAEA,CAAA,KAAM;MACV,IAAI,CAAC1C,QAAQ,CAAC;QACVZ,IAAI,EAAE,iBAAiB;QACvB5H,UAAU,EAAEuD,QAAQ,CAAC6B;MACzB,CAAC,CAAC;IACN;EACJ,CAAC,CAAC;EACF,OAAO4F,WAAW;AACtB,CAAC;AACDrM,YAAY,CAACgM,SAAS,CAAC/I,eAAe,GAAG,UAAUwD,EAAE,EAAE;EACnDA,EAAE,GAAGG,MAAM,CAACH,EAAE,CAAC;EACf,IAAIyF,YAAY,GAAG,IAAI,CAAC1J,cAAc,CAAC,CAAC,CAAC,CAAC;EAC1C,IAAI0J,YAAY,CAACtI,aAAa,EAAE;IAAE;IAC9B,IAAI4I,WAAW,GAAGN,YAAY,CAACtI,aAAa,CAAC6C,EAAE,CAAC;IAChD,IAAI+F,WAAW,EAAE;MACb,OAAO,IAAI9L,WAAW,CAACwL,YAAY,EAAEM,WAAW,CAAC;IACrD;EACJ;EACA,OAAO,IAAI;AACf,CAAC;AACDxM,YAAY,CAACgM,SAAS,CAACS,YAAY,GAAG,YAAY;EAC9C,IAAIP,YAAY,GAAG,IAAI,CAAC1J,cAAc,CAAC,CAAC;EACxC,IAAI;IAAEoB;EAAc,CAAC,GAAGsI,YAAY;EACpC,IAAIQ,YAAY,GAAG,EAAE;EACrB,IAAI9I,aAAa,EAAE;IAAE;IACjB,KAAK,IAAIvC,UAAU,IAAIuC,aAAa,EAAE;MAClC8I,YAAY,CAACtK,IAAI,CAAC,IAAI1B,WAAW,CAACwL,YAAY,EAAEtI,aAAa,CAACvC,UAAU,CAAC,CAAC,CAAC;IAC/E;EACJ;EACA,OAAOqL,YAAY;AACvB,CAAC;AACD1M,YAAY,CAACgM,SAAS,CAACW,oBAAoB,GAAG,YAAY;EACtD,IAAIT,YAAY,GAAG,IAAI,CAAC1J,cAAc,CAAC,CAAC;EACxC,IAAI;IAAEoB;EAAc,CAAC,GAAGsI,YAAY;EACpC,IAAIQ,YAAY,GAAG,EAAE;EACrB,IAAI9I,aAAa,EAAE;IAAE;IACjB,KAAK,IAAIvC,UAAU,IAAIuC,aAAa,EAAE;MAClC,IAAI,CAACA,aAAa,CAACvC,UAAU,CAAC,CAACgE,QAAQ,EAAE;QACrCqH,YAAY,CAACtK,IAAI,CAAC,IAAI1B,WAAW,CAACwL,YAAY,EAAEtI,aAAa,CAACvC,UAAU,CAAC,CAAC,CAAC;MAC/E;IACJ;EACJ;EACA,OAAOqL,YAAY;AACvB,CAAC;AACD1M,YAAY,CAACgM,SAAS,CAACY,gBAAgB,GAAG,YAAY;EAClD,IAAI,CAAC/C,QAAQ,CAAC;IACVZ,IAAI,EAAE;EACV,CAAC,CAAC;AACN,CAAC;AACD,SAAS4D,kBAAkBA,CAACzL,QAAQ,EAAES,OAAO,EAAE;EAC3C,OAAOT,QAAQ,CAACC,UAAU,GACtB;IAAEuD,QAAQ,EAAE/C,OAAO,CAACkB,WAAW,CAACE,eAAe,CAAC7B,QAAQ,CAACC,UAAU;EAAE,CAAC,GACtE,CAAC,CAAC;AACV;AACA,SAASyL,iBAAiBA,CAAC1L,QAAQ,EAAES,OAAO,EAAE;EAC1C,OAAOT,QAAQ,CAACC,UAAU,GACtB;IAAEuD,QAAQ,EAAE/C,OAAO,CAACkB,WAAW,CAACE,eAAe,CAAC7B,QAAQ,CAACC,UAAU;EAAE,CAAC,GACtE,CAAC,CAAC;AACV;AAEA,SAAS0L,yBAAyBA,CAACC,aAAa,EAAEnL,OAAO,EAAE;EACvD,IAAIoL,QAAQ,GAAG,IAAIrM,gBAAgB,CAAC,CAAC;EACrC,IAAIsM,IAAI,GAAGD,QAAQ,CAACE,UAAU,CAAC1I,MAAM,CAACC,MAAM,CAACD,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAAEsI,aAAa,CAAC,EAAE;IAAEpJ,aAAa,EAAE/B,OAAO,CAACW,cAAc,CAAC,CAAC,CAACoB;EAAc,CAAC,CAAC,CAAC;EAC1I,KAAK,IAAIvC,UAAU,IAAI6L,IAAI,EAAE;IACzB,IAAI1E,KAAK,GAAG0E,IAAI,CAAC7L,UAAU,CAAC;IAC5B;IACA,IAAIA,UAAU,IAAI6L,IAAI,CAAC,EAAE,CAAC,EAAE;MAAE;MAC1B1E,KAAK,GAAG/D,MAAM,CAACC,MAAM,CAACD,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAAE8D,KAAK,CAAC,EAAE;QAAE1E,UAAU,EAAE7D,gBAAgB,CAACiN,IAAI,CAAC,EAAE,CAAC,CAACpJ,UAAU,EAAE0E,KAAK,CAAC1E,UAAU,CAAC;QAAEiC,YAAY,EAAEtB,MAAM,CAACC,MAAM,CAACD,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAAEwI,IAAI,CAAC,EAAE,CAAC,CAACnH,YAAY,CAAC,EAAEyC,KAAK,CAACzC,YAAY;MAAE,CAAC,CAAC;IACvN;IACA,IAAI,CAAC7F,YAAY,CAACsI,KAAK,EAAE3G,OAAO,EAAE;MAAER;IAAW,CAAC,EAAE+L,YAAY,CAACC,IAAI,CAAC,IAAI,EAAEhM,UAAU,CAAC,CAAC,EAAE;MACpF,OAAO,KAAK;IAChB;EACJ;EACA,OAAO,IAAI;AACf;AACA,SAAS+L,YAAYA,CAAC/L,UAAU,EAAEiM,MAAM,EAAE;EACtC,OAAO7I,MAAM,CAACC,MAAM,CAACD,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAAE4I,MAAM,CAAC,EAAE;IAAEC,WAAW,EAAEC,iBAAiB,CAACnM,UAAU,EAAEiM,MAAM,CAACC,WAAW;EAAE,CAAC,CAAC;AACvH;AACA,SAASC,iBAAiBA,CAACnM,UAAU,EAAEkM,WAAW,EAAE;EAChD,OAAOA,WAAW,CAAC5B,GAAG,CAAE8B,UAAU,IAAK;IACnC,IAAIjJ,IAAI,GAAGiJ,UAAU,CAACjJ,IAAI;IAC1B,IAAIA,IAAI,EAAE;MAAE;MACR;MACA;MACA,KAAK,IAAIW,KAAK,IAAIX,IAAI,EAAE;QACpB,IAAIxC,WAAW,GAAGwC,IAAI,CAACW,KAAK,CAAC,CAACnD,WAAW;QACzC,IAAIA,WAAW,CAACsG,MAAM,IAAItG,WAAW,CAACC,OAAO,CAACZ,UAAU,CAAC,KAAK,CAAC,CAAC,EAAE;UAAE;UAChE,OAAO,KAAK;QAChB;MACJ;IACJ;IACA,OAAOoM,UAAU;EACrB,CAAC,CAAC;AACN;AAEA,SAASC,oBAAoBA,CAACtM,QAAQ,EAAE;EACpC,OAAOA,QAAQ,CAACC,UAAU,GACtB;IAAEA,UAAU,EAAED,QAAQ,CAACC;EAAW,CAAC,GACnC,CAAC,CAAC;AACV;AAEA,MAAMsM,oBAAoB,GAAG;EACzB9G,SAAS,EAAE+G;AACf,CAAC;AACD,SAASA,eAAeA,CAACC,cAAc,EAAEhM,OAAO,EAAE;EAC9C,IAAIiM,cAAc,GAAGjM,OAAO,CAACW,cAAc,CAAC,CAAC,CAACoH,cAAc,CAAC9B,IAAI;EACjE,IAAIgG,cAAc,KAAKD,cAAc,EAAE;IACnChM,OAAO,CAACgI,QAAQ,CAAC;MACbZ,IAAI,EAAE,uBAAuB;MAC7BC,mBAAmB,EAAE2E;IACzB,CAAC,CAAC;EACN;AACJ;AAEA,MAAME,eAAe,GAAG;EACpBhF,gBAAgB,EAAEjJ,QAAQ;EAC1B+G,SAAS,EAAE/G,QAAQ;EACnB8C,qBAAqB,EAAE4G,OAAO;EAC9BR,0BAA0B,EAAEQ,OAAO;EACnCwE,aAAa,EAAE7N,eAAe;EAC9B0D,yBAAyB,EAAE2F,OAAO;EAClCyE,kBAAkB,EAAErH,MAAM;EAC1BsH,iBAAiB,EAAEpO,QAAQ;EAC3BqO,mBAAmB,EAAErO,QAAQ;EAC7BsO,0BAA0B,EAAE5E,OAAO;EACnC6E,mBAAmB,EAAE7E,OAAO;EAC5B7F,iBAAiB,EAAE6F,OAAO;EAC1B8E,4BAA4B,EAAExO,QAAQ;EACtCyO,yBAAyB,EAAEzO,QAAQ;EACnC0O,0BAA0B,EAAE1O,QAAQ;EACpC2O,6BAA6B,EAAE3O,QAAQ;EACvC4O,4BAA4B,EAAE5O,QAAQ;EACtC6O,yBAAyB,EAAE7O,QAAQ;EACnC8O,0BAA0B,EAAE9O,QAAQ;EACpC+O,6BAA6B,EAAE/O,QAAQ;EACvCgP,uBAAuB,EAAEhP,QAAQ;EACjCiP,oBAAoB,EAAEjP,QAAQ;EAC9BkP,qBAAqB,EAAElP,QAAQ;EAC/BmP,wBAAwB,EAAEnP,QAAQ;EAClCoP,sBAAsB,EAAEpP,QAAQ;EAChCqP,mBAAmB,EAAErP,QAAQ;EAC7BsP,oBAAoB,EAAEtP,QAAQ;EAC9BuP,uBAAuB,EAAEvP,QAAQ;EACjCwP,2BAA2B,EAAExP,QAAQ;EACrCyP,wBAAwB,EAAEzP,QAAQ;EAClC0P,yBAAyB,EAAE1P,QAAQ;EACnC2P,4BAA4B,EAAE3P;AAClC,CAAC;AACD,MAAM4P,iBAAiB,GAAG;EACtBC,YAAY,EAAE7P,QAAQ;EACtB8P,WAAW,EAAE9P,QAAQ;EACrB+P,cAAc,EAAE/P,QAAQ;EACxBgQ,cAAc,EAAEhQ;AACpB,CAAC;AAEDM,SAAS,CAAC4L,SAAS,CAACS,YAAY,GAAG,YAAY;EAC3C,IAAI;IAAE1J;EAAY,CAAC,GAAG,IAAI,CAACgN,QAAQ;EACnC,OAAO,IAAI,CAACC,IAAI,CAAChO,WAAW,CAAC2J,GAAG,CAAEtK,UAAU,IAAK0B,WAAW,CAACE,eAAe,CAAC5B,UAAU,CAAC,CAAC;AAC7F,CAAC;AACDjB,SAAS,CAAC4L,SAAS,CAACiE,YAAY,GAAG,UAAUpJ,SAAS,EAAE;EACpD,IAAI7E,WAAW,GAAG,EAAE;EACpB;EACA,KAAK,IAAI4C,QAAQ,IAAIiC,SAAS,EAAE;IAC5B,IAAIxF,UAAU,GAAG,IAAI;IACrB,IAAI,OAAOuD,QAAQ,KAAK,QAAQ,EAAE;MAC9BvD,UAAU,GAAGuD,QAAQ;IACzB,CAAC,MACI,IAAI,OAAOA,QAAQ,KAAK,QAAQ,EAAE;MACnCvD,UAAU,GAAGuF,MAAM,CAAChC,QAAQ,CAAC;IACjC,CAAC,MACI,IAAIA,QAAQ,YAAYlE,WAAW,EAAE;MACtCW,UAAU,GAAGuD,QAAQ,CAAC6B,EAAE,CAAC,CAAC;IAC9B,CAAC,MACI;MACDiC,OAAO,CAACC,IAAI,CAAC,yBAAyB,GAAG/D,QAAQ,CAAC;IACtD;IACA,IAAIvD,UAAU,EAAE;MACZW,WAAW,CAACI,IAAI,CAACf,UAAU,CAAC;IAChC;EACJ;EACA,IAAI,CAAC6O,MAAM,CAAC;IACRC,aAAa,EAAE;MACXnO;IACJ;EACJ,CAAC,CAAC;AACN,CAAC;AAEDsE,yBAAyB,CAAC;EACtBmD,WAAW,EAAE,IAAI;EACjBlB,SAASA,CAACd,OAAO,EAAE;IACf,IAAIF,KAAK,CAACC,OAAO,CAACC,OAAO,CAACZ,SAAS,CAAC,EAAE;MAClC,OAAOY,OAAO,CAACZ,SAAS;IAC5B;IACA,OAAO,IAAI;EACf,CAAC;EACD8C,KAAKA,CAACyG,GAAG,EAAEC,eAAe,EAAE;IACxBA,eAAe,CAAC;MACZvG,YAAY,EAAEsG,GAAG,CAACxG,cAAc,CAAC5B;IACrC,CAAC,CAAC;EACN;AACJ,CAAC,CAAC;AAEF1B,yBAAyB,CAAC;EACtBiC,SAASA,CAACd,OAAO,EAAE;IACf,IAAI,OAAOA,OAAO,CAACZ,SAAS,KAAK,UAAU,EAAE;MACzC,OAAOY,OAAO,CAACZ,SAAS;IAC5B;IACA,OAAO,IAAI;EACf,CAAC;EACD8C,KAAKA,CAACyG,GAAG,EAAEC,eAAe,EAAEC,aAAa,EAAE;IACvC,MAAMC,OAAO,GAAGH,GAAG,CAACvO,OAAO,CAAC0O,OAAO;IACnC,MAAMC,IAAI,GAAGJ,GAAG,CAACxG,cAAc,CAAC5B,IAAI;IACpC,MAAMyI,SAAS,GAAGL,GAAG,CAACrL,KAAK,GAAG;MAC1B2L,KAAK,EAAEH,OAAO,CAACI,MAAM,CAACP,GAAG,CAACrL,KAAK,CAAC2L,KAAK,CAAC;MACtCE,GAAG,EAAEL,OAAO,CAACI,MAAM,CAACP,GAAG,CAACrL,KAAK,CAAC6L,GAAG,CAAC;MAClCC,QAAQ,EAAEN,OAAO,CAACO,SAAS,CAACV,GAAG,CAACrL,KAAK,CAAC2L,KAAK,CAAC;MAC5CK,MAAM,EAAER,OAAO,CAACO,SAAS,CAACV,GAAG,CAACrL,KAAK,CAAC6L,GAAG,CAAC;MACxCI,QAAQ,EAAET,OAAO,CAACS;IACtB,CAAC,GAAG,CAAC,CAAC;IACN3Q,WAAW,CAACmQ,IAAI,CAACnD,IAAI,CAAC,IAAI,EAAEoD,SAAS,CAAC,EAAG3G,YAAY,IAAKuG,eAAe,CAAC;MAAEvG;IAAa,CAAC,CAAC,EAAEwG,aAAa,CAAC;EAC/G;AACJ,CAAC,CAAC;AAEFhK,yBAAyB,CAAC;EACtBiC,SAASA,CAACd,OAAO,EAAE;IACf,IAAIA,OAAO,CAACX,GAAG,EAAE;MACb,OAAO;QACHA,GAAG,EAAEW,OAAO,CAACX,GAAG;QAChBC,MAAM,EAAE,CAACU,OAAO,CAACV,MAAM,IAAI,KAAK,EAAEkK,WAAW,CAAC,CAAC;QAC/C9J,WAAW,EAAEM,OAAO,CAACN;MACzB,CAAC;IACL;IACA,OAAO,IAAI;EACf,CAAC;EACDwC,KAAKA,CAACyG,GAAG,EAAEC,eAAe,EAAEC,aAAa,EAAE;IACvC,MAAMtI,IAAI,GAAGoI,GAAG,CAACxG,cAAc,CAAC5B,IAAI;IACpC,MAAMkJ,aAAa,GAAGC,kBAAkB,CAACnJ,IAAI,EAAEoI,GAAG,CAACrL,KAAK,EAAEqL,GAAG,CAACvO,OAAO,CAAC;IACtEvB,WAAW,CAAC0H,IAAI,CAACjB,MAAM,EAAEiB,IAAI,CAAClB,GAAG,EAAEoK,aAAa,CAAC,CAACE,IAAI,CAAC,CAAC,CAACtH,YAAY,EAAEuH,QAAQ,CAAC,KAAK;MACjFhB,eAAe,CAAC;QAAEvG,YAAY;QAAEuH;MAAS,CAAC,CAAC;IAC/C,CAAC,EAAEf,aAAa,CAAC;EACrB;AACJ,CAAC,CAAC;AACF;AACA,SAASa,kBAAkBA,CAACnJ,IAAI,EAAEjD,KAAK,EAAElD,OAAO,EAAE;EAC9C,IAAI;IAAE0O,OAAO;IAAE5N;EAAQ,CAAC,GAAGd,OAAO;EAClC,IAAImF,UAAU;EACd,IAAIC,QAAQ;EACZ,IAAIC,aAAa;EACjB,IAAIoK,mBAAmB;EACvB,IAAIC,MAAM,GAAG,CAAC,CAAC;EACf,IAAIxM,KAAK,EAAE;IACPiC,UAAU,GAAGgB,IAAI,CAAChB,UAAU;IAC5B,IAAIA,UAAU,IAAI,IAAI,EAAE;MACpBA,UAAU,GAAGrE,OAAO,CAACqE,UAAU;IACnC;IACAC,QAAQ,GAAGe,IAAI,CAACf,QAAQ;IACxB,IAAIA,QAAQ,IAAI,IAAI,EAAE;MAClBA,QAAQ,GAAGtE,OAAO,CAACsE,QAAQ;IAC/B;IACAC,aAAa,GAAGc,IAAI,CAACd,aAAa;IAClC,IAAIA,aAAa,IAAI,IAAI,EAAE;MACvBA,aAAa,GAAGvE,OAAO,CAACuE,aAAa;IACzC;IACAqK,MAAM,CAACvK,UAAU,CAAC,GAAGuJ,OAAO,CAACO,SAAS,CAAC/L,KAAK,CAAC2L,KAAK,CAAC;IACnDa,MAAM,CAACtK,QAAQ,CAAC,GAAGsJ,OAAO,CAACO,SAAS,CAAC/L,KAAK,CAAC6L,GAAG,CAAC;IAC/C,IAAIL,OAAO,CAACS,QAAQ,KAAK,OAAO,EAAE;MAC9BO,MAAM,CAACrK,aAAa,CAAC,GAAGqJ,OAAO,CAACS,QAAQ;IAC5C;EACJ;EACA;EACA,IAAI,OAAOhJ,IAAI,CAACb,WAAW,KAAK,UAAU,EAAE;IACxC;IACAmK,mBAAmB,GAAGtJ,IAAI,CAACb,WAAW,CAAC,CAAC;EAC5C,CAAC,MACI;IACD;IACAmK,mBAAmB,GAAGtJ,IAAI,CAACb,WAAW,IAAI,CAAC,CAAC;EAChD;EACA1C,MAAM,CAACC,MAAM,CAAC6M,MAAM,EAAED,mBAAmB,CAAC;EAC1C,OAAOC,MAAM;AACjB;AAEA,IAAIxP,KAAK,GAAG3C,YAAY,CAAC;EACrB2L,IAAI,EAAE,wBAAwB;EAC9ByG,kBAAkB,EAAE,YAAY;EAChCC,IAAI,EAAE,CAACpS,mBAAmB,CAAC;EAC3BqS,QAAQ,EAAE,CAACrG,eAAe,CAAC;EAC3BsG,cAAc,EAAE,CACXlM,KAAK,IAAKA,KAAK,CAACmE,cAAc,IAAInE,KAAK,CAACmE,cAAc,CAAC1B,UAAU,CACrE;EACD0J,aAAa,EAAEtG,cAAc;EAC7BuG,oBAAoB,EAAE,CAACtG,+BAA+B,CAAC;EACvDuG,uBAAuB,EAAE,CAACxM,oBAAoB,CAAC;EAC/CyM,0BAA0B,EAAE,CAAChR,wBAAwB,CAAC;EACtDiR,wBAAwB,EAAE,CAACtQ,qBAAqB,CAAC;EACjDuQ,yBAAyB,EAAE,CAACpG,0BAA0B,CAAC;EACvDqG,mBAAmB,EAAE,CAACrF,kBAAkB,CAAC;EACzCsF,kBAAkB,EAAE,CAACrF,iBAAiB,CAAC;EACvCsF,qBAAqB,EAAE,CAACjP,iBAAiB,EAAEyC,wBAAwB,CAAC;EACpE1F,YAAY,EAAE6M,yBAAyB;EACvCsF,qBAAqB,EAAE,CAAC3E,oBAAoB,CAAC;EAC7C4E,qBAAqB,EAAE,CAACxP,kBAAkB,CAAC;EAC3C6K,oBAAoB;EACpB4E,cAAc,EAAExE,eAAe;EAC/ByE,gBAAgB,EAAE9C,iBAAiB;EACnC+C,eAAe,EAAE;IAAE7O,aAAa,EAAE9C;EAAoB;AAC1D,CAAC,CAAC;AAEF,SAASiB,KAAK,IAAI2Q,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}