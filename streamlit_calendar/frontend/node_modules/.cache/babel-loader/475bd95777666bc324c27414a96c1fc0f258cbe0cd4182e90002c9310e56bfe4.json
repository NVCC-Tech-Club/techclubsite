{"ast":null,"code":"import { padStart } from './helpers';\nexport var datetime = function (y, m, d, h, i, s) {\n  if (h === void 0) {\n    h = 0;\n  }\n  if (i === void 0) {\n    i = 0;\n  }\n  if (s === void 0) {\n    s = 0;\n  }\n  return new Date(Date.UTC(y, m - 1, d, h, i, s));\n};\n/**\n * General date-related utilities.\n * Also handles several incompatibilities between JavaScript and Python\n *\n */\nexport var MONTH_DAYS = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\n/**\n * Number of milliseconds of one day\n */\nexport var ONE_DAY = 1000 * 60 * 60 * 24;\n/**\n * @see: <http://docs.python.org/library/datetime.html#datetime.MAXYEAR>\n */\nexport var MAXYEAR = 9999;\n/**\n * Python uses 1-Jan-1 as the base for calculating ordinals but we don't\n * want to confuse the JS engine with milliseconds > Number.MAX_NUMBER,\n * therefore we use 1-Jan-1970 instead\n */\nexport var ORDINAL_BASE = datetime(1970, 1, 1);\n/**\n * Python: MO-SU: 0 - 6\n * JS: SU-SAT 0 - 6\n */\nexport var PY_WEEKDAYS = [6, 0, 1, 2, 3, 4, 5];\n/**\n * py_date.timetuple()[7]\n */\nexport var getYearDay = function (date) {\n  var dateNoTime = new Date(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate());\n  return Math.ceil((dateNoTime.valueOf() - new Date(date.getUTCFullYear(), 0, 1).valueOf()) / ONE_DAY) + 1;\n};\nexport var isLeapYear = function (year) {\n  return year % 4 === 0 && year % 100 !== 0 || year % 400 === 0;\n};\nexport var isDate = function (value) {\n  return value instanceof Date;\n};\nexport var isValidDate = function (value) {\n  return isDate(value) && !isNaN(value.getTime());\n};\n/**\n * @return {Number} the date's timezone offset in ms\n */\nexport var tzOffset = function (date) {\n  return date.getTimezoneOffset() * 60 * 1000;\n};\n/**\n * @see: <http://www.mcfedries.com/JavaScript/DaysBetween.asp>\n */\nexport var daysBetween = function (date1, date2) {\n  // The number of milliseconds in one day\n  // Convert both dates to milliseconds\n  var date1ms = date1.getTime();\n  var date2ms = date2.getTime();\n  // Calculate the difference in milliseconds\n  var differencems = date1ms - date2ms;\n  // Convert back to days and return\n  return Math.round(differencems / ONE_DAY);\n};\n/**\n * @see: <http://docs.python.org/library/datetime.html#datetime.date.toordinal>\n */\nexport var toOrdinal = function (date) {\n  return daysBetween(date, ORDINAL_BASE);\n};\n/**\n * @see - <http://docs.python.org/library/datetime.html#datetime.date.fromordinal>\n */\nexport var fromOrdinal = function (ordinal) {\n  return new Date(ORDINAL_BASE.getTime() + ordinal * ONE_DAY);\n};\nexport var getMonthDays = function (date) {\n  var month = date.getUTCMonth();\n  return month === 1 && isLeapYear(date.getUTCFullYear()) ? 29 : MONTH_DAYS[month];\n};\n/**\n * @return {Number} python-like weekday\n */\nexport var getWeekday = function (date) {\n  return PY_WEEKDAYS[date.getUTCDay()];\n};\n/**\n * @see: <http://docs.python.org/library/calendar.html#calendar.monthrange>\n */\nexport var monthRange = function (year, month) {\n  var date = datetime(year, month + 1, 1);\n  return [getWeekday(date), getMonthDays(date)];\n};\n/**\n * @see: <http://docs.python.org/library/datetime.html#datetime.datetime.combine>\n */\nexport var combine = function (date, time) {\n  time = time || date;\n  return new Date(Date.UTC(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate(), time.getHours(), time.getMinutes(), time.getSeconds(), time.getMilliseconds()));\n};\nexport var clone = function (date) {\n  var dolly = new Date(date.getTime());\n  return dolly;\n};\nexport var cloneDates = function (dates) {\n  var clones = [];\n  for (var i = 0; i < dates.length; i++) {\n    clones.push(clone(dates[i]));\n  }\n  return clones;\n};\n/**\n * Sorts an array of Date or Time objects\n */\nexport var sort = function (dates) {\n  dates.sort(function (a, b) {\n    return a.getTime() - b.getTime();\n  });\n};\nexport var timeToUntilString = function (time, utc) {\n  if (utc === void 0) {\n    utc = true;\n  }\n  var date = new Date(time);\n  return [padStart(date.getUTCFullYear().toString(), 4, '0'), padStart(date.getUTCMonth() + 1, 2, '0'), padStart(date.getUTCDate(), 2, '0'), 'T', padStart(date.getUTCHours(), 2, '0'), padStart(date.getUTCMinutes(), 2, '0'), padStart(date.getUTCSeconds(), 2, '0'), utc ? 'Z' : ''].join('');\n};\nexport var untilStringToDate = function (until) {\n  var re = /^(\\d{4})(\\d{2})(\\d{2})(T(\\d{2})(\\d{2})(\\d{2})Z?)?$/;\n  var bits = re.exec(until);\n  if (!bits) throw new Error(\"Invalid UNTIL value: \".concat(until));\n  return new Date(Date.UTC(parseInt(bits[1], 10), parseInt(bits[2], 10) - 1, parseInt(bits[3], 10), parseInt(bits[5], 10) || 0, parseInt(bits[6], 10) || 0, parseInt(bits[7], 10) || 0));\n};\nvar dateTZtoISO8601 = function (date, timeZone) {\n  // date format for sv-SE is almost ISO8601\n  var dateStr = date.toLocaleString('sv-SE', {\n    timeZone: timeZone\n  });\n  // '2023-02-07 10:41:36'\n  return dateStr.replace(' ', 'T') + 'Z';\n};\nexport var dateInTimeZone = function (date, timeZone) {\n  var localTimeZone = Intl.DateTimeFormat().resolvedOptions().timeZone;\n  // Date constructor can only reliably parse dates in ISO8601 format\n  var dateInLocalTZ = new Date(dateTZtoISO8601(date, localTimeZone));\n  var dateInTargetTZ = new Date(dateTZtoISO8601(date, timeZone !== null && timeZone !== void 0 ? timeZone : 'UTC'));\n  var tzOffset = dateInTargetTZ.getTime() - dateInLocalTZ.getTime();\n  return new Date(date.getTime() - tzOffset);\n};","map":{"version":3,"names":["padStart","datetime","y","m","d","h","i","s","Date","UTC","MONTH_DAYS","ONE_DAY","MAXYEAR","ORDINAL_BASE","PY_WEEKDAYS","getYearDay","date","dateNoTime","getUTCFullYear","getUTCMonth","getUTCDate","Math","ceil","valueOf","isLeapYear","year","isDate","value","isValidDate","isNaN","getTime","tzOffset","getTimezoneOffset","daysBetween","date1","date2","date1ms","date2ms","differencems","round","toOrdinal","fromOrdinal","ordinal","getMonthDays","month","getWeekday","getUTCDay","monthRange","combine","time","getHours","getMinutes","getSeconds","getMilliseconds","clone","dolly","cloneDates","dates","clones","length","push","sort","a","b","timeToUntilString","utc","toString","getUTCHours","getUTCMinutes","getUTCSeconds","join","untilStringToDate","until","re","bits","exec","Error","concat","parseInt","dateTZtoISO8601","timeZone","dateStr","toLocaleString","replace","dateInTimeZone","localTimeZone","Intl","DateTimeFormat","resolvedOptions","dateInLocalTZ","dateInTargetTZ"],"sources":["../../src/dateutil.ts"],"sourcesContent":[null],"mappings":"AAAA,SAASA,QAAQ,QAAQ,WAAW;AAKpC,OAAO,IAAMC,QAAQ,GAAG,SAAAA,CACtBC,CAAS,EACTC,CAAS,EACTC,CAAS,EACTC,CAAK,EACLC,CAAK,EACLC,CAAK;EAFL,IAAAF,CAAA;IAAAA,CAAA,IAAK;EAAA;EACL,IAAAC,CAAA;IAAAA,CAAA,IAAK;EAAA;EACL,IAAAC,CAAA;IAAAA,CAAA,IAAK;EAAA;EAEL,OAAO,IAAIC,IAAI,CAACA,IAAI,CAACC,GAAG,CAACP,CAAC,EAAEC,CAAC,GAAG,CAAC,EAAEC,CAAC,EAAEC,CAAC,EAAEC,CAAC,EAAEC,CAAC,CAAC,CAAC;AACjD,CAAC;AAED;;;;;AAKA,OAAO,IAAMG,UAAU,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC;AAE1E;;;AAGA,OAAO,IAAMC,OAAO,GAAG,IAAI,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE;AAE1C;;;AAGA,OAAO,IAAMC,OAAO,GAAG,IAAI;AAE3B;;;;;AAKA,OAAO,IAAMC,YAAY,GAAGZ,QAAQ,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;AAEhD;;;;AAIA,OAAO,IAAMa,WAAW,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;AAEhD;;;AAGA,OAAO,IAAMC,UAAU,GAAG,SAAAA,CAAUC,IAAU;EAC5C,IAAMC,UAAU,GAAG,IAAIT,IAAI,CACzBQ,IAAI,CAACE,cAAc,EAAE,EACrBF,IAAI,CAACG,WAAW,EAAE,EAClBH,IAAI,CAACI,UAAU,EAAE,CAClB;EACD,OACEC,IAAI,CAACC,IAAI,CACP,CAACL,UAAU,CAACM,OAAO,EAAE,GAAG,IAAIf,IAAI,CAACQ,IAAI,CAACE,cAAc,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,CAACK,OAAO,EAAE,IACrEZ,OAAO,CACV,GAAG,CAAC;AAET,CAAC;AAED,OAAO,IAAMa,UAAU,GAAG,SAAAA,CAAUC,IAAY;EAC9C,OAAQA,IAAI,GAAG,CAAC,KAAK,CAAC,IAAIA,IAAI,GAAG,GAAG,KAAK,CAAC,IAAKA,IAAI,GAAG,GAAG,KAAK,CAAC;AACjE,CAAC;AAED,OAAO,IAAMC,MAAM,GAAG,SAAAA,CAAUC,KAAc;EAC5C,OAAOA,KAAK,YAAYnB,IAAI;AAC9B,CAAC;AAED,OAAO,IAAMoB,WAAW,GAAG,SAAAA,CAAUD,KAAc;EACjD,OAAOD,MAAM,CAACC,KAAK,CAAC,IAAI,CAACE,KAAK,CAACF,KAAK,CAACG,OAAO,EAAE,CAAC;AACjD,CAAC;AAED;;;AAGA,OAAO,IAAMC,QAAQ,GAAG,SAAAA,CAAUf,IAAU;EAC1C,OAAOA,IAAI,CAACgB,iBAAiB,EAAE,GAAG,EAAE,GAAG,IAAI;AAC7C,CAAC;AAED;;;AAGA,OAAO,IAAMC,WAAW,GAAG,SAAAA,CAAUC,KAAW,EAAEC,KAAW;EAC3D;EACA;EACA,IAAMC,OAAO,GAAGF,KAAK,CAACJ,OAAO,EAAE;EAC/B,IAAMO,OAAO,GAAGF,KAAK,CAACL,OAAO,EAAE;EAE/B;EACA,IAAMQ,YAAY,GAAGF,OAAO,GAAGC,OAAO;EAEtC;EACA,OAAOhB,IAAI,CAACkB,KAAK,CAACD,YAAY,GAAG3B,OAAO,CAAC;AAC3C,CAAC;AAED;;;AAGA,OAAO,IAAM6B,SAAS,GAAG,SAAAA,CAAUxB,IAAU;EAC3C,OAAOiB,WAAW,CAACjB,IAAI,EAAEH,YAAY,CAAC;AACxC,CAAC;AAED;;;AAGA,OAAO,IAAM4B,WAAW,GAAG,SAAAA,CAAUC,OAAe;EAClD,OAAO,IAAIlC,IAAI,CAACK,YAAY,CAACiB,OAAO,EAAE,GAAGY,OAAO,GAAG/B,OAAO,CAAC;AAC7D,CAAC;AAED,OAAO,IAAMgC,YAAY,GAAG,SAAAA,CAAU3B,IAAU;EAC9C,IAAM4B,KAAK,GAAG5B,IAAI,CAACG,WAAW,EAAE;EAChC,OAAOyB,KAAK,KAAK,CAAC,IAAIpB,UAAU,CAACR,IAAI,CAACE,cAAc,EAAE,CAAC,GACnD,EAAE,GACFR,UAAU,CAACkC,KAAK,CAAC;AACvB,CAAC;AAED;;;AAGA,OAAO,IAAMC,UAAU,GAAG,SAAAA,CAAU7B,IAAU;EAC5C,OAAOF,WAAW,CAACE,IAAI,CAAC8B,SAAS,EAAE,CAAC;AACtC,CAAC;AAED;;;AAGA,OAAO,IAAMC,UAAU,GAAG,SAAAA,CAAUtB,IAAY,EAAEmB,KAAa;EAC7D,IAAM5B,IAAI,GAAGf,QAAQ,CAACwB,IAAI,EAAEmB,KAAK,GAAG,CAAC,EAAE,CAAC,CAAC;EACzC,OAAO,CAACC,UAAU,CAAC7B,IAAI,CAAC,EAAE2B,YAAY,CAAC3B,IAAI,CAAC,CAAC;AAC/C,CAAC;AAED;;;AAGA,OAAO,IAAMgC,OAAO,GAAG,SAAAA,CAAUhC,IAAU,EAAEiC,IAAiB;EAC5DA,IAAI,GAAGA,IAAI,IAAIjC,IAAI;EACnB,OAAO,IAAIR,IAAI,CACbA,IAAI,CAACC,GAAG,CACNO,IAAI,CAACE,cAAc,EAAE,EACrBF,IAAI,CAACG,WAAW,EAAE,EAClBH,IAAI,CAACI,UAAU,EAAE,EACjB6B,IAAI,CAACC,QAAQ,EAAE,EACfD,IAAI,CAACE,UAAU,EAAE,EACjBF,IAAI,CAACG,UAAU,EAAE,EACjBH,IAAI,CAACI,eAAe,EAAE,CACvB,CACF;AACH,CAAC;AAED,OAAO,IAAMC,KAAK,GAAG,SAAAA,CAAUtC,IAAiB;EAC9C,IAAMuC,KAAK,GAAG,IAAI/C,IAAI,CAACQ,IAAI,CAACc,OAAO,EAAE,CAAC;EACtC,OAAOyB,KAAK;AACd,CAAC;AAED,OAAO,IAAMC,UAAU,GAAG,SAAAA,CAAUC,KAAsB;EACxD,IAAMC,MAAM,GAAG,EAAE;EACjB,KAAK,IAAIpD,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGmD,KAAK,CAACE,MAAM,EAAErD,CAAC,EAAE,EAAE;IACrCoD,MAAM,CAACE,IAAI,CAACN,KAAK,CAACG,KAAK,CAACnD,CAAC,CAAC,CAAC,CAAC;;EAE9B,OAAOoD,MAAM;AACf,CAAC;AAED;;;AAGA,OAAO,IAAMG,IAAI,GAAG,SAAAA,CAA8BJ,KAAU;EAC1DA,KAAK,CAACI,IAAI,CAAC,UAAUC,CAAC,EAAEC,CAAC;IACvB,OAAOD,CAAC,CAAChC,OAAO,EAAE,GAAGiC,CAAC,CAACjC,OAAO,EAAE;EAClC,CAAC,CAAC;AACJ,CAAC;AAED,OAAO,IAAMkC,iBAAiB,GAAG,SAAAA,CAAUf,IAAY,EAAEgB,GAAU;EAAV,IAAAA,GAAA;IAAAA,GAAA,OAAU;EAAA;EACjE,IAAMjD,IAAI,GAAG,IAAIR,IAAI,CAACyC,IAAI,CAAC;EAC3B,OAAO,CACLjD,QAAQ,CAACgB,IAAI,CAACE,cAAc,EAAE,CAACgD,QAAQ,EAAE,EAAE,CAAC,EAAE,GAAG,CAAC,EAClDlE,QAAQ,CAACgB,IAAI,CAACG,WAAW,EAAE,GAAG,CAAC,EAAE,CAAC,EAAE,GAAG,CAAC,EACxCnB,QAAQ,CAACgB,IAAI,CAACI,UAAU,EAAE,EAAE,CAAC,EAAE,GAAG,CAAC,EACnC,GAAG,EACHpB,QAAQ,CAACgB,IAAI,CAACmD,WAAW,EAAE,EAAE,CAAC,EAAE,GAAG,CAAC,EACpCnE,QAAQ,CAACgB,IAAI,CAACoD,aAAa,EAAE,EAAE,CAAC,EAAE,GAAG,CAAC,EACtCpE,QAAQ,CAACgB,IAAI,CAACqD,aAAa,EAAE,EAAE,CAAC,EAAE,GAAG,CAAC,EACtCJ,GAAG,GAAG,GAAG,GAAG,EAAE,CACf,CAACK,IAAI,CAAC,EAAE,CAAC;AACZ,CAAC;AAED,OAAO,IAAMC,iBAAiB,GAAG,SAAAA,CAAUC,KAAa;EACtD,IAAMC,EAAE,GAAG,oDAAoD;EAC/D,IAAMC,IAAI,GAAGD,EAAE,CAACE,IAAI,CAACH,KAAK,CAAC;EAE3B,IAAI,CAACE,IAAI,EAAE,MAAM,IAAIE,KAAK,CAAC,wBAAAC,MAAA,CAAwBL,KAAK,CAAE,CAAC;EAE3D,OAAO,IAAIhE,IAAI,CACbA,IAAI,CAACC,GAAG,CACNqE,QAAQ,CAACJ,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,EACrBI,QAAQ,CAACJ,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,GAAG,CAAC,EACzBI,QAAQ,CAACJ,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,EACrBI,QAAQ,CAACJ,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,IAAI,CAAC,EAC1BI,QAAQ,CAACJ,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,IAAI,CAAC,EAC1BI,QAAQ,CAACJ,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,IAAI,CAAC,CAC3B,CACF;AACH,CAAC;AAED,IAAMK,eAAe,GAAG,SAAAA,CAAU/D,IAAU,EAAEgE,QAAgB;EAC5D;EACA,IAAMC,OAAO,GAAGjE,IAAI,CAACkE,cAAc,CAAC,OAAO,EAAE;IAAEF,QAAQ,EAAAA;EAAA,CAAE,CAAC;EAC1D;EACA,OAAOC,OAAO,CAACE,OAAO,CAAC,GAAG,EAAE,GAAG,CAAC,GAAG,GAAG;AACxC,CAAC;AAED,OAAO,IAAMC,cAAc,GAAG,SAAAA,CAAUpE,IAAU,EAAEgE,QAAgB;EAClE,IAAMK,aAAa,GAAGC,IAAI,CAACC,cAAc,EAAE,CAACC,eAAe,EAAE,CAACR,QAAQ;EACtE;EACA,IAAMS,aAAa,GAAG,IAAIjF,IAAI,CAACuE,eAAe,CAAC/D,IAAI,EAAEqE,aAAa,CAAC,CAAC;EACpE,IAAMK,cAAc,GAAG,IAAIlF,IAAI,CAACuE,eAAe,CAAC/D,IAAI,EAAEgE,QAAQ,aAARA,QAAQ,cAARA,QAAQ,GAAI,KAAK,CAAC,CAAC;EACzE,IAAMjD,QAAQ,GAAG2D,cAAc,CAAC5D,OAAO,EAAE,GAAG2D,aAAa,CAAC3D,OAAO,EAAE;EAEnE,OAAO,IAAItB,IAAI,CAACQ,IAAI,CAACc,OAAO,EAAE,GAAGC,QAAQ,CAAC;AAC5C,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}