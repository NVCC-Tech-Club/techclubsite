{"ast":null,"code":"import { isValidDate } from './dateutil';\nimport IterResult from './iterresult';\nimport CallbackIterResult from './callbackiterresult';\nimport { fromText, parseText, toText, isFullyConvertible } from './nlp/index';\nimport { Frequency } from './types';\nimport { parseOptions, initializeOptions } from './parseoptions';\nimport { parseString } from './parsestring';\nimport { optionsToString } from './optionstostring';\nimport { Cache } from './cache';\nimport { Weekday } from './weekday';\nimport { iter } from './iter/index';\n// =============================================================================\n// RRule\n// =============================================================================\nexport var Days = {\n  MO: new Weekday(0),\n  TU: new Weekday(1),\n  WE: new Weekday(2),\n  TH: new Weekday(3),\n  FR: new Weekday(4),\n  SA: new Weekday(5),\n  SU: new Weekday(6)\n};\nexport var DEFAULT_OPTIONS = {\n  freq: Frequency.YEARLY,\n  dtstart: null,\n  interval: 1,\n  wkst: Days.MO,\n  count: null,\n  until: null,\n  tzid: null,\n  bysetpos: null,\n  bymonth: null,\n  bymonthday: null,\n  bynmonthday: null,\n  byyearday: null,\n  byweekno: null,\n  byweekday: null,\n  bynweekday: null,\n  byhour: null,\n  byminute: null,\n  bysecond: null,\n  byeaster: null\n};\nexport var defaultKeys = Object.keys(DEFAULT_OPTIONS);\n/**\n *\n * @param {Options?} options - see <http://labix.org/python-dateutil/#head-cf004ee9a75592797e076752b2a889c10f445418>\n * - The only required option is `freq`, one of RRule.YEARLY, RRule.MONTHLY, ...\n * @constructor\n */\nvar RRule = /** @class */function () {\n  function RRule(options, noCache) {\n    if (options === void 0) {\n      options = {};\n    }\n    if (noCache === void 0) {\n      noCache = false;\n    }\n    // RFC string\n    this._cache = noCache ? null : new Cache();\n    // used by toString()\n    this.origOptions = initializeOptions(options);\n    var parsedOptions = parseOptions(options).parsedOptions;\n    this.options = parsedOptions;\n  }\n  RRule.parseText = function (text, language) {\n    return parseText(text, language);\n  };\n  RRule.fromText = function (text, language) {\n    return fromText(text, language);\n  };\n  RRule.fromString = function (str) {\n    return new RRule(RRule.parseString(str) || undefined);\n  };\n  RRule.prototype._iter = function (iterResult) {\n    return iter(iterResult, this.options);\n  };\n  RRule.prototype._cacheGet = function (what, args) {\n    if (!this._cache) return false;\n    return this._cache._cacheGet(what, args);\n  };\n  RRule.prototype._cacheAdd = function (what, value, args) {\n    if (!this._cache) return;\n    return this._cache._cacheAdd(what, value, args);\n  };\n  /**\n   * @param {Function} iterator - optional function that will be called\n   * on each date that is added. It can return false\n   * to stop the iteration.\n   * @return Array containing all recurrences.\n   */\n  RRule.prototype.all = function (iterator) {\n    if (iterator) {\n      return this._iter(new CallbackIterResult('all', {}, iterator));\n    }\n    var result = this._cacheGet('all');\n    if (result === false) {\n      result = this._iter(new IterResult('all', {}));\n      this._cacheAdd('all', result);\n    }\n    return result;\n  };\n  /**\n   * Returns all the occurrences of the rrule between after and before.\n   * The inc keyword defines what happens if after and/or before are\n   * themselves occurrences. With inc == True, they will be included in the\n   * list, if they are found in the recurrence set.\n   *\n   * @return Array\n   */\n  RRule.prototype.between = function (after, before, inc, iterator) {\n    if (inc === void 0) {\n      inc = false;\n    }\n    if (!isValidDate(after) || !isValidDate(before)) {\n      throw new Error('Invalid date passed in to RRule.between');\n    }\n    var args = {\n      before: before,\n      after: after,\n      inc: inc\n    };\n    if (iterator) {\n      return this._iter(new CallbackIterResult('between', args, iterator));\n    }\n    var result = this._cacheGet('between', args);\n    if (result === false) {\n      result = this._iter(new IterResult('between', args));\n      this._cacheAdd('between', result, args);\n    }\n    return result;\n  };\n  /**\n   * Returns the last recurrence before the given datetime instance.\n   * The inc keyword defines what happens if dt is an occurrence.\n   * With inc == True, if dt itself is an occurrence, it will be returned.\n   *\n   * @return Date or null\n   */\n  RRule.prototype.before = function (dt, inc) {\n    if (inc === void 0) {\n      inc = false;\n    }\n    if (!isValidDate(dt)) {\n      throw new Error('Invalid date passed in to RRule.before');\n    }\n    var args = {\n      dt: dt,\n      inc: inc\n    };\n    var result = this._cacheGet('before', args);\n    if (result === false) {\n      result = this._iter(new IterResult('before', args));\n      this._cacheAdd('before', result, args);\n    }\n    return result;\n  };\n  /**\n   * Returns the first recurrence after the given datetime instance.\n   * The inc keyword defines what happens if dt is an occurrence.\n   * With inc == True, if dt itself is an occurrence, it will be returned.\n   *\n   * @return Date or null\n   */\n  RRule.prototype.after = function (dt, inc) {\n    if (inc === void 0) {\n      inc = false;\n    }\n    if (!isValidDate(dt)) {\n      throw new Error('Invalid date passed in to RRule.after');\n    }\n    var args = {\n      dt: dt,\n      inc: inc\n    };\n    var result = this._cacheGet('after', args);\n    if (result === false) {\n      result = this._iter(new IterResult('after', args));\n      this._cacheAdd('after', result, args);\n    }\n    return result;\n  };\n  /**\n   * Returns the number of recurrences in this set. It will have go trough\n   * the whole recurrence, if this hasn't been done before.\n   */\n  RRule.prototype.count = function () {\n    return this.all().length;\n  };\n  /**\n   * Converts the rrule into its string representation\n   *\n   * @see <http://www.ietf.org/rfc/rfc2445.txt>\n   * @return String\n   */\n  RRule.prototype.toString = function () {\n    return optionsToString(this.origOptions);\n  };\n  /**\n   * Will convert all rules described in nlp:ToText\n   * to text.\n   */\n  RRule.prototype.toText = function (gettext, language, dateFormatter) {\n    return toText(this, gettext, language, dateFormatter);\n  };\n  RRule.prototype.isFullyConvertibleToText = function () {\n    return isFullyConvertible(this);\n  };\n  /**\n   * @return a RRule instance with the same freq and options\n   * as this one (cache is not cloned)\n   */\n  RRule.prototype.clone = function () {\n    return new RRule(this.origOptions);\n  };\n  // RRule class 'constants'\n  RRule.FREQUENCIES = ['YEARLY', 'MONTHLY', 'WEEKLY', 'DAILY', 'HOURLY', 'MINUTELY', 'SECONDLY'];\n  RRule.YEARLY = Frequency.YEARLY;\n  RRule.MONTHLY = Frequency.MONTHLY;\n  RRule.WEEKLY = Frequency.WEEKLY;\n  RRule.DAILY = Frequency.DAILY;\n  RRule.HOURLY = Frequency.HOURLY;\n  RRule.MINUTELY = Frequency.MINUTELY;\n  RRule.SECONDLY = Frequency.SECONDLY;\n  RRule.MO = Days.MO;\n  RRule.TU = Days.TU;\n  RRule.WE = Days.WE;\n  RRule.TH = Days.TH;\n  RRule.FR = Days.FR;\n  RRule.SA = Days.SA;\n  RRule.SU = Days.SU;\n  RRule.parseString = parseString;\n  RRule.optionsToString = optionsToString;\n  return RRule;\n}();\nexport { RRule };","map":{"version":3,"names":["isValidDate","IterResult","CallbackIterResult","fromText","parseText","toText","isFullyConvertible","Frequency","parseOptions","initializeOptions","parseString","optionsToString","Cache","Weekday","iter","Days","MO","TU","WE","TH","FR","SA","SU","DEFAULT_OPTIONS","freq","YEARLY","dtstart","interval","wkst","count","until","tzid","bysetpos","bymonth","bymonthday","bynmonthday","byyearday","byweekno","byweekday","bynweekday","byhour","byminute","bysecond","byeaster","defaultKeys","Object","keys","RRule","options","noCache","_cache","origOptions","parsedOptions","text","language","fromString","str","undefined","prototype","_iter","iterResult","_cacheGet","what","args","_cacheAdd","value","all","iterator","result","between","after","before","inc","Error","dt","length","toString","gettext","dateFormatter","isFullyConvertibleToText","clone","FREQUENCIES","MONTHLY","WEEKLY","DAILY","HOURLY","MINUTELY","SECONDLY"],"sources":["../../src/rrule.ts"],"sourcesContent":[null],"mappings":"AAAA,SAASA,WAAW,QAAQ,YAAY;AAExC,OAAOC,UAAwB,MAAM,cAAc;AACnD,OAAOC,kBAAkB,MAAM,sBAAsB;AAErD,SAASC,QAAQ,EAAEC,SAAS,EAAEC,MAAM,EAAEC,kBAAkB,QAAQ,aAAa;AAE7E,SAGEC,SAAS,QAIJ,SAAS;AAChB,SAASC,YAAY,EAAEC,iBAAiB,QAAQ,gBAAgB;AAChE,SAASC,WAAW,QAAQ,eAAe;AAC3C,SAASC,eAAe,QAAQ,mBAAmB;AACnD,SAASC,KAAK,QAAmB,SAAS;AAC1C,SAASC,OAAO,QAAQ,WAAW;AACnC,SAASC,IAAI,QAAQ,cAAc;AAEnC;AACA;AACA;AAEA,OAAO,IAAMC,IAAI,GAAG;EAClBC,EAAE,EAAE,IAAIH,OAAO,CAAC,CAAC,CAAC;EAClBI,EAAE,EAAE,IAAIJ,OAAO,CAAC,CAAC,CAAC;EAClBK,EAAE,EAAE,IAAIL,OAAO,CAAC,CAAC,CAAC;EAClBM,EAAE,EAAE,IAAIN,OAAO,CAAC,CAAC,CAAC;EAClBO,EAAE,EAAE,IAAIP,OAAO,CAAC,CAAC,CAAC;EAClBQ,EAAE,EAAE,IAAIR,OAAO,CAAC,CAAC,CAAC;EAClBS,EAAE,EAAE,IAAIT,OAAO,CAAC,CAAC;CAClB;AAED,OAAO,IAAMU,eAAe,GAAY;EACtCC,IAAI,EAAEjB,SAAS,CAACkB,MAAM;EACtBC,OAAO,EAAE,IAAI;EACbC,QAAQ,EAAE,CAAC;EACXC,IAAI,EAAEb,IAAI,CAACC,EAAE;EACba,KAAK,EAAE,IAAI;EACXC,KAAK,EAAE,IAAI;EACXC,IAAI,EAAE,IAAI;EACVC,QAAQ,EAAE,IAAI;EACdC,OAAO,EAAE,IAAI;EACbC,UAAU,EAAE,IAAI;EAChBC,WAAW,EAAE,IAAI;EACjBC,SAAS,EAAE,IAAI;EACfC,QAAQ,EAAE,IAAI;EACdC,SAAS,EAAE,IAAI;EACfC,UAAU,EAAE,IAAI;EAChBC,MAAM,EAAE,IAAI;EACZC,QAAQ,EAAE,IAAI;EACdC,QAAQ,EAAE,IAAI;EACdC,QAAQ,EAAE;CACX;AAED,OAAO,IAAMC,WAAW,GAAGC,MAAM,CAACC,IAAI,CAACvB,eAAe,CAAsB;AAE5E;;;;;;AAMA,IAAAwB,KAAA;EAiCE,SAAAA,MAAYC,OAA8B,EAAEC,OAAe;IAA/C,IAAAD,OAAA;MAAAA,OAAA,KAA8B;IAAA;IAAE,IAAAC,OAAA;MAAAA,OAAA,QAAe;IAAA;IACzD;IACA,IAAI,CAACC,MAAM,GAAGD,OAAO,GAAG,IAAI,GAAG,IAAIrC,KAAK,EAAE;IAE1C;IACA,IAAI,CAACuC,WAAW,GAAG1C,iBAAiB,CAACuC,OAAO,CAAC;IACrC,IAAAI,aAAa,GAAK5C,YAAY,CAACwC,OAAO,CAAC,CAAAI,aAA1B;IACrB,IAAI,CAACJ,OAAO,GAAGI,aAAa;EAC9B;EAEOL,KAAA,CAAA3C,SAAS,GAAhB,UAAiBiD,IAAY,EAAEC,QAAmB;IAChD,OAAOlD,SAAS,CAACiD,IAAI,EAAEC,QAAQ,CAAC;EAClC,CAAC;EAEMP,KAAA,CAAA5C,QAAQ,GAAf,UAAgBkD,IAAY,EAAEC,QAAmB;IAC/C,OAAOnD,QAAQ,CAACkD,IAAI,EAAEC,QAAQ,CAAC;EACjC,CAAC;EAIMP,KAAA,CAAAQ,UAAU,GAAjB,UAAkBC,GAAW;IAC3B,OAAO,IAAIT,KAAK,CAACA,KAAK,CAACrC,WAAW,CAAC8C,GAAG,CAAC,IAAIC,SAAS,CAAC;EACvD,CAAC;EAISV,KAAA,CAAAW,SAAA,CAAAC,KAAK,GAAf,UACEC,UAAyB;IAEzB,OAAO9C,IAAI,CAAC8C,UAAU,EAAE,IAAI,CAACZ,OAAO,CAAC;EACvC,CAAC;EAEOD,KAAA,CAAAW,SAAA,CAAAG,SAAS,GAAjB,UAAkBC,IAAuB,EAAEC,IAAwB;IACjE,IAAI,CAAC,IAAI,CAACb,MAAM,EAAE,OAAO,KAAK;IAC9B,OAAO,IAAI,CAACA,MAAM,CAACW,SAAS,CAACC,IAAI,EAAEC,IAAI,CAAC;EAC1C,CAAC;EAEMhB,KAAA,CAAAW,SAAA,CAAAM,SAAS,GAAhB,UACEF,IAAuB,EACvBG,KAA2B,EAC3BF,IAAwB;IAExB,IAAI,CAAC,IAAI,CAACb,MAAM,EAAE;IAClB,OAAO,IAAI,CAACA,MAAM,CAACc,SAAS,CAACF,IAAI,EAAEG,KAAK,EAAEF,IAAI,CAAC;EACjD,CAAC;EAED;;;;;;EAMAhB,KAAA,CAAAW,SAAA,CAAAQ,GAAG,GAAH,UAAIC,QAA4C;IAC9C,IAAIA,QAAQ,EAAE;MACZ,OAAO,IAAI,CAACR,KAAK,CAAC,IAAIzD,kBAAkB,CAAC,KAAK,EAAE,EAAE,EAAEiE,QAAQ,CAAC,CAAC;;IAGhE,IAAIC,MAAM,GAAG,IAAI,CAACP,SAAS,CAAC,KAAK,CAAmB;IACpD,IAAIO,MAAM,KAAK,KAAK,EAAE;MACpBA,MAAM,GAAG,IAAI,CAACT,KAAK,CAAC,IAAI1D,UAAU,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC;MAC9C,IAAI,CAAC+D,SAAS,CAAC,KAAK,EAAEI,MAAM,CAAC;;IAE/B,OAAOA,MAAM;EACf,CAAC;EAED;;;;;;;;EAQArB,KAAA,CAAAW,SAAA,CAAAW,OAAO,GAAP,UACEC,KAAW,EACXC,MAAY,EACZC,GAAW,EACXL,QAA4C;IAD5C,IAAAK,GAAA;MAAAA,GAAA,QAAW;IAAA;IAGX,IAAI,CAACxE,WAAW,CAACsE,KAAK,CAAC,IAAI,CAACtE,WAAW,CAACuE,MAAM,CAAC,EAAE;MAC/C,MAAM,IAAIE,KAAK,CAAC,yCAAyC,CAAC;;IAE5D,IAAMV,IAAI,GAAG;MACXQ,MAAM,EAAAA,MAAA;MACND,KAAK,EAAAA,KAAA;MACLE,GAAG,EAAAA;KACJ;IAED,IAAIL,QAAQ,EAAE;MACZ,OAAO,IAAI,CAACR,KAAK,CAAC,IAAIzD,kBAAkB,CAAC,SAAS,EAAE6D,IAAI,EAAEI,QAAQ,CAAC,CAAC;;IAGtE,IAAIC,MAAM,GAAG,IAAI,CAACP,SAAS,CAAC,SAAS,EAAEE,IAAI,CAAC;IAC5C,IAAIK,MAAM,KAAK,KAAK,EAAE;MACpBA,MAAM,GAAG,IAAI,CAACT,KAAK,CAAC,IAAI1D,UAAU,CAAC,SAAS,EAAE8D,IAAI,CAAC,CAAC;MACpD,IAAI,CAACC,SAAS,CAAC,SAAS,EAAEI,MAAM,EAAEL,IAAI,CAAC;;IAEzC,OAAOK,MAAgB;EACzB,CAAC;EAED;;;;;;;EAOArB,KAAA,CAAAW,SAAA,CAAAa,MAAM,GAAN,UAAOG,EAAQ,EAAEF,GAAW;IAAX,IAAAA,GAAA;MAAAA,GAAA,QAAW;IAAA;IAC1B,IAAI,CAACxE,WAAW,CAAC0E,EAAE,CAAC,EAAE;MACpB,MAAM,IAAID,KAAK,CAAC,wCAAwC,CAAC;;IAE3D,IAAMV,IAAI,GAAG;MAAEW,EAAE,EAAEA,EAAE;MAAEF,GAAG,EAAEA;IAAG,CAAE;IACjC,IAAIJ,MAAM,GAAG,IAAI,CAACP,SAAS,CAAC,QAAQ,EAAEE,IAAI,CAAC;IAC3C,IAAIK,MAAM,KAAK,KAAK,EAAE;MACpBA,MAAM,GAAG,IAAI,CAACT,KAAK,CAAC,IAAI1D,UAAU,CAAC,QAAQ,EAAE8D,IAAI,CAAC,CAAC;MACnD,IAAI,CAACC,SAAS,CAAC,QAAQ,EAAEI,MAAM,EAAEL,IAAI,CAAC;;IAExC,OAAOK,MAAqB;EAC9B,CAAC;EAED;;;;;;;EAOArB,KAAA,CAAAW,SAAA,CAAAY,KAAK,GAAL,UAAMI,EAAQ,EAAEF,GAAW;IAAX,IAAAA,GAAA;MAAAA,GAAA,QAAW;IAAA;IACzB,IAAI,CAACxE,WAAW,CAAC0E,EAAE,CAAC,EAAE;MACpB,MAAM,IAAID,KAAK,CAAC,uCAAuC,CAAC;;IAE1D,IAAMV,IAAI,GAAG;MAAEW,EAAE,EAAEA,EAAE;MAAEF,GAAG,EAAEA;IAAG,CAAE;IACjC,IAAIJ,MAAM,GAAG,IAAI,CAACP,SAAS,CAAC,OAAO,EAAEE,IAAI,CAAC;IAC1C,IAAIK,MAAM,KAAK,KAAK,EAAE;MACpBA,MAAM,GAAG,IAAI,CAACT,KAAK,CAAC,IAAI1D,UAAU,CAAC,OAAO,EAAE8D,IAAI,CAAC,CAAC;MAClD,IAAI,CAACC,SAAS,CAAC,OAAO,EAAEI,MAAM,EAAEL,IAAI,CAAC;;IAEvC,OAAOK,MAAqB;EAC9B,CAAC;EAED;;;;EAIArB,KAAA,CAAAW,SAAA,CAAA7B,KAAK,GAAL;IACE,OAAO,IAAI,CAACqC,GAAG,EAAE,CAACS,MAAM;EAC1B,CAAC;EAED;;;;;;EAMA5B,KAAA,CAAAW,SAAA,CAAAkB,QAAQ,GAAR;IACE,OAAOjE,eAAe,CAAC,IAAI,CAACwC,WAAW,CAAC;EAC1C,CAAC;EAED;;;;EAIAJ,KAAA,CAAAW,SAAA,CAAArD,MAAM,GAAN,UACEwE,OAAiB,EACjBvB,QAAmB,EACnBwB,aAA6B;IAE7B,OAAOzE,MAAM,CAAC,IAAI,EAAEwE,OAAO,EAAEvB,QAAQ,EAAEwB,aAAa,CAAC;EACvD,CAAC;EAED/B,KAAA,CAAAW,SAAA,CAAAqB,wBAAwB,GAAxB;IACE,OAAOzE,kBAAkB,CAAC,IAAI,CAAC;EACjC,CAAC;EAED;;;;EAIAyC,KAAA,CAAAW,SAAA,CAAAsB,KAAK,GAAL;IACE,OAAO,IAAIjC,KAAK,CAAC,IAAI,CAACI,WAAW,CAAC;EACpC,CAAC;EAhND;EAEgBJ,KAAA,CAAAkC,WAAW,GAA+B,CACxD,QAAQ,EACR,SAAS,EACT,QAAQ,EACR,OAAO,EACP,QAAQ,EACR,UAAU,EACV,UAAU,CACX;EAEelC,KAAA,CAAAtB,MAAM,GAAGlB,SAAS,CAACkB,MAAM;EACzBsB,KAAA,CAAAmC,OAAO,GAAG3E,SAAS,CAAC2E,OAAO;EAC3BnC,KAAA,CAAAoC,MAAM,GAAG5E,SAAS,CAAC4E,MAAM;EACzBpC,KAAA,CAAAqC,KAAK,GAAG7E,SAAS,CAAC6E,KAAK;EACvBrC,KAAA,CAAAsC,MAAM,GAAG9E,SAAS,CAAC8E,MAAM;EACzBtC,KAAA,CAAAuC,QAAQ,GAAG/E,SAAS,CAAC+E,QAAQ;EAC7BvC,KAAA,CAAAwC,QAAQ,GAAGhF,SAAS,CAACgF,QAAQ;EAE7BxC,KAAA,CAAA/B,EAAE,GAAGD,IAAI,CAACC,EAAE;EACZ+B,KAAA,CAAA9B,EAAE,GAAGF,IAAI,CAACE,EAAE;EACZ8B,KAAA,CAAA7B,EAAE,GAAGH,IAAI,CAACG,EAAE;EACZ6B,KAAA,CAAA5B,EAAE,GAAGJ,IAAI,CAACI,EAAE;EACZ4B,KAAA,CAAA3B,EAAE,GAAGL,IAAI,CAACK,EAAE;EACZ2B,KAAA,CAAA1B,EAAE,GAAGN,IAAI,CAACM,EAAE;EACZ0B,KAAA,CAAAzB,EAAE,GAAGP,IAAI,CAACO,EAAE;EAoBrByB,KAAA,CAAArC,WAAW,GAAGA,WAAW;EAMzBqC,KAAA,CAAApC,eAAe,GAAGA,eAAe;EA6J1C,OAAAoC,KAAC;CAAA,CAtND;SAAaA,KAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}