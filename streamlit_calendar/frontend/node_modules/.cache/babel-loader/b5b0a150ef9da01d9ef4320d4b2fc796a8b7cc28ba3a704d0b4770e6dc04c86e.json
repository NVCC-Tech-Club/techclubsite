{"ast":null,"code":"import _get from \"C:/Users/erden/OneDrive/Documents/GitHub/techclubsite/streamlit_calendar/frontend/node_modules/@babel/runtime/helpers/esm/get.js\";\nimport _getPrototypeOf from \"C:/Users/erden/OneDrive/Documents/GitHub/techclubsite/streamlit_calendar/frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\nimport _assertThisInitialized from \"C:/Users/erden/OneDrive/Documents/GitHub/techclubsite/streamlit_calendar/frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _slicedToArray from \"C:/Users/erden/OneDrive/Documents/GitHub/techclubsite/streamlit_calendar/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _toConsumableArray from \"C:/Users/erden/OneDrive/Documents/GitHub/techclubsite/streamlit_calendar/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _defineProperty from \"C:/Users/erden/OneDrive/Documents/GitHub/techclubsite/streamlit_calendar/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _createClass from \"C:/Users/erden/OneDrive/Documents/GitHub/techclubsite/streamlit_calendar/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _classCallCheck from \"C:/Users/erden/OneDrive/Documents/GitHub/techclubsite/streamlit_calendar/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _inherits from \"C:/Users/erden/OneDrive/Documents/GitHub/techclubsite/streamlit_calendar/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"C:/Users/erden/OneDrive/Documents/GitHub/techclubsite/streamlit_calendar/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport _createForOfIteratorHelper from \"C:/Users/erden/OneDrive/Documents/GitHub/techclubsite/streamlit_calendar/frontend/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport { m as mergeProps, g as guid, i as isArraysEqual, T as Theme, a as mapHash, B as BaseComponent, V as ViewContextType, C as ContentContainer, b as buildViewClassNames, c as greatestDurationDenominator, d as createDuration, e as BASE_OPTION_DEFAULTS, f as arrayToHash, h as filterHash, j as buildEventSourceRefiners, p as parseEventSource, k as formatWithOrdinals, u as unpromisify, l as buildRangeApiWithTimeZone, n as identity, r as requestJson, s as subtractDurations, o as intersectRanges, q as startOfDay, t as addDays, v as hashValuesToArray, w as buildEventApis, D as DelayedRunner, x as createFormatter, y as diffWholeDays, z as memoize, A as memoizeObjArg, E as isPropsEqual, F as Emitter, G as getInitialDate, H as rangeContainsMarker, I as createEmptyEventStore, J as reduceCurrentDate, K as reduceEventStore, L as rezoneEventStoreDates, M as mergeRawOptions, N as BASE_OPTION_REFINERS, O as CALENDAR_LISTENER_REFINERS, P as CALENDAR_OPTION_REFINERS, Q as COMPLEX_OPTION_COMPARATORS, R as VIEW_OPTION_REFINERS, S as DateEnv, U as DateProfileGenerator, W as createEventUi, X as parseBusinessHours, Y as setRef, Z as Interaction, _ as getElSeg, $ as elementClosest, a0 as EventImpl, a1 as listenBySelector, a2 as listenToHoverBySelector, a3 as PureComponent, a4 as buildViewContext, a5 as getUniqueDomId, a6 as parseInteractionSettings, a7 as interactionSettingsStore, a8 as getNow, a9 as CalendarImpl, aa as flushSync, ab as CalendarRoot, ac as RenderId, ad as ensureElHasStyles, ae as applyStyleProp, af as sliceEventStore } from './internal-common.js';\nexport { ag as JsonRequestError } from './internal-common.js';\nimport { createElement, createRef, Fragment, render } from 'preact';\nimport 'preact/compat';\nvar globalLocales = [];\nvar MINIMAL_RAW_EN_LOCALE = {\n  code: 'en',\n  week: {\n    dow: 0,\n    doy: 4 // 4 days need to be within the year to be considered the first week\n  },\n\n  direction: 'ltr',\n  buttonText: {\n    prev: 'prev',\n    next: 'next',\n    prevYear: 'prev year',\n    nextYear: 'next year',\n    year: 'year',\n    today: 'today',\n    month: 'month',\n    week: 'week',\n    day: 'day',\n    list: 'list'\n  },\n  weekText: 'W',\n  weekTextLong: 'Week',\n  closeHint: 'Close',\n  timeHint: 'Time',\n  eventHint: 'Event',\n  allDayText: 'all-day',\n  moreLinkText: 'more',\n  noEventsText: 'No events to display'\n};\nvar RAW_EN_LOCALE = Object.assign(Object.assign({}, MINIMAL_RAW_EN_LOCALE), {\n  // Includes things we don't want other locales to inherit,\n  // things that derive from other translatable strings.\n  buttonHints: {\n    prev: 'Previous $0',\n    next: 'Next $0',\n    today: function today(buttonText, unit) {\n      return unit === 'day' ? 'Today' : \"This \".concat(buttonText);\n    }\n  },\n  viewHint: '$0 view',\n  navLinkHint: 'Go to $0',\n  moreLinkHint: function moreLinkHint(eventCnt) {\n    return \"Show \".concat(eventCnt, \" more event\").concat(eventCnt === 1 ? '' : 's');\n  }\n});\nfunction organizeRawLocales(explicitRawLocales) {\n  var defaultCode = explicitRawLocales.length > 0 ? explicitRawLocales[0].code : 'en';\n  var allRawLocales = globalLocales.concat(explicitRawLocales);\n  var rawLocaleMap = {\n    en: RAW_EN_LOCALE\n  };\n  var _iterator = _createForOfIteratorHelper(allRawLocales),\n    _step;\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var rawLocale = _step.value;\n      rawLocaleMap[rawLocale.code] = rawLocale;\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n  return {\n    map: rawLocaleMap,\n    defaultCode: defaultCode\n  };\n}\nfunction buildLocale(inputSingular, available) {\n  if (typeof inputSingular === 'object' && !Array.isArray(inputSingular)) {\n    return parseLocale(inputSingular.code, [inputSingular.code], inputSingular);\n  }\n  return queryLocale(inputSingular, available);\n}\nfunction queryLocale(codeArg, available) {\n  var codes = [].concat(codeArg || []); // will convert to array\n  var raw = queryRawLocale(codes, available) || RAW_EN_LOCALE;\n  return parseLocale(codeArg, codes, raw);\n}\nfunction queryRawLocale(codes, available) {\n  for (var i = 0; i < codes.length; i += 1) {\n    var parts = codes[i].toLocaleLowerCase().split('-');\n    for (var j = parts.length; j > 0; j -= 1) {\n      var simpleId = parts.slice(0, j).join('-');\n      if (available[simpleId]) {\n        return available[simpleId];\n      }\n    }\n  }\n  return null;\n}\nfunction parseLocale(codeArg, codes, raw) {\n  var merged = mergeProps([MINIMAL_RAW_EN_LOCALE, raw], ['buttonText']);\n  delete merged.code; // don't want this part of the options\n  var week = merged.week;\n  delete merged.week;\n  return {\n    codeArg: codeArg,\n    codes: codes,\n    week: week,\n    simpleNumberFormat: new Intl.NumberFormat(codeArg),\n    options: merged\n  };\n}\n\n// TODO: easier way to add new hooks? need to update a million things\nfunction createPlugin(input) {\n  return {\n    id: guid(),\n    name: input.name,\n    premiumReleaseDate: input.premiumReleaseDate ? new Date(input.premiumReleaseDate) : undefined,\n    deps: input.deps || [],\n    reducers: input.reducers || [],\n    isLoadingFuncs: input.isLoadingFuncs || [],\n    contextInit: [].concat(input.contextInit || []),\n    eventRefiners: input.eventRefiners || {},\n    eventDefMemberAdders: input.eventDefMemberAdders || [],\n    eventSourceRefiners: input.eventSourceRefiners || {},\n    isDraggableTransformers: input.isDraggableTransformers || [],\n    eventDragMutationMassagers: input.eventDragMutationMassagers || [],\n    eventDefMutationAppliers: input.eventDefMutationAppliers || [],\n    dateSelectionTransformers: input.dateSelectionTransformers || [],\n    datePointTransforms: input.datePointTransforms || [],\n    dateSpanTransforms: input.dateSpanTransforms || [],\n    views: input.views || {},\n    viewPropsTransformers: input.viewPropsTransformers || [],\n    isPropsValid: input.isPropsValid || null,\n    externalDefTransforms: input.externalDefTransforms || [],\n    viewContainerAppends: input.viewContainerAppends || [],\n    eventDropTransformers: input.eventDropTransformers || [],\n    componentInteractions: input.componentInteractions || [],\n    calendarInteractions: input.calendarInteractions || [],\n    themeClasses: input.themeClasses || {},\n    eventSourceDefs: input.eventSourceDefs || [],\n    cmdFormatter: input.cmdFormatter,\n    recurringTypes: input.recurringTypes || [],\n    namedTimeZonedImpl: input.namedTimeZonedImpl,\n    initialView: input.initialView || '',\n    elementDraggingImpl: input.elementDraggingImpl,\n    optionChangeHandlers: input.optionChangeHandlers || {},\n    scrollGridImpl: input.scrollGridImpl || null,\n    listenerRefiners: input.listenerRefiners || {},\n    optionRefiners: input.optionRefiners || {},\n    propSetHandlers: input.propSetHandlers || {}\n  };\n}\nfunction buildPluginHooks(pluginDefs, globalDefs) {\n  var currentPluginIds = {};\n  var hooks = {\n    premiumReleaseDate: undefined,\n    reducers: [],\n    isLoadingFuncs: [],\n    contextInit: [],\n    eventRefiners: {},\n    eventDefMemberAdders: [],\n    eventSourceRefiners: {},\n    isDraggableTransformers: [],\n    eventDragMutationMassagers: [],\n    eventDefMutationAppliers: [],\n    dateSelectionTransformers: [],\n    datePointTransforms: [],\n    dateSpanTransforms: [],\n    views: {},\n    viewPropsTransformers: [],\n    isPropsValid: null,\n    externalDefTransforms: [],\n    viewContainerAppends: [],\n    eventDropTransformers: [],\n    componentInteractions: [],\n    calendarInteractions: [],\n    themeClasses: {},\n    eventSourceDefs: [],\n    cmdFormatter: null,\n    recurringTypes: [],\n    namedTimeZonedImpl: null,\n    initialView: '',\n    elementDraggingImpl: null,\n    optionChangeHandlers: {},\n    scrollGridImpl: null,\n    listenerRefiners: {},\n    optionRefiners: {},\n    propSetHandlers: {}\n  };\n  function addDefs(defs) {\n    var _iterator2 = _createForOfIteratorHelper(defs),\n      _step2;\n    try {\n      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n        var def = _step2.value;\n        var pluginName = def.name;\n        var currentId = currentPluginIds[pluginName];\n        if (currentId === undefined) {\n          currentPluginIds[pluginName] = def.id;\n          addDefs(def.deps);\n          hooks = combineHooks(hooks, def);\n        } else if (currentId !== def.id) {\n          // different ID than the one already added\n          console.warn(\"Duplicate plugin '\".concat(pluginName, \"'\"));\n        }\n      }\n    } catch (err) {\n      _iterator2.e(err);\n    } finally {\n      _iterator2.f();\n    }\n  }\n  if (pluginDefs) {\n    addDefs(pluginDefs);\n  }\n  addDefs(globalDefs);\n  return hooks;\n}\nfunction buildBuildPluginHooks() {\n  var currentOverrideDefs = [];\n  var currentGlobalDefs = [];\n  var currentHooks;\n  return function (overrideDefs, globalDefs) {\n    if (!currentHooks || !isArraysEqual(overrideDefs, currentOverrideDefs) || !isArraysEqual(globalDefs, currentGlobalDefs)) {\n      currentHooks = buildPluginHooks(overrideDefs, globalDefs);\n    }\n    currentOverrideDefs = overrideDefs;\n    currentGlobalDefs = globalDefs;\n    return currentHooks;\n  };\n}\nfunction combineHooks(hooks0, hooks1) {\n  return {\n    premiumReleaseDate: compareOptionalDates(hooks0.premiumReleaseDate, hooks1.premiumReleaseDate),\n    reducers: hooks0.reducers.concat(hooks1.reducers),\n    isLoadingFuncs: hooks0.isLoadingFuncs.concat(hooks1.isLoadingFuncs),\n    contextInit: hooks0.contextInit.concat(hooks1.contextInit),\n    eventRefiners: Object.assign(Object.assign({}, hooks0.eventRefiners), hooks1.eventRefiners),\n    eventDefMemberAdders: hooks0.eventDefMemberAdders.concat(hooks1.eventDefMemberAdders),\n    eventSourceRefiners: Object.assign(Object.assign({}, hooks0.eventSourceRefiners), hooks1.eventSourceRefiners),\n    isDraggableTransformers: hooks0.isDraggableTransformers.concat(hooks1.isDraggableTransformers),\n    eventDragMutationMassagers: hooks0.eventDragMutationMassagers.concat(hooks1.eventDragMutationMassagers),\n    eventDefMutationAppliers: hooks0.eventDefMutationAppliers.concat(hooks1.eventDefMutationAppliers),\n    dateSelectionTransformers: hooks0.dateSelectionTransformers.concat(hooks1.dateSelectionTransformers),\n    datePointTransforms: hooks0.datePointTransforms.concat(hooks1.datePointTransforms),\n    dateSpanTransforms: hooks0.dateSpanTransforms.concat(hooks1.dateSpanTransforms),\n    views: Object.assign(Object.assign({}, hooks0.views), hooks1.views),\n    viewPropsTransformers: hooks0.viewPropsTransformers.concat(hooks1.viewPropsTransformers),\n    isPropsValid: hooks1.isPropsValid || hooks0.isPropsValid,\n    externalDefTransforms: hooks0.externalDefTransforms.concat(hooks1.externalDefTransforms),\n    viewContainerAppends: hooks0.viewContainerAppends.concat(hooks1.viewContainerAppends),\n    eventDropTransformers: hooks0.eventDropTransformers.concat(hooks1.eventDropTransformers),\n    calendarInteractions: hooks0.calendarInteractions.concat(hooks1.calendarInteractions),\n    componentInteractions: hooks0.componentInteractions.concat(hooks1.componentInteractions),\n    themeClasses: Object.assign(Object.assign({}, hooks0.themeClasses), hooks1.themeClasses),\n    eventSourceDefs: hooks0.eventSourceDefs.concat(hooks1.eventSourceDefs),\n    cmdFormatter: hooks1.cmdFormatter || hooks0.cmdFormatter,\n    recurringTypes: hooks0.recurringTypes.concat(hooks1.recurringTypes),\n    namedTimeZonedImpl: hooks1.namedTimeZonedImpl || hooks0.namedTimeZonedImpl,\n    initialView: hooks0.initialView || hooks1.initialView,\n    elementDraggingImpl: hooks0.elementDraggingImpl || hooks1.elementDraggingImpl,\n    optionChangeHandlers: Object.assign(Object.assign({}, hooks0.optionChangeHandlers), hooks1.optionChangeHandlers),\n    scrollGridImpl: hooks1.scrollGridImpl || hooks0.scrollGridImpl,\n    listenerRefiners: Object.assign(Object.assign({}, hooks0.listenerRefiners), hooks1.listenerRefiners),\n    optionRefiners: Object.assign(Object.assign({}, hooks0.optionRefiners), hooks1.optionRefiners),\n    propSetHandlers: Object.assign(Object.assign({}, hooks0.propSetHandlers), hooks1.propSetHandlers)\n  };\n}\nfunction compareOptionalDates(date0, date1) {\n  if (date0 === undefined) {\n    return date1;\n  }\n  if (date1 === undefined) {\n    return date0;\n  }\n  return new Date(Math.max(date0.valueOf(), date1.valueOf()));\n}\nvar StandardTheme = /*#__PURE__*/function (_Theme) {\n  _inherits(StandardTheme, _Theme);\n  var _super = _createSuper(StandardTheme);\n  function StandardTheme() {\n    _classCallCheck(this, StandardTheme);\n    return _super.apply(this, arguments);\n  }\n  return _createClass(StandardTheme);\n}(Theme);\nStandardTheme.prototype.classes = {\n  root: 'fc-theme-standard',\n  tableCellShaded: 'fc-cell-shaded',\n  buttonGroup: 'fc-button-group',\n  button: 'fc-button fc-button-primary',\n  buttonActive: 'fc-button-active'\n};\nStandardTheme.prototype.baseIconClass = 'fc-icon';\nStandardTheme.prototype.iconClasses = {\n  close: 'fc-icon-x',\n  prev: 'fc-icon-chevron-left',\n  next: 'fc-icon-chevron-right',\n  prevYear: 'fc-icon-chevrons-left',\n  nextYear: 'fc-icon-chevrons-right'\n};\nStandardTheme.prototype.rtlIconClasses = {\n  prev: 'fc-icon-chevron-right',\n  next: 'fc-icon-chevron-left',\n  prevYear: 'fc-icon-chevrons-right',\n  nextYear: 'fc-icon-chevrons-left'\n};\nStandardTheme.prototype.iconOverrideOption = 'buttonIcons'; // TODO: make TS-friendly\nStandardTheme.prototype.iconOverrideCustomButtonOption = 'icon';\nStandardTheme.prototype.iconOverridePrefix = 'fc-icon-';\nfunction compileViewDefs(defaultConfigs, overrideConfigs) {\n  var hash = {};\n  var viewType;\n  for (viewType in defaultConfigs) {\n    ensureViewDef(viewType, hash, defaultConfigs, overrideConfigs);\n  }\n  for (viewType in overrideConfigs) {\n    ensureViewDef(viewType, hash, defaultConfigs, overrideConfigs);\n  }\n  return hash;\n}\nfunction ensureViewDef(viewType, hash, defaultConfigs, overrideConfigs) {\n  if (hash[viewType]) {\n    return hash[viewType];\n  }\n  var viewDef = buildViewDef(viewType, hash, defaultConfigs, overrideConfigs);\n  if (viewDef) {\n    hash[viewType] = viewDef;\n  }\n  return viewDef;\n}\nfunction buildViewDef(viewType, hash, defaultConfigs, overrideConfigs) {\n  var defaultConfig = defaultConfigs[viewType];\n  var overrideConfig = overrideConfigs[viewType];\n  var queryProp = function queryProp(name) {\n    return defaultConfig && defaultConfig[name] !== null ? defaultConfig[name] : overrideConfig && overrideConfig[name] !== null ? overrideConfig[name] : null;\n  };\n  var theComponent = queryProp('component');\n  var superType = queryProp('superType');\n  var superDef = null;\n  if (superType) {\n    if (superType === viewType) {\n      throw new Error('Can\\'t have a custom view type that references itself');\n    }\n    superDef = ensureViewDef(superType, hash, defaultConfigs, overrideConfigs);\n  }\n  if (!theComponent && superDef) {\n    theComponent = superDef.component;\n  }\n  if (!theComponent) {\n    return null; // don't throw a warning, might be settings for a single-unit view\n  }\n\n  return {\n    type: viewType,\n    component: theComponent,\n    defaults: Object.assign(Object.assign({}, superDef ? superDef.defaults : {}), defaultConfig ? defaultConfig.rawOptions : {}),\n    overrides: Object.assign(Object.assign({}, superDef ? superDef.overrides : {}), overrideConfig ? overrideConfig.rawOptions : {})\n  };\n}\nfunction parseViewConfigs(inputs) {\n  return mapHash(inputs, parseViewConfig);\n}\nfunction parseViewConfig(input) {\n  var rawOptions = typeof input === 'function' ? {\n    component: input\n  } : input;\n  var component = rawOptions.component;\n  if (rawOptions.content) {\n    // TODO: remove content/classNames/didMount/etc from options?\n    component = createViewHookComponent(rawOptions);\n  } else if (component && !(component.prototype instanceof BaseComponent)) {\n    // WHY?: people were using `component` property for `content`\n    // TODO: converge on one setting name\n    component = createViewHookComponent(Object.assign(Object.assign({}, rawOptions), {\n      content: component\n    }));\n  }\n  return {\n    superType: rawOptions.type,\n    component: component,\n    rawOptions: rawOptions // includes type and component too :(\n  };\n}\n\nfunction createViewHookComponent(options) {\n  return function (viewProps) {\n    return createElement(ViewContextType.Consumer, null, function (context) {\n      return createElement(ContentContainer, {\n        elTag: \"div\",\n        elClasses: buildViewClassNames(context.viewSpec),\n        renderProps: Object.assign(Object.assign({}, viewProps), {\n          nextDayThreshold: context.options.nextDayThreshold\n        }),\n        generatorName: undefined,\n        customGenerator: options.content,\n        classNameGenerator: options.classNames,\n        didMount: options.didMount,\n        willUnmount: options.willUnmount\n      });\n    });\n  };\n}\nfunction buildViewSpecs(defaultInputs, optionOverrides, dynamicOptionOverrides, localeDefaults) {\n  var defaultConfigs = parseViewConfigs(defaultInputs);\n  var overrideConfigs = parseViewConfigs(optionOverrides.views);\n  var viewDefs = compileViewDefs(defaultConfigs, overrideConfigs);\n  return mapHash(viewDefs, function (viewDef) {\n    return buildViewSpec(viewDef, overrideConfigs, optionOverrides, dynamicOptionOverrides, localeDefaults);\n  });\n}\nfunction buildViewSpec(viewDef, overrideConfigs, optionOverrides, dynamicOptionOverrides, localeDefaults) {\n  var durationInput = viewDef.overrides.duration || viewDef.defaults.duration || dynamicOptionOverrides.duration || optionOverrides.duration;\n  var duration = null;\n  var durationUnit = '';\n  var singleUnit = '';\n  var singleUnitOverrides = {};\n  if (durationInput) {\n    duration = createDurationCached(durationInput);\n    if (duration) {\n      // valid?\n      var denom = greatestDurationDenominator(duration);\n      durationUnit = denom.unit;\n      if (denom.value === 1) {\n        singleUnit = durationUnit;\n        singleUnitOverrides = overrideConfigs[durationUnit] ? overrideConfigs[durationUnit].rawOptions : {};\n      }\n    }\n  }\n  var queryButtonText = function queryButtonText(optionsSubset) {\n    var buttonTextMap = optionsSubset.buttonText || {};\n    var buttonTextKey = viewDef.defaults.buttonTextKey;\n    if (buttonTextKey != null && buttonTextMap[buttonTextKey] != null) {\n      return buttonTextMap[buttonTextKey];\n    }\n    if (buttonTextMap[viewDef.type] != null) {\n      return buttonTextMap[viewDef.type];\n    }\n    if (buttonTextMap[singleUnit] != null) {\n      return buttonTextMap[singleUnit];\n    }\n    return null;\n  };\n  var queryButtonTitle = function queryButtonTitle(optionsSubset) {\n    var buttonHints = optionsSubset.buttonHints || {};\n    var buttonKey = viewDef.defaults.buttonTextKey; // use same key as text\n    if (buttonKey != null && buttonHints[buttonKey] != null) {\n      return buttonHints[buttonKey];\n    }\n    if (buttonHints[viewDef.type] != null) {\n      return buttonHints[viewDef.type];\n    }\n    if (buttonHints[singleUnit] != null) {\n      return buttonHints[singleUnit];\n    }\n    return null;\n  };\n  return {\n    type: viewDef.type,\n    component: viewDef.component,\n    duration: duration,\n    durationUnit: durationUnit,\n    singleUnit: singleUnit,\n    optionDefaults: viewDef.defaults,\n    optionOverrides: Object.assign(Object.assign({}, singleUnitOverrides), viewDef.overrides),\n    buttonTextOverride: queryButtonText(dynamicOptionOverrides) || queryButtonText(optionOverrides) ||\n    // constructor-specified buttonText lookup hash takes precedence\n    viewDef.overrides.buttonText,\n    buttonTextDefault: queryButtonText(localeDefaults) || viewDef.defaults.buttonText || queryButtonText(BASE_OPTION_DEFAULTS) || viewDef.type,\n    // not DRY\n    buttonTitleOverride: queryButtonTitle(dynamicOptionOverrides) || queryButtonTitle(optionOverrides) || viewDef.overrides.buttonHint,\n    buttonTitleDefault: queryButtonTitle(localeDefaults) || viewDef.defaults.buttonHint || queryButtonTitle(BASE_OPTION_DEFAULTS)\n    // will eventually fall back to buttonText\n  };\n}\n// hack to get memoization working\nvar durationInputMap = {};\nfunction createDurationCached(durationInput) {\n  var json = JSON.stringify(durationInput);\n  var res = durationInputMap[json];\n  if (res === undefined) {\n    res = createDuration(durationInput);\n    durationInputMap[json] = res;\n  }\n  return res;\n}\nfunction reduceViewType(viewType, action) {\n  switch (action.type) {\n    case 'CHANGE_VIEW_TYPE':\n      viewType = action.viewType;\n  }\n  return viewType;\n}\nfunction reduceDynamicOptionOverrides(dynamicOptionOverrides, action) {\n  switch (action.type) {\n    case 'SET_OPTION':\n      return Object.assign(Object.assign({}, dynamicOptionOverrides), _defineProperty({}, action.optionName, action.rawOptionValue));\n    default:\n      return dynamicOptionOverrides;\n  }\n}\nfunction reduceDateProfile(currentDateProfile, action, currentDate, dateProfileGenerator) {\n  var dp;\n  switch (action.type) {\n    case 'CHANGE_VIEW_TYPE':\n      return dateProfileGenerator.build(action.dateMarker || currentDate);\n    case 'CHANGE_DATE':\n      return dateProfileGenerator.build(action.dateMarker);\n    case 'PREV':\n      dp = dateProfileGenerator.buildPrev(currentDateProfile, currentDate);\n      if (dp.isValid) {\n        return dp;\n      }\n      break;\n    case 'NEXT':\n      dp = dateProfileGenerator.buildNext(currentDateProfile, currentDate);\n      if (dp.isValid) {\n        return dp;\n      }\n      break;\n  }\n  return currentDateProfile;\n}\nfunction initEventSources(calendarOptions, dateProfile, context) {\n  var activeRange = dateProfile ? dateProfile.activeRange : null;\n  return addSources({}, parseInitialSources(calendarOptions, context), activeRange, context);\n}\nfunction reduceEventSources(eventSources, action, dateProfile, context) {\n  var activeRange = dateProfile ? dateProfile.activeRange : null; // need this check?\n  switch (action.type) {\n    case 'ADD_EVENT_SOURCES':\n      // already parsed\n      return addSources(eventSources, action.sources, activeRange, context);\n    case 'REMOVE_EVENT_SOURCE':\n      return removeSource(eventSources, action.sourceId);\n    case 'PREV': // TODO: how do we track all actions that affect dateProfile :(\n    case 'NEXT':\n    case 'CHANGE_DATE':\n    case 'CHANGE_VIEW_TYPE':\n      if (dateProfile) {\n        return fetchDirtySources(eventSources, activeRange, context);\n      }\n      return eventSources;\n    case 'FETCH_EVENT_SOURCES':\n      return fetchSourcesByIds(eventSources, action.sourceIds ?\n      // why no type?\n      arrayToHash(action.sourceIds) : excludeStaticSources(eventSources, context), activeRange, action.isRefetch || false, context);\n    case 'RECEIVE_EVENTS':\n    case 'RECEIVE_EVENT_ERROR':\n      return receiveResponse(eventSources, action.sourceId, action.fetchId, action.fetchRange);\n    case 'REMOVE_ALL_EVENT_SOURCES':\n      return {};\n    default:\n      return eventSources;\n  }\n}\nfunction reduceEventSourcesNewTimeZone(eventSources, dateProfile, context) {\n  var activeRange = dateProfile ? dateProfile.activeRange : null; // need this check?\n  return fetchSourcesByIds(eventSources, excludeStaticSources(eventSources, context), activeRange, true, context);\n}\nfunction computeEventSourcesLoading(eventSources) {\n  for (var sourceId in eventSources) {\n    if (eventSources[sourceId].isFetching) {\n      return true;\n    }\n  }\n  return false;\n}\nfunction addSources(eventSourceHash, sources, fetchRange, context) {\n  var hash = {};\n  var _iterator3 = _createForOfIteratorHelper(sources),\n    _step3;\n  try {\n    for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n      var source = _step3.value;\n      hash[source.sourceId] = source;\n    }\n  } catch (err) {\n    _iterator3.e(err);\n  } finally {\n    _iterator3.f();\n  }\n  if (fetchRange) {\n    hash = fetchDirtySources(hash, fetchRange, context);\n  }\n  return Object.assign(Object.assign({}, eventSourceHash), hash);\n}\nfunction removeSource(eventSourceHash, sourceId) {\n  return filterHash(eventSourceHash, function (eventSource) {\n    return eventSource.sourceId !== sourceId;\n  });\n}\nfunction fetchDirtySources(sourceHash, fetchRange, context) {\n  return fetchSourcesByIds(sourceHash, filterHash(sourceHash, function (eventSource) {\n    return isSourceDirty(eventSource, fetchRange, context);\n  }), fetchRange, false, context);\n}\nfunction isSourceDirty(eventSource, fetchRange, context) {\n  if (!doesSourceNeedRange(eventSource, context)) {\n    return !eventSource.latestFetchId;\n  }\n  return !context.options.lazyFetching || !eventSource.fetchRange || eventSource.isFetching ||\n  // always cancel outdated in-progress fetches\n  fetchRange.start < eventSource.fetchRange.start || fetchRange.end > eventSource.fetchRange.end;\n}\nfunction fetchSourcesByIds(prevSources, sourceIdHash, fetchRange, isRefetch, context) {\n  var nextSources = {};\n  for (var sourceId in prevSources) {\n    var source = prevSources[sourceId];\n    if (sourceIdHash[sourceId]) {\n      nextSources[sourceId] = fetchSource(source, fetchRange, isRefetch, context);\n    } else {\n      nextSources[sourceId] = source;\n    }\n  }\n  return nextSources;\n}\nfunction fetchSource(eventSource, fetchRange, isRefetch, context) {\n  var options = context.options,\n    calendarApi = context.calendarApi;\n  var sourceDef = context.pluginHooks.eventSourceDefs[eventSource.sourceDefId];\n  var fetchId = guid();\n  sourceDef.fetch({\n    eventSource: eventSource,\n    range: fetchRange,\n    isRefetch: isRefetch,\n    context: context\n  }, function (res) {\n    var rawEvents = res.rawEvents;\n    if (options.eventSourceSuccess) {\n      rawEvents = options.eventSourceSuccess.call(calendarApi, rawEvents, res.response) || rawEvents;\n    }\n    if (eventSource.success) {\n      rawEvents = eventSource.success.call(calendarApi, rawEvents, res.response) || rawEvents;\n    }\n    context.dispatch({\n      type: 'RECEIVE_EVENTS',\n      sourceId: eventSource.sourceId,\n      fetchId: fetchId,\n      fetchRange: fetchRange,\n      rawEvents: rawEvents\n    });\n  }, function (error) {\n    var errorHandled = false;\n    if (options.eventSourceFailure) {\n      options.eventSourceFailure.call(calendarApi, error);\n      errorHandled = true;\n    }\n    if (eventSource.failure) {\n      eventSource.failure(error);\n      errorHandled = true;\n    }\n    if (!errorHandled) {\n      console.warn(error.message, error);\n    }\n    context.dispatch({\n      type: 'RECEIVE_EVENT_ERROR',\n      sourceId: eventSource.sourceId,\n      fetchId: fetchId,\n      fetchRange: fetchRange,\n      error: error\n    });\n  });\n  return Object.assign(Object.assign({}, eventSource), {\n    isFetching: true,\n    latestFetchId: fetchId\n  });\n}\nfunction receiveResponse(sourceHash, sourceId, fetchId, fetchRange) {\n  var eventSource = sourceHash[sourceId];\n  if (eventSource &&\n  // not already removed\n  fetchId === eventSource.latestFetchId) {\n    return Object.assign(Object.assign({}, sourceHash), _defineProperty({}, sourceId, Object.assign(Object.assign({}, eventSource), {\n      isFetching: false,\n      fetchRange: fetchRange\n    })));\n  }\n  return sourceHash;\n}\nfunction excludeStaticSources(eventSources, context) {\n  return filterHash(eventSources, function (eventSource) {\n    return doesSourceNeedRange(eventSource, context);\n  });\n}\nfunction parseInitialSources(rawOptions, context) {\n  var refiners = buildEventSourceRefiners(context);\n  var rawSources = [].concat(rawOptions.eventSources || []);\n  var sources = []; // parsed\n  if (rawOptions.initialEvents) {\n    rawSources.unshift(rawOptions.initialEvents);\n  }\n  if (rawOptions.events) {\n    rawSources.unshift(rawOptions.events);\n  }\n  var _iterator4 = _createForOfIteratorHelper(rawSources),\n    _step4;\n  try {\n    for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n      var rawSource = _step4.value;\n      var source = parseEventSource(rawSource, context, refiners);\n      if (source) {\n        sources.push(source);\n      }\n    }\n  } catch (err) {\n    _iterator4.e(err);\n  } finally {\n    _iterator4.f();\n  }\n  return sources;\n}\nfunction doesSourceNeedRange(eventSource, context) {\n  var defs = context.pluginHooks.eventSourceDefs;\n  return !defs[eventSource.sourceDefId].ignoreRange;\n}\nfunction reduceDateSelection(currentSelection, action) {\n  switch (action.type) {\n    case 'UNSELECT_DATES':\n      return null;\n    case 'SELECT_DATES':\n      return action.selection;\n    default:\n      return currentSelection;\n  }\n}\nfunction reduceSelectedEvent(currentInstanceId, action) {\n  switch (action.type) {\n    case 'UNSELECT_EVENT':\n      return '';\n    case 'SELECT_EVENT':\n      return action.eventInstanceId;\n    default:\n      return currentInstanceId;\n  }\n}\nfunction reduceEventDrag(currentDrag, action) {\n  var newDrag;\n  switch (action.type) {\n    case 'UNSET_EVENT_DRAG':\n      return null;\n    case 'SET_EVENT_DRAG':\n      newDrag = action.state;\n      return {\n        affectedEvents: newDrag.affectedEvents,\n        mutatedEvents: newDrag.mutatedEvents,\n        isEvent: newDrag.isEvent\n      };\n    default:\n      return currentDrag;\n  }\n}\nfunction reduceEventResize(currentResize, action) {\n  var newResize;\n  switch (action.type) {\n    case 'UNSET_EVENT_RESIZE':\n      return null;\n    case 'SET_EVENT_RESIZE':\n      newResize = action.state;\n      return {\n        affectedEvents: newResize.affectedEvents,\n        mutatedEvents: newResize.mutatedEvents,\n        isEvent: newResize.isEvent\n      };\n    default:\n      return currentResize;\n  }\n}\nfunction parseToolbars(calendarOptions, calendarOptionOverrides, theme, viewSpecs, calendarApi) {\n  var header = calendarOptions.headerToolbar ? parseToolbar(calendarOptions.headerToolbar, calendarOptions, calendarOptionOverrides, theme, viewSpecs, calendarApi) : null;\n  var footer = calendarOptions.footerToolbar ? parseToolbar(calendarOptions.footerToolbar, calendarOptions, calendarOptionOverrides, theme, viewSpecs, calendarApi) : null;\n  return {\n    header: header,\n    footer: footer\n  };\n}\nfunction parseToolbar(sectionStrHash, calendarOptions, calendarOptionOverrides, theme, viewSpecs, calendarApi) {\n  var sectionWidgets = {};\n  var viewsWithButtons = [];\n  var hasTitle = false;\n  for (var sectionName in sectionStrHash) {\n    var sectionStr = sectionStrHash[sectionName];\n    var sectionRes = parseSection(sectionStr, calendarOptions, calendarOptionOverrides, theme, viewSpecs, calendarApi);\n    sectionWidgets[sectionName] = sectionRes.widgets;\n    viewsWithButtons.push.apply(viewsWithButtons, _toConsumableArray(sectionRes.viewsWithButtons));\n    hasTitle = hasTitle || sectionRes.hasTitle;\n  }\n  return {\n    sectionWidgets: sectionWidgets,\n    viewsWithButtons: viewsWithButtons,\n    hasTitle: hasTitle\n  };\n}\n/*\nBAD: querying icons and text here. should be done at render time\n*/\nfunction parseSection(sectionStr, calendarOptions,\n// defaults+overrides, then refined\ncalendarOptionOverrides,\n// overrides only!, unrefined :(\ntheme, viewSpecs, calendarApi) {\n  var isRtl = calendarOptions.direction === 'rtl';\n  var calendarCustomButtons = calendarOptions.customButtons || {};\n  var calendarButtonTextOverrides = calendarOptionOverrides.buttonText || {};\n  var calendarButtonText = calendarOptions.buttonText || {};\n  var calendarButtonHintOverrides = calendarOptionOverrides.buttonHints || {};\n  var calendarButtonHints = calendarOptions.buttonHints || {};\n  var sectionSubstrs = sectionStr ? sectionStr.split(' ') : [];\n  var viewsWithButtons = [];\n  var hasTitle = false;\n  var widgets = sectionSubstrs.map(function (buttonGroupStr) {\n    return buttonGroupStr.split(',').map(function (buttonName) {\n      if (buttonName === 'title') {\n        hasTitle = true;\n        return {\n          buttonName: buttonName\n        };\n      }\n      var customButtonProps;\n      var viewSpec;\n      var buttonClick;\n      var buttonIcon; // only one of these will be set\n      var buttonText; // \"\n      var buttonHint;\n      // ^ for the title=\"\" attribute, for accessibility\n      if (customButtonProps = calendarCustomButtons[buttonName]) {\n        buttonClick = function buttonClick(ev) {\n          if (customButtonProps.click) {\n            customButtonProps.click.call(ev.target, ev, ev.target); // TODO: use Calendar this context?\n          }\n        };\n\n        (buttonIcon = theme.getCustomButtonIconClass(customButtonProps)) || (buttonIcon = theme.getIconClass(buttonName, isRtl)) || (buttonText = customButtonProps.text);\n        buttonHint = customButtonProps.hint || customButtonProps.text;\n      } else if (viewSpec = viewSpecs[buttonName]) {\n        viewsWithButtons.push(buttonName);\n        buttonClick = function buttonClick() {\n          calendarApi.changeView(buttonName);\n        };\n        (buttonText = viewSpec.buttonTextOverride) || (buttonIcon = theme.getIconClass(buttonName, isRtl)) || (buttonText = viewSpec.buttonTextDefault);\n        var textFallback = viewSpec.buttonTextOverride || viewSpec.buttonTextDefault;\n        buttonHint = formatWithOrdinals(viewSpec.buttonTitleOverride || viewSpec.buttonTitleDefault || calendarOptions.viewHint, [textFallback, buttonName],\n        // view-name = buttonName\n        textFallback);\n      } else if (calendarApi[buttonName]) {\n        // a calendarApi method\n        buttonClick = function buttonClick() {\n          calendarApi[buttonName]();\n        };\n        (buttonText = calendarButtonTextOverrides[buttonName]) || (buttonIcon = theme.getIconClass(buttonName, isRtl)) || (buttonText = calendarButtonText[buttonName]); // everything else is considered default\n        if (buttonName === 'prevYear' || buttonName === 'nextYear') {\n          var prevOrNext = buttonName === 'prevYear' ? 'prev' : 'next';\n          buttonHint = formatWithOrdinals(calendarButtonHintOverrides[prevOrNext] || calendarButtonHints[prevOrNext], [calendarButtonText.year || 'year', 'year'], calendarButtonText[buttonName]);\n        } else {\n          buttonHint = function buttonHint(navUnit) {\n            return formatWithOrdinals(calendarButtonHintOverrides[buttonName] || calendarButtonHints[buttonName], [calendarButtonText[navUnit] || navUnit, navUnit], calendarButtonText[buttonName]);\n          };\n        }\n      }\n      return {\n        buttonName: buttonName,\n        buttonClick: buttonClick,\n        buttonIcon: buttonIcon,\n        buttonText: buttonText,\n        buttonHint: buttonHint\n      };\n    });\n  });\n  return {\n    widgets: widgets,\n    viewsWithButtons: viewsWithButtons,\n    hasTitle: hasTitle\n  };\n}\n\n// always represents the current view. otherwise, it'd need to change value every time date changes\nvar ViewImpl = /*#__PURE__*/function () {\n  function ViewImpl(type, getCurrentData, dateEnv) {\n    _classCallCheck(this, ViewImpl);\n    this.type = type;\n    this.getCurrentData = getCurrentData;\n    this.dateEnv = dateEnv;\n  }\n  _createClass(ViewImpl, [{\n    key: \"calendar\",\n    get: function get() {\n      return this.getCurrentData().calendarApi;\n    }\n  }, {\n    key: \"title\",\n    get: function get() {\n      return this.getCurrentData().viewTitle;\n    }\n  }, {\n    key: \"activeStart\",\n    get: function get() {\n      return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.start);\n    }\n  }, {\n    key: \"activeEnd\",\n    get: function get() {\n      return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.end);\n    }\n  }, {\n    key: \"currentStart\",\n    get: function get() {\n      return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.start);\n    }\n  }, {\n    key: \"currentEnd\",\n    get: function get() {\n      return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.end);\n    }\n  }, {\n    key: \"getOption\",\n    value: function getOption(name) {\n      return this.getCurrentData().options[name]; // are the view-specific options\n    }\n  }]);\n  return ViewImpl;\n}();\nvar eventSourceDef$2 = {\n  ignoreRange: true,\n  parseMeta: function parseMeta(refined) {\n    if (Array.isArray(refined.events)) {\n      return refined.events;\n    }\n    return null;\n  },\n  fetch: function fetch(arg, successCallback) {\n    successCallback({\n      rawEvents: arg.eventSource.meta\n    });\n  }\n};\nvar arrayEventSourcePlugin = createPlugin({\n  name: 'array-event-source',\n  eventSourceDefs: [eventSourceDef$2]\n});\nvar eventSourceDef$1 = {\n  parseMeta: function parseMeta(refined) {\n    if (typeof refined.events === 'function') {\n      return refined.events;\n    }\n    return null;\n  },\n  fetch: function fetch(arg, successCallback, errorCallback) {\n    var dateEnv = arg.context.dateEnv;\n    var func = arg.eventSource.meta;\n    unpromisify(func.bind(null, buildRangeApiWithTimeZone(arg.range, dateEnv)), function (rawEvents) {\n      return successCallback({\n        rawEvents: rawEvents\n      });\n    }, errorCallback);\n  }\n};\nvar funcEventSourcePlugin = createPlugin({\n  name: 'func-event-source',\n  eventSourceDefs: [eventSourceDef$1]\n});\nvar JSON_FEED_EVENT_SOURCE_REFINERS = {\n  method: String,\n  extraParams: identity,\n  startParam: String,\n  endParam: String,\n  timeZoneParam: String\n};\nvar eventSourceDef = {\n  parseMeta: function parseMeta(refined) {\n    if (refined.url && (refined.format === 'json' || !refined.format)) {\n      return {\n        url: refined.url,\n        format: 'json',\n        method: (refined.method || 'GET').toUpperCase(),\n        extraParams: refined.extraParams,\n        startParam: refined.startParam,\n        endParam: refined.endParam,\n        timeZoneParam: refined.timeZoneParam\n      };\n    }\n    return null;\n  },\n  fetch: function fetch(arg, successCallback, errorCallback) {\n    var meta = arg.eventSource.meta;\n    var requestParams = buildRequestParams(meta, arg.range, arg.context);\n    requestJson(meta.method, meta.url, requestParams).then(function (_ref) {\n      var _ref2 = _slicedToArray(_ref, 2),\n        rawEvents = _ref2[0],\n        response = _ref2[1];\n      successCallback({\n        rawEvents: rawEvents,\n        response: response\n      });\n    }, errorCallback);\n  }\n};\nvar jsonFeedEventSourcePlugin = createPlugin({\n  name: 'json-event-source',\n  eventSourceRefiners: JSON_FEED_EVENT_SOURCE_REFINERS,\n  eventSourceDefs: [eventSourceDef]\n});\nfunction buildRequestParams(meta, range, context) {\n  var dateEnv = context.dateEnv,\n    options = context.options;\n  var startParam;\n  var endParam;\n  var timeZoneParam;\n  var customRequestParams;\n  var params = {};\n  startParam = meta.startParam;\n  if (startParam == null) {\n    startParam = options.startParam;\n  }\n  endParam = meta.endParam;\n  if (endParam == null) {\n    endParam = options.endParam;\n  }\n  timeZoneParam = meta.timeZoneParam;\n  if (timeZoneParam == null) {\n    timeZoneParam = options.timeZoneParam;\n  }\n  // retrieve any outbound GET/POST data from the options\n  if (typeof meta.extraParams === 'function') {\n    // supplied as a function that returns a key/value object\n    customRequestParams = meta.extraParams();\n  } else {\n    // probably supplied as a straight key/value object\n    customRequestParams = meta.extraParams || {};\n  }\n  Object.assign(params, customRequestParams);\n  params[startParam] = dateEnv.formatIso(range.start);\n  params[endParam] = dateEnv.formatIso(range.end);\n  if (dateEnv.timeZone !== 'local') {\n    params[timeZoneParam] = dateEnv.timeZone;\n  }\n  return params;\n}\nvar SIMPLE_RECURRING_REFINERS = {\n  daysOfWeek: identity,\n  startTime: createDuration,\n  endTime: createDuration,\n  duration: createDuration,\n  startRecur: identity,\n  endRecur: identity\n};\nvar recurring = {\n  parse: function parse(refined, dateEnv) {\n    if (refined.daysOfWeek || refined.startTime || refined.endTime || refined.startRecur || refined.endRecur) {\n      var recurringData = {\n        daysOfWeek: refined.daysOfWeek || null,\n        startTime: refined.startTime || null,\n        endTime: refined.endTime || null,\n        startRecur: refined.startRecur ? dateEnv.createMarker(refined.startRecur) : null,\n        endRecur: refined.endRecur ? dateEnv.createMarker(refined.endRecur) : null\n      };\n      var duration;\n      if (refined.duration) {\n        duration = refined.duration;\n      }\n      if (!duration && refined.startTime && refined.endTime) {\n        duration = subtractDurations(refined.endTime, refined.startTime);\n      }\n      return {\n        allDayGuess: Boolean(!refined.startTime && !refined.endTime),\n        duration: duration,\n        typeData: recurringData // doesn't need endTime anymore but oh well\n      };\n    }\n\n    return null;\n  },\n  expand: function expand(typeData, framingRange, dateEnv) {\n    var clippedFramingRange = intersectRanges(framingRange, {\n      start: typeData.startRecur,\n      end: typeData.endRecur\n    });\n    if (clippedFramingRange) {\n      return expandRanges(typeData.daysOfWeek, typeData.startTime, clippedFramingRange, dateEnv);\n    }\n    return [];\n  }\n};\nvar simpleRecurringEventsPlugin = createPlugin({\n  name: 'simple-recurring-event',\n  recurringTypes: [recurring],\n  eventRefiners: SIMPLE_RECURRING_REFINERS\n});\nfunction expandRanges(daysOfWeek, startTime, framingRange, dateEnv) {\n  var dowHash = daysOfWeek ? arrayToHash(daysOfWeek) : null;\n  var dayMarker = startOfDay(framingRange.start);\n  var endMarker = framingRange.end;\n  var instanceStarts = [];\n  while (dayMarker < endMarker) {\n    var instanceStart = void 0;\n    // if everyday, or this particular day-of-week\n    if (!dowHash || dowHash[dayMarker.getUTCDay()]) {\n      if (startTime) {\n        instanceStart = dateEnv.add(dayMarker, startTime);\n      } else {\n        instanceStart = dayMarker;\n      }\n      instanceStarts.push(instanceStart);\n    }\n    dayMarker = addDays(dayMarker, 1);\n  }\n  return instanceStarts;\n}\nvar changeHandlerPlugin = createPlugin({\n  name: 'change-handler',\n  optionChangeHandlers: {\n    events: function events(_events, context) {\n      handleEventSources([_events], context);\n    },\n    eventSources: handleEventSources\n  }\n});\n/*\nBUG: if `event` was supplied, all previously-given `eventSources` will be wiped out\n*/\nfunction handleEventSources(inputs, context) {\n  var unfoundSources = hashValuesToArray(context.getCurrentData().eventSources);\n  if (unfoundSources.length === 1 && inputs.length === 1 && Array.isArray(unfoundSources[0]._raw) && Array.isArray(inputs[0])) {\n    context.dispatch({\n      type: 'RESET_RAW_EVENTS',\n      sourceId: unfoundSources[0].sourceId,\n      rawEvents: inputs[0]\n    });\n    return;\n  }\n  var newInputs = [];\n  var _iterator5 = _createForOfIteratorHelper(inputs),\n    _step5;\n  try {\n    for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n      var input = _step5.value;\n      var inputFound = false;\n      for (var i = 0; i < unfoundSources.length; i += 1) {\n        if (unfoundSources[i]._raw === input) {\n          unfoundSources.splice(i, 1); // delete\n          inputFound = true;\n          break;\n        }\n      }\n      if (!inputFound) {\n        newInputs.push(input);\n      }\n    }\n  } catch (err) {\n    _iterator5.e(err);\n  } finally {\n    _iterator5.f();\n  }\n  var _iterator6 = _createForOfIteratorHelper(unfoundSources),\n    _step6;\n  try {\n    for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n      var unfoundSource = _step6.value;\n      context.dispatch({\n        type: 'REMOVE_EVENT_SOURCE',\n        sourceId: unfoundSource.sourceId\n      });\n    }\n  } catch (err) {\n    _iterator6.e(err);\n  } finally {\n    _iterator6.f();\n  }\n  for (var _i = 0, _newInputs = newInputs; _i < _newInputs.length; _i++) {\n    var newInput = _newInputs[_i];\n    context.calendarApi.addEventSource(newInput);\n  }\n}\nfunction handleDateProfile(dateProfile, context) {\n  context.emitter.trigger('datesSet', Object.assign(Object.assign({}, buildRangeApiWithTimeZone(dateProfile.activeRange, context.dateEnv)), {\n    view: context.viewApi\n  }));\n}\nfunction handleEventStore(eventStore, context) {\n  var emitter = context.emitter;\n  if (emitter.hasHandlers('eventsSet')) {\n    emitter.trigger('eventsSet', buildEventApis(eventStore, context));\n  }\n}\n\n/*\nthis array is exposed on the root namespace so that UMD plugins can add to it.\nsee the rollup-bundles script.\n*/\nvar globalPlugins = [arrayEventSourcePlugin, funcEventSourcePlugin, jsonFeedEventSourcePlugin, simpleRecurringEventsPlugin, changeHandlerPlugin, createPlugin({\n  name: 'misc',\n  isLoadingFuncs: [function (state) {\n    return computeEventSourcesLoading(state.eventSources);\n  }],\n  propSetHandlers: {\n    dateProfile: handleDateProfile,\n    eventStore: handleEventStore\n  }\n})];\nvar TaskRunner = /*#__PURE__*/function () {\n  function TaskRunner(runTaskOption, drainedOption) {\n    _classCallCheck(this, TaskRunner);\n    this.runTaskOption = runTaskOption;\n    this.drainedOption = drainedOption;\n    this.queue = [];\n    this.delayedRunner = new DelayedRunner(this.drain.bind(this));\n  }\n  _createClass(TaskRunner, [{\n    key: \"request\",\n    value: function request(task, delay) {\n      this.queue.push(task);\n      this.delayedRunner.request(delay);\n    }\n  }, {\n    key: \"pause\",\n    value: function pause(scope) {\n      this.delayedRunner.pause(scope);\n    }\n  }, {\n    key: \"resume\",\n    value: function resume(scope, force) {\n      this.delayedRunner.resume(scope, force);\n    }\n  }, {\n    key: \"drain\",\n    value: function drain() {\n      var queue = this.queue;\n      while (queue.length) {\n        var completedTasks = [];\n        var task = void 0;\n        while (task = queue.shift()) {\n          this.runTask(task);\n          completedTasks.push(task);\n        }\n        this.drained(completedTasks);\n      } // keep going, in case new tasks were added in the drained handler\n    }\n  }, {\n    key: \"runTask\",\n    value: function runTask(task) {\n      if (this.runTaskOption) {\n        this.runTaskOption(task);\n      }\n    }\n  }, {\n    key: \"drained\",\n    value: function drained(completedTasks) {\n      if (this.drainedOption) {\n        this.drainedOption(completedTasks);\n      }\n    }\n  }]);\n  return TaskRunner;\n}(); // Computes what the title at the top of the calendarApi should be for this view\nfunction buildTitle(dateProfile, viewOptions, dateEnv) {\n  var range;\n  // for views that span a large unit of time, show the proper interval, ignoring stray days before and after\n  if (/^(year|month)$/.test(dateProfile.currentRangeUnit)) {\n    range = dateProfile.currentRange;\n  } else {\n    // for day units or smaller, use the actual day range\n    range = dateProfile.activeRange;\n  }\n  return dateEnv.formatRange(range.start, range.end, createFormatter(viewOptions.titleFormat || buildTitleFormat(dateProfile)), {\n    isEndExclusive: dateProfile.isRangeAllDay,\n    defaultSeparator: viewOptions.titleRangeSeparator\n  });\n}\n// Generates the format string that should be used to generate the title for the current date range.\n// Attempts to compute the most appropriate format if not explicitly specified with `titleFormat`.\nfunction buildTitleFormat(dateProfile) {\n  var currentRangeUnit = dateProfile.currentRangeUnit;\n  if (currentRangeUnit === 'year') {\n    return {\n      year: 'numeric'\n    };\n  }\n  if (currentRangeUnit === 'month') {\n    return {\n      year: 'numeric',\n      month: 'long'\n    }; // like \"September 2014\"\n  }\n\n  var days = diffWholeDays(dateProfile.currentRange.start, dateProfile.currentRange.end);\n  if (days !== null && days > 1) {\n    // multi-day range. shorter, like \"Sep 9 - 10 2014\"\n    return {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric'\n    };\n  }\n  // one day. longer, like \"September 9 2014\"\n  return {\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric'\n  };\n}\n\n// in future refactor, do the redux-style function(state=initial) for initial-state\n// also, whatever is happening in constructor, have it happen in action queue too\nvar CalendarDataManager = /*#__PURE__*/function () {\n  function CalendarDataManager(props) {\n    var _this = this;\n    _classCallCheck(this, CalendarDataManager);\n    this.computeCurrentViewData = memoize(this._computeCurrentViewData);\n    this.organizeRawLocales = memoize(organizeRawLocales);\n    this.buildLocale = memoize(buildLocale);\n    this.buildPluginHooks = buildBuildPluginHooks();\n    this.buildDateEnv = memoize(buildDateEnv$1);\n    this.buildTheme = memoize(buildTheme);\n    this.parseToolbars = memoize(parseToolbars);\n    this.buildViewSpecs = memoize(buildViewSpecs);\n    this.buildDateProfileGenerator = memoizeObjArg(buildDateProfileGenerator);\n    this.buildViewApi = memoize(buildViewApi);\n    this.buildViewUiProps = memoizeObjArg(buildViewUiProps);\n    this.buildEventUiBySource = memoize(buildEventUiBySource, isPropsEqual);\n    this.buildEventUiBases = memoize(buildEventUiBases);\n    this.parseContextBusinessHours = memoizeObjArg(parseContextBusinessHours);\n    this.buildTitle = memoize(buildTitle);\n    this.emitter = new Emitter();\n    this.actionRunner = new TaskRunner(this._handleAction.bind(this), this.updateData.bind(this));\n    this.currentCalendarOptionsInput = {};\n    this.currentCalendarOptionsRefined = {};\n    this.currentViewOptionsInput = {};\n    this.currentViewOptionsRefined = {};\n    this.currentCalendarOptionsRefiners = {};\n    this.optionsForRefining = [];\n    this.optionsForHandling = [];\n    this.getCurrentData = function () {\n      return _this.data;\n    };\n    this.dispatch = function (action) {\n      _this.actionRunner.request(action); // protects against recursive calls to _handleAction\n    };\n\n    this.props = props;\n    this.actionRunner.pause();\n    var dynamicOptionOverrides = {};\n    var optionsData = this.computeOptionsData(props.optionOverrides, dynamicOptionOverrides, props.calendarApi);\n    var currentViewType = optionsData.calendarOptions.initialView || optionsData.pluginHooks.initialView;\n    var currentViewData = this.computeCurrentViewData(currentViewType, optionsData, props.optionOverrides, dynamicOptionOverrides);\n    // wire things up\n    // TODO: not DRY\n    props.calendarApi.currentDataManager = this;\n    this.emitter.setThisContext(props.calendarApi);\n    this.emitter.setOptions(currentViewData.options);\n    var currentDate = getInitialDate(optionsData.calendarOptions, optionsData.dateEnv);\n    var dateProfile = currentViewData.dateProfileGenerator.build(currentDate);\n    if (!rangeContainsMarker(dateProfile.activeRange, currentDate)) {\n      currentDate = dateProfile.currentRange.start;\n    }\n    var calendarContext = {\n      dateEnv: optionsData.dateEnv,\n      options: optionsData.calendarOptions,\n      pluginHooks: optionsData.pluginHooks,\n      calendarApi: props.calendarApi,\n      dispatch: this.dispatch,\n      emitter: this.emitter,\n      getCurrentData: this.getCurrentData\n    };\n    // needs to be after setThisContext\n    var _iterator7 = _createForOfIteratorHelper(optionsData.pluginHooks.contextInit),\n      _step7;\n    try {\n      for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {\n        var callback = _step7.value;\n        callback(calendarContext);\n      }\n      // NOT DRY\n    } catch (err) {\n      _iterator7.e(err);\n    } finally {\n      _iterator7.f();\n    }\n    var eventSources = initEventSources(optionsData.calendarOptions, dateProfile, calendarContext);\n    var initialState = {\n      dynamicOptionOverrides: dynamicOptionOverrides,\n      currentViewType: currentViewType,\n      currentDate: currentDate,\n      dateProfile: dateProfile,\n      businessHours: this.parseContextBusinessHours(calendarContext),\n      eventSources: eventSources,\n      eventUiBases: {},\n      eventStore: createEmptyEventStore(),\n      renderableEventStore: createEmptyEventStore(),\n      dateSelection: null,\n      eventSelection: '',\n      eventDrag: null,\n      eventResize: null,\n      selectionConfig: this.buildViewUiProps(calendarContext).selectionConfig\n    };\n    var contextAndState = Object.assign(Object.assign({}, calendarContext), initialState);\n    var _iterator8 = _createForOfIteratorHelper(optionsData.pluginHooks.reducers),\n      _step8;\n    try {\n      for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {\n        var reducer = _step8.value;\n        Object.assign(initialState, reducer(null, null, contextAndState));\n      }\n    } catch (err) {\n      _iterator8.e(err);\n    } finally {\n      _iterator8.f();\n    }\n    if (computeIsLoading(initialState, calendarContext)) {\n      this.emitter.trigger('loading', true); // NOT DRY\n    }\n\n    this.state = initialState;\n    this.updateData();\n    this.actionRunner.resume();\n  }\n  _createClass(CalendarDataManager, [{\n    key: \"resetOptions\",\n    value: function resetOptions(optionOverrides, changedOptionNames) {\n      var props = this.props;\n      if (changedOptionNames === undefined) {\n        props.optionOverrides = optionOverrides;\n      } else {\n        var _this$optionsForRefin;\n        props.optionOverrides = Object.assign(Object.assign({}, props.optionOverrides || {}), optionOverrides);\n        (_this$optionsForRefin = this.optionsForRefining).push.apply(_this$optionsForRefin, _toConsumableArray(changedOptionNames));\n      }\n      if (changedOptionNames === undefined || changedOptionNames.length) {\n        this.actionRunner.request({\n          type: 'NOTHING'\n        });\n      }\n    }\n  }, {\n    key: \"_handleAction\",\n    value: function _handleAction(action) {\n      var props = this.props,\n        state = this.state,\n        emitter = this.emitter;\n      var dynamicOptionOverrides = reduceDynamicOptionOverrides(state.dynamicOptionOverrides, action);\n      var optionsData = this.computeOptionsData(props.optionOverrides, dynamicOptionOverrides, props.calendarApi);\n      var currentViewType = reduceViewType(state.currentViewType, action);\n      var currentViewData = this.computeCurrentViewData(currentViewType, optionsData, props.optionOverrides, dynamicOptionOverrides);\n      // wire things up\n      // TODO: not DRY\n      props.calendarApi.currentDataManager = this;\n      emitter.setThisContext(props.calendarApi);\n      emitter.setOptions(currentViewData.options);\n      var calendarContext = {\n        dateEnv: optionsData.dateEnv,\n        options: optionsData.calendarOptions,\n        pluginHooks: optionsData.pluginHooks,\n        calendarApi: props.calendarApi,\n        dispatch: this.dispatch,\n        emitter: emitter,\n        getCurrentData: this.getCurrentData\n      };\n      var currentDate = state.currentDate,\n        dateProfile = state.dateProfile;\n      if (this.data && this.data.dateProfileGenerator !== currentViewData.dateProfileGenerator) {\n        // hack\n        dateProfile = currentViewData.dateProfileGenerator.build(currentDate);\n      }\n      currentDate = reduceCurrentDate(currentDate, action);\n      dateProfile = reduceDateProfile(dateProfile, action, currentDate, currentViewData.dateProfileGenerator);\n      if (action.type === 'PREV' ||\n      // TODO: move this logic into DateProfileGenerator\n      action.type === 'NEXT' ||\n      // \"\n      !rangeContainsMarker(dateProfile.currentRange, currentDate)) {\n        currentDate = dateProfile.currentRange.start;\n      }\n      var eventSources = reduceEventSources(state.eventSources, action, dateProfile, calendarContext);\n      var eventStore = reduceEventStore(state.eventStore, action, eventSources, dateProfile, calendarContext);\n      var isEventsLoading = computeEventSourcesLoading(eventSources); // BAD. also called in this func in computeIsLoading\n      var renderableEventStore = isEventsLoading && !currentViewData.options.progressiveEventRendering ? state.renderableEventStore || eventStore :\n      // try from previous state\n      eventStore;\n      var _this$buildViewUiProp = this.buildViewUiProps(calendarContext),\n        eventUiSingleBase = _this$buildViewUiProp.eventUiSingleBase,\n        selectionConfig = _this$buildViewUiProp.selectionConfig; // will memoize obj\n      var eventUiBySource = this.buildEventUiBySource(eventSources);\n      var eventUiBases = this.buildEventUiBases(renderableEventStore.defs, eventUiSingleBase, eventUiBySource);\n      var newState = {\n        dynamicOptionOverrides: dynamicOptionOverrides,\n        currentViewType: currentViewType,\n        currentDate: currentDate,\n        dateProfile: dateProfile,\n        eventSources: eventSources,\n        eventStore: eventStore,\n        renderableEventStore: renderableEventStore,\n        selectionConfig: selectionConfig,\n        eventUiBases: eventUiBases,\n        businessHours: this.parseContextBusinessHours(calendarContext),\n        dateSelection: reduceDateSelection(state.dateSelection, action),\n        eventSelection: reduceSelectedEvent(state.eventSelection, action),\n        eventDrag: reduceEventDrag(state.eventDrag, action),\n        eventResize: reduceEventResize(state.eventResize, action)\n      };\n      var contextAndState = Object.assign(Object.assign({}, calendarContext), newState);\n      var _iterator9 = _createForOfIteratorHelper(optionsData.pluginHooks.reducers),\n        _step9;\n      try {\n        for (_iterator9.s(); !(_step9 = _iterator9.n()).done;) {\n          var reducer = _step9.value;\n          Object.assign(newState, reducer(state, action, contextAndState)); // give the OLD state, for old value\n        }\n      } catch (err) {\n        _iterator9.e(err);\n      } finally {\n        _iterator9.f();\n      }\n      var wasLoading = computeIsLoading(state, calendarContext);\n      var isLoading = computeIsLoading(newState, calendarContext);\n      // TODO: use propSetHandlers in plugin system\n      if (!wasLoading && isLoading) {\n        emitter.trigger('loading', true);\n      } else if (wasLoading && !isLoading) {\n        emitter.trigger('loading', false);\n      }\n      this.state = newState;\n      if (props.onAction) {\n        props.onAction(action);\n      }\n    }\n  }, {\n    key: \"updateData\",\n    value: function updateData() {\n      var props = this.props,\n        state = this.state;\n      var oldData = this.data;\n      var optionsData = this.computeOptionsData(props.optionOverrides, state.dynamicOptionOverrides, props.calendarApi);\n      var currentViewData = this.computeCurrentViewData(state.currentViewType, optionsData, props.optionOverrides, state.dynamicOptionOverrides);\n      var data = this.data = Object.assign(Object.assign(Object.assign({\n        viewTitle: this.buildTitle(state.dateProfile, currentViewData.options, optionsData.dateEnv),\n        calendarApi: props.calendarApi,\n        dispatch: this.dispatch,\n        emitter: this.emitter,\n        getCurrentData: this.getCurrentData\n      }, optionsData), currentViewData), state);\n      var changeHandlers = optionsData.pluginHooks.optionChangeHandlers;\n      var oldCalendarOptions = oldData && oldData.calendarOptions;\n      var newCalendarOptions = optionsData.calendarOptions;\n      if (oldCalendarOptions && oldCalendarOptions !== newCalendarOptions) {\n        if (oldCalendarOptions.timeZone !== newCalendarOptions.timeZone) {\n          // hack\n          state.eventSources = data.eventSources = reduceEventSourcesNewTimeZone(data.eventSources, state.dateProfile, data);\n          state.eventStore = data.eventStore = rezoneEventStoreDates(data.eventStore, oldData.dateEnv, data.dateEnv);\n          state.renderableEventStore = data.renderableEventStore = rezoneEventStoreDates(data.renderableEventStore, oldData.dateEnv, data.dateEnv);\n        }\n        for (var optionName in changeHandlers) {\n          if (this.optionsForHandling.indexOf(optionName) !== -1 || oldCalendarOptions[optionName] !== newCalendarOptions[optionName]) {\n            changeHandlers[optionName](newCalendarOptions[optionName], data);\n          }\n        }\n      }\n      this.optionsForHandling = [];\n      if (props.onData) {\n        props.onData(data);\n      }\n    }\n  }, {\n    key: \"computeOptionsData\",\n    value: function computeOptionsData(optionOverrides, dynamicOptionOverrides, calendarApi) {\n      // TODO: blacklist options that are handled by optionChangeHandlers\n      if (!this.optionsForRefining.length && optionOverrides === this.stableOptionOverrides && dynamicOptionOverrides === this.stableDynamicOptionOverrides) {\n        return this.stableCalendarOptionsData;\n      }\n      var _this$processRawCalen = this.processRawCalendarOptions(optionOverrides, dynamicOptionOverrides),\n        refinedOptions = _this$processRawCalen.refinedOptions,\n        pluginHooks = _this$processRawCalen.pluginHooks,\n        localeDefaults = _this$processRawCalen.localeDefaults,\n        availableLocaleData = _this$processRawCalen.availableLocaleData,\n        extra = _this$processRawCalen.extra;\n      warnUnknownOptions(extra);\n      var dateEnv = this.buildDateEnv(refinedOptions.timeZone, refinedOptions.locale, refinedOptions.weekNumberCalculation, refinedOptions.firstDay, refinedOptions.weekText, pluginHooks, availableLocaleData, refinedOptions.defaultRangeSeparator);\n      var viewSpecs = this.buildViewSpecs(pluginHooks.views, this.stableOptionOverrides, this.stableDynamicOptionOverrides, localeDefaults);\n      var theme = this.buildTheme(refinedOptions, pluginHooks);\n      var toolbarConfig = this.parseToolbars(refinedOptions, this.stableOptionOverrides, theme, viewSpecs, calendarApi);\n      return this.stableCalendarOptionsData = {\n        calendarOptions: refinedOptions,\n        pluginHooks: pluginHooks,\n        dateEnv: dateEnv,\n        viewSpecs: viewSpecs,\n        theme: theme,\n        toolbarConfig: toolbarConfig,\n        localeDefaults: localeDefaults,\n        availableRawLocales: availableLocaleData.map\n      };\n    }\n    // always called from behind a memoizer\n  }, {\n    key: \"processRawCalendarOptions\",\n    value: function processRawCalendarOptions(optionOverrides, dynamicOptionOverrides) {\n      var _this$optionsForHandl;\n      var _mergeRawOptions = mergeRawOptions([BASE_OPTION_DEFAULTS, optionOverrides, dynamicOptionOverrides]),\n        locales = _mergeRawOptions.locales,\n        locale = _mergeRawOptions.locale;\n      var availableLocaleData = this.organizeRawLocales(locales);\n      var availableRawLocales = availableLocaleData.map;\n      var localeDefaults = this.buildLocale(locale || availableLocaleData.defaultCode, availableRawLocales).options;\n      var pluginHooks = this.buildPluginHooks(optionOverrides.plugins || [], globalPlugins);\n      var refiners = this.currentCalendarOptionsRefiners = Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({}, BASE_OPTION_REFINERS), CALENDAR_LISTENER_REFINERS), CALENDAR_OPTION_REFINERS), pluginHooks.listenerRefiners), pluginHooks.optionRefiners);\n      var extra = {};\n      var raw = mergeRawOptions([BASE_OPTION_DEFAULTS, localeDefaults, optionOverrides, dynamicOptionOverrides]);\n      var refined = {};\n      var currentRaw = this.currentCalendarOptionsInput;\n      var currentRefined = this.currentCalendarOptionsRefined;\n      var anyChanges = false;\n      for (var optionName in raw) {\n        if (this.optionsForRefining.indexOf(optionName) === -1 && (raw[optionName] === currentRaw[optionName] || COMPLEX_OPTION_COMPARATORS[optionName] && optionName in currentRaw && COMPLEX_OPTION_COMPARATORS[optionName](currentRaw[optionName], raw[optionName]))) {\n          refined[optionName] = currentRefined[optionName];\n        } else if (refiners[optionName]) {\n          refined[optionName] = refiners[optionName](raw[optionName]);\n          anyChanges = true;\n        } else {\n          extra[optionName] = currentRaw[optionName];\n        }\n      }\n      if (anyChanges) {\n        this.currentCalendarOptionsInput = raw;\n        this.currentCalendarOptionsRefined = refined;\n        this.stableOptionOverrides = optionOverrides;\n        this.stableDynamicOptionOverrides = dynamicOptionOverrides;\n      }\n      (_this$optionsForHandl = this.optionsForHandling).push.apply(_this$optionsForHandl, _toConsumableArray(this.optionsForRefining));\n      this.optionsForRefining = [];\n      return {\n        rawOptions: this.currentCalendarOptionsInput,\n        refinedOptions: this.currentCalendarOptionsRefined,\n        pluginHooks: pluginHooks,\n        availableLocaleData: availableLocaleData,\n        localeDefaults: localeDefaults,\n        extra: extra\n      };\n    }\n  }, {\n    key: \"_computeCurrentViewData\",\n    value: function _computeCurrentViewData(viewType, optionsData, optionOverrides, dynamicOptionOverrides) {\n      var viewSpec = optionsData.viewSpecs[viewType];\n      if (!viewSpec) {\n        throw new Error(\"viewType \\\"\".concat(viewType, \"\\\" is not available. Please make sure you've loaded all neccessary plugins\"));\n      }\n      var _this$processRawViewO = this.processRawViewOptions(viewSpec, optionsData.pluginHooks, optionsData.localeDefaults, optionOverrides, dynamicOptionOverrides),\n        refinedOptions = _this$processRawViewO.refinedOptions,\n        extra = _this$processRawViewO.extra;\n      warnUnknownOptions(extra);\n      var dateProfileGenerator = this.buildDateProfileGenerator({\n        dateProfileGeneratorClass: viewSpec.optionDefaults.dateProfileGeneratorClass,\n        duration: viewSpec.duration,\n        durationUnit: viewSpec.durationUnit,\n        usesMinMaxTime: viewSpec.optionDefaults.usesMinMaxTime,\n        dateEnv: optionsData.dateEnv,\n        calendarApi: this.props.calendarApi,\n        slotMinTime: refinedOptions.slotMinTime,\n        slotMaxTime: refinedOptions.slotMaxTime,\n        showNonCurrentDates: refinedOptions.showNonCurrentDates,\n        dayCount: refinedOptions.dayCount,\n        dateAlignment: refinedOptions.dateAlignment,\n        dateIncrement: refinedOptions.dateIncrement,\n        hiddenDays: refinedOptions.hiddenDays,\n        weekends: refinedOptions.weekends,\n        nowInput: refinedOptions.now,\n        validRangeInput: refinedOptions.validRange,\n        visibleRangeInput: refinedOptions.visibleRange,\n        fixedWeekCount: refinedOptions.fixedWeekCount\n      });\n      var viewApi = this.buildViewApi(viewType, this.getCurrentData, optionsData.dateEnv);\n      return {\n        viewSpec: viewSpec,\n        options: refinedOptions,\n        dateProfileGenerator: dateProfileGenerator,\n        viewApi: viewApi\n      };\n    }\n  }, {\n    key: \"processRawViewOptions\",\n    value: function processRawViewOptions(viewSpec, pluginHooks, localeDefaults, optionOverrides, dynamicOptionOverrides) {\n      var raw = mergeRawOptions([BASE_OPTION_DEFAULTS, viewSpec.optionDefaults, localeDefaults, optionOverrides, viewSpec.optionOverrides, dynamicOptionOverrides]);\n      var refiners = Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({}, BASE_OPTION_REFINERS), CALENDAR_LISTENER_REFINERS), CALENDAR_OPTION_REFINERS), VIEW_OPTION_REFINERS), pluginHooks.listenerRefiners), pluginHooks.optionRefiners);\n      var refined = {};\n      var currentRaw = this.currentViewOptionsInput;\n      var currentRefined = this.currentViewOptionsRefined;\n      var anyChanges = false;\n      var extra = {};\n      for (var optionName in raw) {\n        if (raw[optionName] === currentRaw[optionName] || COMPLEX_OPTION_COMPARATORS[optionName] && COMPLEX_OPTION_COMPARATORS[optionName](raw[optionName], currentRaw[optionName])) {\n          refined[optionName] = currentRefined[optionName];\n        } else {\n          if (raw[optionName] === this.currentCalendarOptionsInput[optionName] || COMPLEX_OPTION_COMPARATORS[optionName] && COMPLEX_OPTION_COMPARATORS[optionName](raw[optionName], this.currentCalendarOptionsInput[optionName])) {\n            if (optionName in this.currentCalendarOptionsRefined) {\n              // might be an \"extra\" prop\n              refined[optionName] = this.currentCalendarOptionsRefined[optionName];\n            }\n          } else if (refiners[optionName]) {\n            refined[optionName] = refiners[optionName](raw[optionName]);\n          } else {\n            extra[optionName] = raw[optionName];\n          }\n          anyChanges = true;\n        }\n      }\n      if (anyChanges) {\n        this.currentViewOptionsInput = raw;\n        this.currentViewOptionsRefined = refined;\n      }\n      return {\n        rawOptions: this.currentViewOptionsInput,\n        refinedOptions: this.currentViewOptionsRefined,\n        extra: extra\n      };\n    }\n  }]);\n  return CalendarDataManager;\n}();\nfunction buildDateEnv$1(timeZone, explicitLocale, weekNumberCalculation, firstDay, weekText, pluginHooks, availableLocaleData, defaultSeparator) {\n  var locale = buildLocale(explicitLocale || availableLocaleData.defaultCode, availableLocaleData.map);\n  return new DateEnv({\n    calendarSystem: 'gregory',\n    timeZone: timeZone,\n    namedTimeZoneImpl: pluginHooks.namedTimeZonedImpl,\n    locale: locale,\n    weekNumberCalculation: weekNumberCalculation,\n    firstDay: firstDay,\n    weekText: weekText,\n    cmdFormatter: pluginHooks.cmdFormatter,\n    defaultSeparator: defaultSeparator\n  });\n}\nfunction buildTheme(options, pluginHooks) {\n  var ThemeClass = pluginHooks.themeClasses[options.themeSystem] || StandardTheme;\n  return new ThemeClass(options);\n}\nfunction buildDateProfileGenerator(props) {\n  var DateProfileGeneratorClass = props.dateProfileGeneratorClass || DateProfileGenerator;\n  return new DateProfileGeneratorClass(props);\n}\nfunction buildViewApi(type, getCurrentData, dateEnv) {\n  return new ViewImpl(type, getCurrentData, dateEnv);\n}\nfunction buildEventUiBySource(eventSources) {\n  return mapHash(eventSources, function (eventSource) {\n    return eventSource.ui;\n  });\n}\nfunction buildEventUiBases(eventDefs, eventUiSingleBase, eventUiBySource) {\n  var eventUiBases = {\n    '': eventUiSingleBase\n  };\n  for (var defId in eventDefs) {\n    var def = eventDefs[defId];\n    if (def.sourceId && eventUiBySource[def.sourceId]) {\n      eventUiBases[defId] = eventUiBySource[def.sourceId];\n    }\n  }\n  return eventUiBases;\n}\nfunction buildViewUiProps(calendarContext) {\n  var options = calendarContext.options;\n  return {\n    eventUiSingleBase: createEventUi({\n      display: options.eventDisplay,\n      editable: options.editable,\n      startEditable: options.eventStartEditable,\n      durationEditable: options.eventDurationEditable,\n      constraint: options.eventConstraint,\n      overlap: typeof options.eventOverlap === 'boolean' ? options.eventOverlap : undefined,\n      allow: options.eventAllow,\n      backgroundColor: options.eventBackgroundColor,\n      borderColor: options.eventBorderColor,\n      textColor: options.eventTextColor,\n      color: options.eventColor\n      // classNames: options.eventClassNames // render hook will handle this\n    }, calendarContext),\n    selectionConfig: createEventUi({\n      constraint: options.selectConstraint,\n      overlap: typeof options.selectOverlap === 'boolean' ? options.selectOverlap : undefined,\n      allow: options.selectAllow\n    }, calendarContext)\n  };\n}\nfunction computeIsLoading(state, context) {\n  var _iterator10 = _createForOfIteratorHelper(context.pluginHooks.isLoadingFuncs),\n    _step10;\n  try {\n    for (_iterator10.s(); !(_step10 = _iterator10.n()).done;) {\n      var isLoadingFunc = _step10.value;\n      if (isLoadingFunc(state)) {\n        return true;\n      }\n    }\n  } catch (err) {\n    _iterator10.e(err);\n  } finally {\n    _iterator10.f();\n  }\n  return false;\n}\nfunction parseContextBusinessHours(calendarContext) {\n  return parseBusinessHours(calendarContext.options.businessHours, calendarContext);\n}\nfunction warnUnknownOptions(options, viewName) {\n  for (var optionName in options) {\n    console.warn(\"Unknown option '\".concat(optionName, \"'\") + (viewName ? \" for view '\".concat(viewName, \"'\") : ''));\n  }\n}\nvar ToolbarSection = /*#__PURE__*/function (_BaseComponent) {\n  _inherits(ToolbarSection, _BaseComponent);\n  var _super2 = _createSuper(ToolbarSection);\n  function ToolbarSection() {\n    _classCallCheck(this, ToolbarSection);\n    return _super2.apply(this, arguments);\n  }\n  _createClass(ToolbarSection, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n      var children = this.props.widgetGroups.map(function (widgetGroup) {\n        return _this2.renderWidgetGroup(widgetGroup);\n      });\n      return createElement.apply(void 0, ['div', {\n        className: 'fc-toolbar-chunk'\n      }].concat(_toConsumableArray(children)));\n    }\n  }, {\n    key: \"renderWidgetGroup\",\n    value: function renderWidgetGroup(widgetGroup) {\n      var props = this.props;\n      var theme = this.context.theme;\n      var children = [];\n      var isOnlyButtons = true;\n      var _iterator11 = _createForOfIteratorHelper(widgetGroup),\n        _step11;\n      try {\n        for (_iterator11.s(); !(_step11 = _iterator11.n()).done;) {\n          var widget = _step11.value;\n          var buttonName = widget.buttonName,\n            buttonClick = widget.buttonClick,\n            buttonText = widget.buttonText,\n            buttonIcon = widget.buttonIcon,\n            buttonHint = widget.buttonHint;\n          if (buttonName === 'title') {\n            isOnlyButtons = false;\n            children.push(createElement(\"h2\", {\n              className: \"fc-toolbar-title\",\n              id: props.titleId\n            }, props.title));\n          } else {\n            var isPressed = buttonName === props.activeButton;\n            var isDisabled = !props.isTodayEnabled && buttonName === 'today' || !props.isPrevEnabled && buttonName === 'prev' || !props.isNextEnabled && buttonName === 'next';\n            var buttonClasses = [\"fc-\".concat(buttonName, \"-button\"), theme.getClass('button')];\n            if (isPressed) {\n              buttonClasses.push(theme.getClass('buttonActive'));\n            }\n            children.push(createElement(\"button\", {\n              type: \"button\",\n              title: typeof buttonHint === 'function' ? buttonHint(props.navUnit) : buttonHint,\n              disabled: isDisabled,\n              \"aria-pressed\": isPressed,\n              className: buttonClasses.join(' '),\n              onClick: buttonClick\n            }, buttonText || (buttonIcon ? createElement(\"span\", {\n              className: buttonIcon,\n              role: \"img\"\n            }) : '')));\n          }\n        }\n      } catch (err) {\n        _iterator11.e(err);\n      } finally {\n        _iterator11.f();\n      }\n      if (children.length > 1) {\n        var groupClassName = isOnlyButtons && theme.getClass('buttonGroup') || '';\n        return createElement.apply(void 0, ['div', {\n          className: groupClassName\n        }].concat(children));\n      }\n      return children[0];\n    }\n  }]);\n  return ToolbarSection;\n}(BaseComponent);\nvar Toolbar = /*#__PURE__*/function (_BaseComponent2) {\n  _inherits(Toolbar, _BaseComponent2);\n  var _super3 = _createSuper(Toolbar);\n  function Toolbar() {\n    _classCallCheck(this, Toolbar);\n    return _super3.apply(this, arguments);\n  }\n  _createClass(Toolbar, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n        model = _this$props.model,\n        extraClassName = _this$props.extraClassName;\n      var forceLtr = false;\n      var startContent;\n      var endContent;\n      var sectionWidgets = model.sectionWidgets;\n      var centerContent = sectionWidgets.center;\n      if (sectionWidgets.left) {\n        forceLtr = true;\n        startContent = sectionWidgets.left;\n      } else {\n        startContent = sectionWidgets.start;\n      }\n      if (sectionWidgets.right) {\n        forceLtr = true;\n        endContent = sectionWidgets.right;\n      } else {\n        endContent = sectionWidgets.end;\n      }\n      var classNames = [extraClassName || '', 'fc-toolbar', forceLtr ? 'fc-toolbar-ltr' : ''];\n      return createElement(\"div\", {\n        className: classNames.join(' ')\n      }, this.renderSection('start', startContent || []), this.renderSection('center', centerContent || []), this.renderSection('end', endContent || []));\n    }\n  }, {\n    key: \"renderSection\",\n    value: function renderSection(key, widgetGroups) {\n      var props = this.props;\n      return createElement(ToolbarSection, {\n        key: key,\n        widgetGroups: widgetGroups,\n        title: props.title,\n        navUnit: props.navUnit,\n        activeButton: props.activeButton,\n        isTodayEnabled: props.isTodayEnabled,\n        isPrevEnabled: props.isPrevEnabled,\n        isNextEnabled: props.isNextEnabled,\n        titleId: props.titleId\n      });\n    }\n  }]);\n  return Toolbar;\n}(BaseComponent);\nvar ViewHarness = /*#__PURE__*/function (_BaseComponent3) {\n  _inherits(ViewHarness, _BaseComponent3);\n  var _super4 = _createSuper(ViewHarness);\n  function ViewHarness() {\n    var _this3;\n    _classCallCheck(this, ViewHarness);\n    _this3 = _super4.apply(this, arguments);\n    _this3.state = {\n      availableWidth: null\n    };\n    _this3.handleEl = function (el) {\n      _this3.el = el;\n      setRef(_this3.props.elRef, el);\n      _this3.updateAvailableWidth();\n    };\n    _this3.handleResize = function () {\n      _this3.updateAvailableWidth();\n    };\n    return _this3;\n  }\n  _createClass(ViewHarness, [{\n    key: \"render\",\n    value: function render() {\n      var props = this.props,\n        state = this.state;\n      var aspectRatio = props.aspectRatio;\n      var classNames = ['fc-view-harness', aspectRatio || props.liquid || props.height ? 'fc-view-harness-active' // harness controls the height\n      : 'fc-view-harness-passive' // let the view do the height\n      ];\n\n      var height = '';\n      var paddingBottom = '';\n      if (aspectRatio) {\n        if (state.availableWidth !== null) {\n          height = state.availableWidth / aspectRatio;\n        } else {\n          // while waiting to know availableWidth, we can't set height to *zero*\n          // because will cause lots of unnecessary scrollbars within scrollgrid.\n          // BETTER: don't start rendering ANYTHING yet until we know container width\n          // NOTE: why not always use paddingBottom? Causes height oscillation (issue 5606)\n          paddingBottom = \"\".concat(1 / aspectRatio * 100, \"%\");\n        }\n      } else {\n        height = props.height || '';\n      }\n      return createElement(\"div\", {\n        \"aria-labelledby\": props.labeledById,\n        ref: this.handleEl,\n        className: classNames.join(' '),\n        style: {\n          height: height,\n          paddingBottom: paddingBottom\n        }\n      }, props.children);\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.context.addResizeHandler(this.handleResize);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.context.removeResizeHandler(this.handleResize);\n    }\n  }, {\n    key: \"updateAvailableWidth\",\n    value: function updateAvailableWidth() {\n      if (this.el &&\n      // needed. but why?\n      this.props.aspectRatio // aspectRatio is the only height setting that needs availableWidth\n      ) {\n        this.setState({\n          availableWidth: this.el.offsetWidth\n        });\n      }\n    }\n  }]);\n  return ViewHarness;\n}(BaseComponent);\n/*\nDetects when the user clicks on an event within a DateComponent\n*/\nvar EventClicking = /*#__PURE__*/function (_Interaction) {\n  _inherits(EventClicking, _Interaction);\n  var _super5 = _createSuper(EventClicking);\n  function EventClicking(settings) {\n    var _this4;\n    _classCallCheck(this, EventClicking);\n    _this4 = _super5.call(this, settings);\n    _this4.handleSegClick = function (ev, segEl) {\n      var _assertThisInitialize = _assertThisInitialized(_this4),\n        component = _assertThisInitialize.component;\n      var context = component.context;\n      var seg = getElSeg(segEl);\n      if (seg &&\n      // might be the <div> surrounding the more link\n      component.isValidSegDownEl(ev.target)) {\n        // our way to simulate a link click for elements that can't be <a> tags\n        // grab before trigger fired in case trigger trashes DOM thru rerendering\n        var hasUrlContainer = elementClosest(ev.target, '.fc-event-forced-url');\n        var url = hasUrlContainer ? hasUrlContainer.querySelector('a[href]').href : '';\n        context.emitter.trigger('eventClick', {\n          el: segEl,\n          event: new EventImpl(component.context, seg.eventRange.def, seg.eventRange.instance),\n          jsEvent: ev,\n          view: context.viewApi\n        });\n        if (url && !ev.defaultPrevented) {\n          window.location.href = url;\n        }\n      }\n    };\n    _this4.destroy = listenBySelector(settings.el, 'click', '.fc-event',\n    // on both fg and bg events\n    _this4.handleSegClick);\n    return _this4;\n  }\n  return _createClass(EventClicking);\n}(Interaction);\n/*\nTriggers events and adds/removes core classNames when the user's pointer\nenters/leaves event-elements of a component.\n*/\nvar EventHovering = /*#__PURE__*/function (_Interaction2) {\n  _inherits(EventHovering, _Interaction2);\n  var _super6 = _createSuper(EventHovering);\n  function EventHovering(settings) {\n    var _this5;\n    _classCallCheck(this, EventHovering);\n    _this5 = _super6.call(this, settings);\n    // for simulating an eventMouseLeave when the event el is destroyed while mouse is over it\n    _this5.handleEventElRemove = function (el) {\n      if (el === _this5.currentSegEl) {\n        _this5.handleSegLeave(null, _this5.currentSegEl);\n      }\n    };\n    _this5.handleSegEnter = function (ev, segEl) {\n      if (getElSeg(segEl)) {\n        // TODO: better way to make sure not hovering over more+ link or its wrapper\n        _this5.currentSegEl = segEl;\n        _this5.triggerEvent('eventMouseEnter', ev, segEl);\n      }\n    };\n    _this5.handleSegLeave = function (ev, segEl) {\n      if (_this5.currentSegEl) {\n        _this5.currentSegEl = null;\n        _this5.triggerEvent('eventMouseLeave', ev, segEl);\n      }\n    };\n    _this5.removeHoverListeners = listenToHoverBySelector(settings.el, '.fc-event',\n    // on both fg and bg events\n    _this5.handleSegEnter, _this5.handleSegLeave);\n    return _this5;\n  }\n  _createClass(EventHovering, [{\n    key: \"destroy\",\n    value: function destroy() {\n      this.removeHoverListeners();\n    }\n  }, {\n    key: \"triggerEvent\",\n    value: function triggerEvent(publicEvName, ev, segEl) {\n      var component = this.component;\n      var context = component.context;\n      var seg = getElSeg(segEl);\n      if (!ev || component.isValidSegDownEl(ev.target)) {\n        context.emitter.trigger(publicEvName, {\n          el: segEl,\n          event: new EventImpl(context, seg.eventRange.def, seg.eventRange.instance),\n          jsEvent: ev,\n          view: context.viewApi\n        });\n      }\n    }\n  }]);\n  return EventHovering;\n}(Interaction);\nvar CalendarContent = /*#__PURE__*/function (_PureComponent) {\n  _inherits(CalendarContent, _PureComponent);\n  var _super7 = _createSuper(CalendarContent);\n  function CalendarContent() {\n    var _this6;\n    _classCallCheck(this, CalendarContent);\n    _this6 = _super7.apply(this, arguments);\n    _this6.buildViewContext = memoize(buildViewContext);\n    _this6.buildViewPropTransformers = memoize(buildViewPropTransformers);\n    _this6.buildToolbarProps = memoize(buildToolbarProps);\n    _this6.headerRef = createRef();\n    _this6.footerRef = createRef();\n    _this6.interactionsStore = {};\n    // eslint-disable-next-line\n    _this6.state = {\n      viewLabelId: getUniqueDomId()\n    };\n    // Component Registration\n    // -----------------------------------------------------------------------------------------------------------------\n    _this6.registerInteractiveComponent = function (component, settingsInput) {\n      var settings = parseInteractionSettings(component, settingsInput);\n      var DEFAULT_INTERACTIONS = [EventClicking, EventHovering];\n      var interactionClasses = DEFAULT_INTERACTIONS.concat(_this6.props.pluginHooks.componentInteractions);\n      var interactions = interactionClasses.map(function (TheInteractionClass) {\n        return new TheInteractionClass(settings);\n      });\n      _this6.interactionsStore[component.uid] = interactions;\n      interactionSettingsStore[component.uid] = settings;\n    };\n    _this6.unregisterInteractiveComponent = function (component) {\n      var listeners = _this6.interactionsStore[component.uid];\n      if (listeners) {\n        var _iterator12 = _createForOfIteratorHelper(listeners),\n          _step12;\n        try {\n          for (_iterator12.s(); !(_step12 = _iterator12.n()).done;) {\n            var listener = _step12.value;\n            listener.destroy();\n          }\n        } catch (err) {\n          _iterator12.e(err);\n        } finally {\n          _iterator12.f();\n        }\n        delete _this6.interactionsStore[component.uid];\n      }\n      delete interactionSettingsStore[component.uid];\n    };\n    // Resizing\n    // -----------------------------------------------------------------------------------------------------------------\n    _this6.resizeRunner = new DelayedRunner(function () {\n      _this6.props.emitter.trigger('_resize', true); // should window resizes be considered \"forced\" ?\n      _this6.props.emitter.trigger('windowResize', {\n        view: _this6.props.viewApi\n      });\n    });\n    _this6.handleWindowResize = function (ev) {\n      var options = _this6.props.options;\n      if (options.handleWindowResize && ev.target === window // avoid jqui events\n      ) {\n        _this6.resizeRunner.request(options.windowResizeDelay);\n      }\n    };\n    return _this6;\n  }\n  /*\n  renders INSIDE of an outer div\n  */\n  _createClass(CalendarContent, [{\n    key: \"render\",\n    value: function render() {\n      var props = this.props;\n      var toolbarConfig = props.toolbarConfig,\n        options = props.options;\n      var toolbarProps = this.buildToolbarProps(props.viewSpec, props.dateProfile, props.dateProfileGenerator, props.currentDate, getNow(props.options.now, props.dateEnv),\n      // TODO: use NowTimer????\n      props.viewTitle);\n      var viewVGrow = false;\n      var viewHeight = '';\n      var viewAspectRatio;\n      if (props.isHeightAuto || props.forPrint) {\n        viewHeight = '';\n      } else if (options.height != null) {\n        viewVGrow = true;\n      } else if (options.contentHeight != null) {\n        viewHeight = options.contentHeight;\n      } else {\n        viewAspectRatio = Math.max(options.aspectRatio, 0.5); // prevent from getting too tall\n      }\n\n      var viewContext = this.buildViewContext(props.viewSpec, props.viewApi, props.options, props.dateProfileGenerator, props.dateEnv, props.theme, props.pluginHooks, props.dispatch, props.getCurrentData, props.emitter, props.calendarApi, this.registerInteractiveComponent, this.unregisterInteractiveComponent);\n      var viewLabelId = toolbarConfig.header && toolbarConfig.header.hasTitle ? this.state.viewLabelId : undefined;\n      return createElement(ViewContextType.Provider, {\n        value: viewContext\n      }, toolbarConfig.header && createElement(Toolbar, Object.assign({\n        ref: this.headerRef,\n        extraClassName: \"fc-header-toolbar\",\n        model: toolbarConfig.header,\n        titleId: viewLabelId\n      }, toolbarProps)), createElement(ViewHarness, {\n        liquid: viewVGrow,\n        height: viewHeight,\n        aspectRatio: viewAspectRatio,\n        labeledById: viewLabelId\n      }, this.renderView(props), this.buildAppendContent()), toolbarConfig.footer && createElement(Toolbar, Object.assign({\n        ref: this.footerRef,\n        extraClassName: \"fc-footer-toolbar\",\n        model: toolbarConfig.footer,\n        titleId: \"\"\n      }, toolbarProps)));\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var props = this.props;\n      this.calendarInteractions = props.pluginHooks.calendarInteractions.map(function (CalendarInteractionClass) {\n        return new CalendarInteractionClass(props);\n      });\n      window.addEventListener('resize', this.handleWindowResize);\n      var propSetHandlers = props.pluginHooks.propSetHandlers;\n      for (var propName in propSetHandlers) {\n        propSetHandlers[propName](props[propName], props);\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var props = this.props;\n      var propSetHandlers = props.pluginHooks.propSetHandlers;\n      for (var propName in propSetHandlers) {\n        if (props[propName] !== prevProps[propName]) {\n          propSetHandlers[propName](props[propName], props);\n        }\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      window.removeEventListener('resize', this.handleWindowResize);\n      this.resizeRunner.clear();\n      var _iterator13 = _createForOfIteratorHelper(this.calendarInteractions),\n        _step13;\n      try {\n        for (_iterator13.s(); !(_step13 = _iterator13.n()).done;) {\n          var interaction = _step13.value;\n          interaction.destroy();\n        }\n      } catch (err) {\n        _iterator13.e(err);\n      } finally {\n        _iterator13.f();\n      }\n      this.props.emitter.trigger('_unmount');\n    }\n  }, {\n    key: \"buildAppendContent\",\n    value: function buildAppendContent() {\n      var props = this.props;\n      var children = props.pluginHooks.viewContainerAppends.map(function (buildAppendContent) {\n        return buildAppendContent(props);\n      });\n      return createElement.apply(void 0, [Fragment, {}].concat(_toConsumableArray(children)));\n    }\n  }, {\n    key: \"renderView\",\n    value: function renderView(props) {\n      var pluginHooks = props.pluginHooks;\n      var viewSpec = props.viewSpec;\n      var viewProps = {\n        dateProfile: props.dateProfile,\n        businessHours: props.businessHours,\n        eventStore: props.renderableEventStore,\n        eventUiBases: props.eventUiBases,\n        dateSelection: props.dateSelection,\n        eventSelection: props.eventSelection,\n        eventDrag: props.eventDrag,\n        eventResize: props.eventResize,\n        isHeightAuto: props.isHeightAuto,\n        forPrint: props.forPrint\n      };\n      var transformers = this.buildViewPropTransformers(pluginHooks.viewPropsTransformers);\n      var _iterator14 = _createForOfIteratorHelper(transformers),\n        _step14;\n      try {\n        for (_iterator14.s(); !(_step14 = _iterator14.n()).done;) {\n          var transformer = _step14.value;\n          Object.assign(viewProps, transformer.transform(viewProps, props));\n        }\n      } catch (err) {\n        _iterator14.e(err);\n      } finally {\n        _iterator14.f();\n      }\n      var ViewComponent = viewSpec.component;\n      return createElement(ViewComponent, Object.assign({}, viewProps));\n    }\n  }]);\n  return CalendarContent;\n}(PureComponent);\nfunction buildToolbarProps(viewSpec, dateProfile, dateProfileGenerator, currentDate, now, title) {\n  // don't force any date-profiles to valid date profiles (the `false`) so that we can tell if it's invalid\n  var todayInfo = dateProfileGenerator.build(now, undefined, false); // TODO: need `undefined` or else INFINITE LOOP for some reason\n  var prevInfo = dateProfileGenerator.buildPrev(dateProfile, currentDate, false);\n  var nextInfo = dateProfileGenerator.buildNext(dateProfile, currentDate, false);\n  return {\n    title: title,\n    activeButton: viewSpec.type,\n    navUnit: viewSpec.singleUnit,\n    isTodayEnabled: todayInfo.isValid && !rangeContainsMarker(dateProfile.currentRange, now),\n    isPrevEnabled: prevInfo.isValid,\n    isNextEnabled: nextInfo.isValid\n  };\n}\n// Plugin\n// -----------------------------------------------------------------------------------------------------------------\nfunction buildViewPropTransformers(theClasses) {\n  return theClasses.map(function (TheClass) {\n    return new TheClass();\n  });\n}\nvar Calendar = /*#__PURE__*/function (_CalendarImpl) {\n  _inherits(Calendar, _CalendarImpl);\n  var _super8 = _createSuper(Calendar);\n  function Calendar(el) {\n    var _this7;\n    var optionOverrides = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    _classCallCheck(this, Calendar);\n    _this7 = _super8.call(this);\n    _this7.isRendering = false;\n    _this7.isRendered = false;\n    _this7.currentClassNames = [];\n    _this7.customContentRenderId = 0;\n    _this7.handleAction = function (action) {\n      // actions we know we want to render immediately\n      switch (action.type) {\n        case 'SET_EVENT_DRAG':\n        case 'SET_EVENT_RESIZE':\n          _this7.renderRunner.tryDrain();\n      }\n    };\n    _this7.handleData = function (data) {\n      _this7.currentData = data;\n      _this7.renderRunner.request(data.calendarOptions.rerenderDelay);\n    };\n    _this7.handleRenderRequest = function () {\n      if (_this7.isRendering) {\n        _this7.isRendered = true;\n        var _assertThisInitialize2 = _assertThisInitialized(_this7),\n          currentData = _assertThisInitialize2.currentData;\n        flushSync(function () {\n          render(createElement(CalendarRoot, {\n            options: currentData.calendarOptions,\n            theme: currentData.theme,\n            emitter: currentData.emitter\n          }, function (classNames, height, isHeightAuto, forPrint) {\n            _this7.setClassNames(classNames);\n            _this7.setHeight(height);\n            return createElement(RenderId.Provider, {\n              value: _this7.customContentRenderId\n            }, createElement(CalendarContent, Object.assign({\n              isHeightAuto: isHeightAuto,\n              forPrint: forPrint\n            }, currentData)));\n          }), _this7.el);\n        });\n      } else if (_this7.isRendered) {\n        _this7.isRendered = false;\n        render(null, _this7.el);\n        _this7.setClassNames([]);\n        _this7.setHeight('');\n      }\n    };\n    ensureElHasStyles(el);\n    _this7.el = el;\n    _this7.renderRunner = new DelayedRunner(_this7.handleRenderRequest);\n    new CalendarDataManager({\n      optionOverrides: optionOverrides,\n      calendarApi: _assertThisInitialized(_this7),\n      onAction: _this7.handleAction,\n      onData: _this7.handleData\n    });\n    return _this7;\n  }\n  _createClass(Calendar, [{\n    key: \"render\",\n    value: function render() {\n      var wasRendering = this.isRendering;\n      if (!wasRendering) {\n        this.isRendering = true;\n      } else {\n        this.customContentRenderId += 1;\n      }\n      this.renderRunner.request();\n      if (wasRendering) {\n        this.updateSize();\n      }\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      if (this.isRendering) {\n        this.isRendering = false;\n        this.renderRunner.request();\n      }\n    }\n  }, {\n    key: \"updateSize\",\n    value: function updateSize() {\n      var _this8 = this;\n      flushSync(function () {\n        _get(_getPrototypeOf(Calendar.prototype), \"updateSize\", _this8).call(_this8);\n      });\n    }\n  }, {\n    key: \"batchRendering\",\n    value: function batchRendering(func) {\n      this.renderRunner.pause('batchRendering');\n      func();\n      this.renderRunner.resume('batchRendering');\n    }\n  }, {\n    key: \"pauseRendering\",\n    value: function pauseRendering() {\n      this.renderRunner.pause('pauseRendering');\n    }\n  }, {\n    key: \"resumeRendering\",\n    value: function resumeRendering() {\n      this.renderRunner.resume('pauseRendering', true);\n    }\n  }, {\n    key: \"resetOptions\",\n    value: function resetOptions(optionOverrides, changedOptionNames) {\n      this.currentDataManager.resetOptions(optionOverrides, changedOptionNames);\n    }\n  }, {\n    key: \"setClassNames\",\n    value: function setClassNames(classNames) {\n      if (!isArraysEqual(classNames, this.currentClassNames)) {\n        var classList = this.el.classList;\n        var _iterator15 = _createForOfIteratorHelper(this.currentClassNames),\n          _step15;\n        try {\n          for (_iterator15.s(); !(_step15 = _iterator15.n()).done;) {\n            var className = _step15.value;\n            classList.remove(className);\n          }\n        } catch (err) {\n          _iterator15.e(err);\n        } finally {\n          _iterator15.f();\n        }\n        var _iterator16 = _createForOfIteratorHelper(classNames),\n          _step16;\n        try {\n          for (_iterator16.s(); !(_step16 = _iterator16.n()).done;) {\n            var _className = _step16.value;\n            classList.add(_className);\n          }\n        } catch (err) {\n          _iterator16.e(err);\n        } finally {\n          _iterator16.f();\n        }\n        this.currentClassNames = classNames;\n      }\n    }\n  }, {\n    key: \"setHeight\",\n    value: function setHeight(height) {\n      applyStyleProp(this.el, 'height', height);\n    }\n  }]);\n  return Calendar;\n}(CalendarImpl);\nfunction formatDate(dateInput) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var dateEnv = buildDateEnv(options);\n  var formatter = createFormatter(options);\n  var dateMeta = dateEnv.createMarkerMeta(dateInput);\n  if (!dateMeta) {\n    // TODO: warning?\n    return '';\n  }\n  return dateEnv.format(dateMeta.marker, formatter, {\n    forcedTzo: dateMeta.forcedTzo\n  });\n}\nfunction formatRange(startInput, endInput, options) {\n  var dateEnv = buildDateEnv(typeof options === 'object' && options ? options : {}); // pass in if non-null object\n  var formatter = createFormatter(options);\n  var startMeta = dateEnv.createMarkerMeta(startInput);\n  var endMeta = dateEnv.createMarkerMeta(endInput);\n  if (!startMeta || !endMeta) {\n    // TODO: warning?\n    return '';\n  }\n  return dateEnv.formatRange(startMeta.marker, endMeta.marker, formatter, {\n    forcedStartTzo: startMeta.forcedTzo,\n    forcedEndTzo: endMeta.forcedTzo,\n    isEndExclusive: options.isEndExclusive,\n    defaultSeparator: BASE_OPTION_DEFAULTS.defaultRangeSeparator\n  });\n}\n// TODO: more DRY and optimized\nfunction buildDateEnv(settings) {\n  var locale = buildLocale(settings.locale || 'en', organizeRawLocales([]).map); // TODO: don't hardcode 'en' everywhere\n  return new DateEnv(Object.assign(Object.assign({\n    timeZone: BASE_OPTION_DEFAULTS.timeZone,\n    calendarSystem: 'gregory'\n  }, settings), {\n    locale: locale\n  }));\n}\n\n// HELPERS\n/*\nif nextDayThreshold is specified, slicing is done in an all-day fashion.\nyou can get nextDayThreshold from context.nextDayThreshold\n*/\nfunction sliceEvents(props, allDay) {\n  return sliceEventStore(props.eventStore, props.eventUiBases, props.dateProfile.activeRange, allDay ? props.nextDayThreshold : null).fg;\n}\nvar version = '6.1.15';\nexport { Calendar, createPlugin, formatDate, formatRange, globalLocales, globalPlugins, sliceEvents, version };","map":{"version":3,"names":["m","mergeProps","g","guid","i","isArraysEqual","T","Theme","a","mapHash","B","BaseComponent","V","ViewContextType","C","ContentContainer","b","buildViewClassNames","c","greatestDurationDenominator","d","createDuration","e","BASE_OPTION_DEFAULTS","f","arrayToHash","h","filterHash","j","buildEventSourceRefiners","p","parseEventSource","k","formatWithOrdinals","u","unpromisify","l","buildRangeApiWithTimeZone","n","identity","r","requestJson","s","subtractDurations","o","intersectRanges","q","startOfDay","t","addDays","v","hashValuesToArray","w","buildEventApis","D","DelayedRunner","x","createFormatter","y","diffWholeDays","z","memoize","A","memoizeObjArg","E","isPropsEqual","F","Emitter","G","getInitialDate","H","rangeContainsMarker","I","createEmptyEventStore","J","reduceCurrentDate","K","reduceEventStore","L","rezoneEventStoreDates","M","mergeRawOptions","N","BASE_OPTION_REFINERS","O","CALENDAR_LISTENER_REFINERS","P","CALENDAR_OPTION_REFINERS","Q","COMPLEX_OPTION_COMPARATORS","R","VIEW_OPTION_REFINERS","S","DateEnv","U","DateProfileGenerator","W","createEventUi","X","parseBusinessHours","Y","setRef","Z","Interaction","_","getElSeg","$","elementClosest","a0","EventImpl","a1","listenBySelector","a2","listenToHoverBySelector","a3","PureComponent","a4","buildViewContext","a5","getUniqueDomId","a6","parseInteractionSettings","a7","interactionSettingsStore","a8","getNow","a9","CalendarImpl","aa","flushSync","ab","CalendarRoot","ac","RenderId","ad","ensureElHasStyles","ae","applyStyleProp","af","sliceEventStore","ag","JsonRequestError","createElement","createRef","Fragment","render","globalLocales","MINIMAL_RAW_EN_LOCALE","code","week","dow","doy","direction","buttonText","prev","next","prevYear","nextYear","year","today","month","day","list","weekText","weekTextLong","closeHint","timeHint","eventHint","allDayText","moreLinkText","noEventsText","RAW_EN_LOCALE","Object","assign","buttonHints","unit","concat","viewHint","navLinkHint","moreLinkHint","eventCnt","organizeRawLocales","explicitRawLocales","defaultCode","length","allRawLocales","rawLocaleMap","en","_iterator","_createForOfIteratorHelper","_step","done","rawLocale","value","err","map","buildLocale","inputSingular","available","Array","isArray","parseLocale","queryLocale","codeArg","codes","raw","queryRawLocale","parts","toLocaleLowerCase","split","simpleId","slice","join","merged","simpleNumberFormat","Intl","NumberFormat","options","createPlugin","input","id","name","premiumReleaseDate","Date","undefined","deps","reducers","isLoadingFuncs","contextInit","eventRefiners","eventDefMemberAdders","eventSourceRefiners","isDraggableTransformers","eventDragMutationMassagers","eventDefMutationAppliers","dateSelectionTransformers","datePointTransforms","dateSpanTransforms","views","viewPropsTransformers","isPropsValid","externalDefTransforms","viewContainerAppends","eventDropTransformers","componentInteractions","calendarInteractions","themeClasses","eventSourceDefs","cmdFormatter","recurringTypes","namedTimeZonedImpl","initialView","elementDraggingImpl","optionChangeHandlers","scrollGridImpl","listenerRefiners","optionRefiners","propSetHandlers","buildPluginHooks","pluginDefs","globalDefs","currentPluginIds","hooks","addDefs","defs","_iterator2","_step2","def","pluginName","currentId","combineHooks","console","warn","buildBuildPluginHooks","currentOverrideDefs","currentGlobalDefs","currentHooks","overrideDefs","hooks0","hooks1","compareOptionalDates","date0","date1","Math","max","valueOf","StandardTheme","_Theme","_inherits","_super","_createSuper","_classCallCheck","apply","arguments","_createClass","prototype","classes","root","tableCellShaded","buttonGroup","button","buttonActive","baseIconClass","iconClasses","close","rtlIconClasses","iconOverrideOption","iconOverrideCustomButtonOption","iconOverridePrefix","compileViewDefs","defaultConfigs","overrideConfigs","hash","viewType","ensureViewDef","viewDef","buildViewDef","defaultConfig","overrideConfig","queryProp","theComponent","superType","superDef","Error","component","type","defaults","rawOptions","overrides","parseViewConfigs","inputs","parseViewConfig","content","createViewHookComponent","viewProps","Consumer","context","elTag","elClasses","viewSpec","renderProps","nextDayThreshold","generatorName","customGenerator","classNameGenerator","classNames","didMount","willUnmount","buildViewSpecs","defaultInputs","optionOverrides","dynamicOptionOverrides","localeDefaults","viewDefs","buildViewSpec","durationInput","duration","durationUnit","singleUnit","singleUnitOverrides","createDurationCached","denom","queryButtonText","optionsSubset","buttonTextMap","buttonTextKey","queryButtonTitle","buttonKey","optionDefaults","buttonTextOverride","buttonTextDefault","buttonTitleOverride","buttonHint","buttonTitleDefault","durationInputMap","json","JSON","stringify","res","reduceViewType","action","reduceDynamicOptionOverrides","_defineProperty","optionName","rawOptionValue","reduceDateProfile","currentDateProfile","currentDate","dateProfileGenerator","dp","build","dateMarker","buildPrev","isValid","buildNext","initEventSources","calendarOptions","dateProfile","activeRange","addSources","parseInitialSources","reduceEventSources","eventSources","sources","removeSource","sourceId","fetchDirtySources","fetchSourcesByIds","sourceIds","excludeStaticSources","isRefetch","receiveResponse","fetchId","fetchRange","reduceEventSourcesNewTimeZone","computeEventSourcesLoading","isFetching","eventSourceHash","_iterator3","_step3","source","eventSource","sourceHash","isSourceDirty","doesSourceNeedRange","latestFetchId","lazyFetching","start","end","prevSources","sourceIdHash","nextSources","fetchSource","calendarApi","sourceDef","pluginHooks","sourceDefId","fetch","range","rawEvents","eventSourceSuccess","call","response","success","dispatch","error","errorHandled","eventSourceFailure","failure","message","refiners","rawSources","initialEvents","unshift","events","_iterator4","_step4","rawSource","push","ignoreRange","reduceDateSelection","currentSelection","selection","reduceSelectedEvent","currentInstanceId","eventInstanceId","reduceEventDrag","currentDrag","newDrag","state","affectedEvents","mutatedEvents","isEvent","reduceEventResize","currentResize","newResize","parseToolbars","calendarOptionOverrides","theme","viewSpecs","header","headerToolbar","parseToolbar","footer","footerToolbar","sectionStrHash","sectionWidgets","viewsWithButtons","hasTitle","sectionName","sectionStr","sectionRes","parseSection","widgets","_toConsumableArray","isRtl","calendarCustomButtons","customButtons","calendarButtonTextOverrides","calendarButtonText","calendarButtonHintOverrides","calendarButtonHints","sectionSubstrs","buttonGroupStr","buttonName","customButtonProps","buttonClick","buttonIcon","ev","click","target","getCustomButtonIconClass","getIconClass","text","hint","changeView","textFallback","prevOrNext","navUnit","ViewImpl","getCurrentData","dateEnv","key","get","viewTitle","toDate","currentRange","getOption","eventSourceDef$2","parseMeta","refined","arg","successCallback","meta","arrayEventSourcePlugin","eventSourceDef$1","errorCallback","func","bind","funcEventSourcePlugin","JSON_FEED_EVENT_SOURCE_REFINERS","method","String","extraParams","startParam","endParam","timeZoneParam","eventSourceDef","url","format","toUpperCase","requestParams","buildRequestParams","then","_ref","_ref2","_slicedToArray","jsonFeedEventSourcePlugin","customRequestParams","params","formatIso","timeZone","SIMPLE_RECURRING_REFINERS","daysOfWeek","startTime","endTime","startRecur","endRecur","recurring","parse","recurringData","createMarker","allDayGuess","Boolean","typeData","expand","framingRange","clippedFramingRange","expandRanges","simpleRecurringEventsPlugin","dowHash","dayMarker","endMarker","instanceStarts","instanceStart","getUTCDay","add","changeHandlerPlugin","handleEventSources","unfoundSources","_raw","newInputs","_iterator5","_step5","inputFound","splice","_iterator6","_step6","unfoundSource","_i","_newInputs","newInput","addEventSource","handleDateProfile","emitter","trigger","view","viewApi","handleEventStore","eventStore","hasHandlers","globalPlugins","TaskRunner","runTaskOption","drainedOption","queue","delayedRunner","drain","request","task","delay","pause","scope","resume","force","completedTasks","shift","runTask","drained","buildTitle","viewOptions","test","currentRangeUnit","formatRange","titleFormat","buildTitleFormat","isEndExclusive","isRangeAllDay","defaultSeparator","titleRangeSeparator","days","CalendarDataManager","props","_this","computeCurrentViewData","_computeCurrentViewData","buildDateEnv","buildDateEnv$1","buildTheme","buildDateProfileGenerator","buildViewApi","buildViewUiProps","buildEventUiBySource","buildEventUiBases","parseContextBusinessHours","actionRunner","_handleAction","updateData","currentCalendarOptionsInput","currentCalendarOptionsRefined","currentViewOptionsInput","currentViewOptionsRefined","currentCalendarOptionsRefiners","optionsForRefining","optionsForHandling","data","optionsData","computeOptionsData","currentViewType","currentViewData","currentDataManager","setThisContext","setOptions","calendarContext","_iterator7","_step7","callback","initialState","businessHours","eventUiBases","renderableEventStore","dateSelection","eventSelection","eventDrag","eventResize","selectionConfig","contextAndState","_iterator8","_step8","reducer","computeIsLoading","resetOptions","changedOptionNames","_this$optionsForRefin","isEventsLoading","progressiveEventRendering","_this$buildViewUiProp","eventUiSingleBase","eventUiBySource","newState","_iterator9","_step9","wasLoading","isLoading","onAction","oldData","changeHandlers","oldCalendarOptions","newCalendarOptions","indexOf","onData","stableOptionOverrides","stableDynamicOptionOverrides","stableCalendarOptionsData","_this$processRawCalen","processRawCalendarOptions","refinedOptions","availableLocaleData","extra","warnUnknownOptions","locale","weekNumberCalculation","firstDay","defaultRangeSeparator","toolbarConfig","availableRawLocales","_this$optionsForHandl","_mergeRawOptions","locales","plugins","currentRaw","currentRefined","anyChanges","_this$processRawViewO","processRawViewOptions","dateProfileGeneratorClass","usesMinMaxTime","slotMinTime","slotMaxTime","showNonCurrentDates","dayCount","dateAlignment","dateIncrement","hiddenDays","weekends","nowInput","now","validRangeInput","validRange","visibleRangeInput","visibleRange","fixedWeekCount","explicitLocale","calendarSystem","namedTimeZoneImpl","ThemeClass","themeSystem","DateProfileGeneratorClass","ui","eventDefs","defId","display","eventDisplay","editable","startEditable","eventStartEditable","durationEditable","eventDurationEditable","constraint","eventConstraint","overlap","eventOverlap","allow","eventAllow","backgroundColor","eventBackgroundColor","borderColor","eventBorderColor","textColor","eventTextColor","color","eventColor","selectConstraint","selectOverlap","selectAllow","_iterator10","_step10","isLoadingFunc","viewName","ToolbarSection","_BaseComponent","_super2","_this2","children","widgetGroups","widgetGroup","renderWidgetGroup","className","isOnlyButtons","_iterator11","_step11","widget","titleId","title","isPressed","activeButton","isDisabled","isTodayEnabled","isPrevEnabled","isNextEnabled","buttonClasses","getClass","disabled","onClick","role","groupClassName","Toolbar","_BaseComponent2","_super3","_this$props","model","extraClassName","forceLtr","startContent","endContent","centerContent","center","left","right","renderSection","ViewHarness","_BaseComponent3","_super4","_this3","availableWidth","handleEl","el","elRef","updateAvailableWidth","handleResize","aspectRatio","liquid","height","paddingBottom","labeledById","ref","style","componentDidMount","addResizeHandler","componentWillUnmount","removeResizeHandler","setState","offsetWidth","EventClicking","_Interaction","_super5","settings","_this4","handleSegClick","segEl","_assertThisInitialize","_assertThisInitialized","seg","isValidSegDownEl","hasUrlContainer","querySelector","href","event","eventRange","instance","jsEvent","defaultPrevented","window","location","destroy","EventHovering","_Interaction2","_super6","_this5","handleEventElRemove","currentSegEl","handleSegLeave","handleSegEnter","triggerEvent","removeHoverListeners","publicEvName","CalendarContent","_PureComponent","_super7","_this6","buildViewPropTransformers","buildToolbarProps","headerRef","footerRef","interactionsStore","viewLabelId","registerInteractiveComponent","settingsInput","DEFAULT_INTERACTIONS","interactionClasses","interactions","TheInteractionClass","uid","unregisterInteractiveComponent","listeners","_iterator12","_step12","listener","resizeRunner","handleWindowResize","windowResizeDelay","toolbarProps","viewVGrow","viewHeight","viewAspectRatio","isHeightAuto","forPrint","contentHeight","viewContext","Provider","renderView","buildAppendContent","CalendarInteractionClass","addEventListener","propName","componentDidUpdate","prevProps","removeEventListener","clear","_iterator13","_step13","interaction","transformers","_iterator14","_step14","transformer","transform","ViewComponent","todayInfo","prevInfo","nextInfo","theClasses","TheClass","Calendar","_CalendarImpl","_super8","_this7","isRendering","isRendered","currentClassNames","customContentRenderId","handleAction","renderRunner","tryDrain","handleData","currentData","rerenderDelay","handleRenderRequest","_assertThisInitialize2","setClassNames","setHeight","wasRendering","updateSize","_this8","_get","_getPrototypeOf","batchRendering","pauseRendering","resumeRendering","classList","_iterator15","_step15","remove","_iterator16","_step16","formatDate","dateInput","formatter","dateMeta","createMarkerMeta","marker","forcedTzo","startInput","endInput","startMeta","endMeta","forcedStartTzo","forcedEndTzo","sliceEvents","allDay","fg","version"],"sources":["C:/Users/erden/OneDrive/Documents/GitHub/techclubsite/streamlit_calendar/frontend/node_modules/@fullcalendar/core/index.js"],"sourcesContent":["import { m as mergeProps, g as guid, i as isArraysEqual, T as Theme, a as mapHash, B as BaseComponent, V as ViewContextType, C as ContentContainer, b as buildViewClassNames, c as greatestDurationDenominator, d as createDuration, e as BASE_OPTION_DEFAULTS, f as arrayToHash, h as filterHash, j as buildEventSourceRefiners, p as parseEventSource, k as formatWithOrdinals, u as unpromisify, l as buildRangeApiWithTimeZone, n as identity, r as requestJson, s as subtractDurations, o as intersectRanges, q as startOfDay, t as addDays, v as hashValuesToArray, w as buildEventApis, D as DelayedRunner, x as createFormatter, y as diffWholeDays, z as memoize, A as memoizeObjArg, E as isPropsEqual, F as Emitter, G as getInitialDate, H as rangeContainsMarker, I as createEmptyEventStore, J as reduceCurrentDate, K as reduceEventStore, L as rezoneEventStoreDates, M as mergeRawOptions, N as BASE_OPTION_REFINERS, O as CALENDAR_LISTENER_REFINERS, P as CALENDAR_OPTION_REFINERS, Q as COMPLEX_OPTION_COMPARATORS, R as VIEW_OPTION_REFINERS, S as DateEnv, U as DateProfileGenerator, W as createEventUi, X as parseBusinessHours, Y as setRef, Z as Interaction, _ as getElSeg, $ as elementClosest, a0 as EventImpl, a1 as listenBySelector, a2 as listenToHoverBySelector, a3 as PureComponent, a4 as buildViewContext, a5 as getUniqueDomId, a6 as parseInteractionSettings, a7 as interactionSettingsStore, a8 as getNow, a9 as CalendarImpl, aa as flushSync, ab as CalendarRoot, ac as RenderId, ad as ensureElHasStyles, ae as applyStyleProp, af as sliceEventStore } from './internal-common.js';\nexport { ag as JsonRequestError } from './internal-common.js';\nimport { createElement, createRef, Fragment, render } from 'preact';\nimport 'preact/compat';\n\nconst globalLocales = [];\n\nconst MINIMAL_RAW_EN_LOCALE = {\n    code: 'en',\n    week: {\n        dow: 0,\n        doy: 4, // 4 days need to be within the year to be considered the first week\n    },\n    direction: 'ltr',\n    buttonText: {\n        prev: 'prev',\n        next: 'next',\n        prevYear: 'prev year',\n        nextYear: 'next year',\n        year: 'year',\n        today: 'today',\n        month: 'month',\n        week: 'week',\n        day: 'day',\n        list: 'list',\n    },\n    weekText: 'W',\n    weekTextLong: 'Week',\n    closeHint: 'Close',\n    timeHint: 'Time',\n    eventHint: 'Event',\n    allDayText: 'all-day',\n    moreLinkText: 'more',\n    noEventsText: 'No events to display',\n};\nconst RAW_EN_LOCALE = Object.assign(Object.assign({}, MINIMAL_RAW_EN_LOCALE), { \n    // Includes things we don't want other locales to inherit,\n    // things that derive from other translatable strings.\n    buttonHints: {\n        prev: 'Previous $0',\n        next: 'Next $0',\n        today(buttonText, unit) {\n            return (unit === 'day')\n                ? 'Today'\n                : `This ${buttonText}`;\n        },\n    }, viewHint: '$0 view', navLinkHint: 'Go to $0', moreLinkHint(eventCnt) {\n        return `Show ${eventCnt} more event${eventCnt === 1 ? '' : 's'}`;\n    } });\nfunction organizeRawLocales(explicitRawLocales) {\n    let defaultCode = explicitRawLocales.length > 0 ? explicitRawLocales[0].code : 'en';\n    let allRawLocales = globalLocales.concat(explicitRawLocales);\n    let rawLocaleMap = {\n        en: RAW_EN_LOCALE,\n    };\n    for (let rawLocale of allRawLocales) {\n        rawLocaleMap[rawLocale.code] = rawLocale;\n    }\n    return {\n        map: rawLocaleMap,\n        defaultCode,\n    };\n}\nfunction buildLocale(inputSingular, available) {\n    if (typeof inputSingular === 'object' && !Array.isArray(inputSingular)) {\n        return parseLocale(inputSingular.code, [inputSingular.code], inputSingular);\n    }\n    return queryLocale(inputSingular, available);\n}\nfunction queryLocale(codeArg, available) {\n    let codes = [].concat(codeArg || []); // will convert to array\n    let raw = queryRawLocale(codes, available) || RAW_EN_LOCALE;\n    return parseLocale(codeArg, codes, raw);\n}\nfunction queryRawLocale(codes, available) {\n    for (let i = 0; i < codes.length; i += 1) {\n        let parts = codes[i].toLocaleLowerCase().split('-');\n        for (let j = parts.length; j > 0; j -= 1) {\n            let simpleId = parts.slice(0, j).join('-');\n            if (available[simpleId]) {\n                return available[simpleId];\n            }\n        }\n    }\n    return null;\n}\nfunction parseLocale(codeArg, codes, raw) {\n    let merged = mergeProps([MINIMAL_RAW_EN_LOCALE, raw], ['buttonText']);\n    delete merged.code; // don't want this part of the options\n    let { week } = merged;\n    delete merged.week;\n    return {\n        codeArg,\n        codes,\n        week,\n        simpleNumberFormat: new Intl.NumberFormat(codeArg),\n        options: merged,\n    };\n}\n\n// TODO: easier way to add new hooks? need to update a million things\nfunction createPlugin(input) {\n    return {\n        id: guid(),\n        name: input.name,\n        premiumReleaseDate: input.premiumReleaseDate ? new Date(input.premiumReleaseDate) : undefined,\n        deps: input.deps || [],\n        reducers: input.reducers || [],\n        isLoadingFuncs: input.isLoadingFuncs || [],\n        contextInit: [].concat(input.contextInit || []),\n        eventRefiners: input.eventRefiners || {},\n        eventDefMemberAdders: input.eventDefMemberAdders || [],\n        eventSourceRefiners: input.eventSourceRefiners || {},\n        isDraggableTransformers: input.isDraggableTransformers || [],\n        eventDragMutationMassagers: input.eventDragMutationMassagers || [],\n        eventDefMutationAppliers: input.eventDefMutationAppliers || [],\n        dateSelectionTransformers: input.dateSelectionTransformers || [],\n        datePointTransforms: input.datePointTransforms || [],\n        dateSpanTransforms: input.dateSpanTransforms || [],\n        views: input.views || {},\n        viewPropsTransformers: input.viewPropsTransformers || [],\n        isPropsValid: input.isPropsValid || null,\n        externalDefTransforms: input.externalDefTransforms || [],\n        viewContainerAppends: input.viewContainerAppends || [],\n        eventDropTransformers: input.eventDropTransformers || [],\n        componentInteractions: input.componentInteractions || [],\n        calendarInteractions: input.calendarInteractions || [],\n        themeClasses: input.themeClasses || {},\n        eventSourceDefs: input.eventSourceDefs || [],\n        cmdFormatter: input.cmdFormatter,\n        recurringTypes: input.recurringTypes || [],\n        namedTimeZonedImpl: input.namedTimeZonedImpl,\n        initialView: input.initialView || '',\n        elementDraggingImpl: input.elementDraggingImpl,\n        optionChangeHandlers: input.optionChangeHandlers || {},\n        scrollGridImpl: input.scrollGridImpl || null,\n        listenerRefiners: input.listenerRefiners || {},\n        optionRefiners: input.optionRefiners || {},\n        propSetHandlers: input.propSetHandlers || {},\n    };\n}\nfunction buildPluginHooks(pluginDefs, globalDefs) {\n    let currentPluginIds = {};\n    let hooks = {\n        premiumReleaseDate: undefined,\n        reducers: [],\n        isLoadingFuncs: [],\n        contextInit: [],\n        eventRefiners: {},\n        eventDefMemberAdders: [],\n        eventSourceRefiners: {},\n        isDraggableTransformers: [],\n        eventDragMutationMassagers: [],\n        eventDefMutationAppliers: [],\n        dateSelectionTransformers: [],\n        datePointTransforms: [],\n        dateSpanTransforms: [],\n        views: {},\n        viewPropsTransformers: [],\n        isPropsValid: null,\n        externalDefTransforms: [],\n        viewContainerAppends: [],\n        eventDropTransformers: [],\n        componentInteractions: [],\n        calendarInteractions: [],\n        themeClasses: {},\n        eventSourceDefs: [],\n        cmdFormatter: null,\n        recurringTypes: [],\n        namedTimeZonedImpl: null,\n        initialView: '',\n        elementDraggingImpl: null,\n        optionChangeHandlers: {},\n        scrollGridImpl: null,\n        listenerRefiners: {},\n        optionRefiners: {},\n        propSetHandlers: {},\n    };\n    function addDefs(defs) {\n        for (let def of defs) {\n            const pluginName = def.name;\n            const currentId = currentPluginIds[pluginName];\n            if (currentId === undefined) {\n                currentPluginIds[pluginName] = def.id;\n                addDefs(def.deps);\n                hooks = combineHooks(hooks, def);\n            }\n            else if (currentId !== def.id) {\n                // different ID than the one already added\n                console.warn(`Duplicate plugin '${pluginName}'`);\n            }\n        }\n    }\n    if (pluginDefs) {\n        addDefs(pluginDefs);\n    }\n    addDefs(globalDefs);\n    return hooks;\n}\nfunction buildBuildPluginHooks() {\n    let currentOverrideDefs = [];\n    let currentGlobalDefs = [];\n    let currentHooks;\n    return (overrideDefs, globalDefs) => {\n        if (!currentHooks || !isArraysEqual(overrideDefs, currentOverrideDefs) || !isArraysEqual(globalDefs, currentGlobalDefs)) {\n            currentHooks = buildPluginHooks(overrideDefs, globalDefs);\n        }\n        currentOverrideDefs = overrideDefs;\n        currentGlobalDefs = globalDefs;\n        return currentHooks;\n    };\n}\nfunction combineHooks(hooks0, hooks1) {\n    return {\n        premiumReleaseDate: compareOptionalDates(hooks0.premiumReleaseDate, hooks1.premiumReleaseDate),\n        reducers: hooks0.reducers.concat(hooks1.reducers),\n        isLoadingFuncs: hooks0.isLoadingFuncs.concat(hooks1.isLoadingFuncs),\n        contextInit: hooks0.contextInit.concat(hooks1.contextInit),\n        eventRefiners: Object.assign(Object.assign({}, hooks0.eventRefiners), hooks1.eventRefiners),\n        eventDefMemberAdders: hooks0.eventDefMemberAdders.concat(hooks1.eventDefMemberAdders),\n        eventSourceRefiners: Object.assign(Object.assign({}, hooks0.eventSourceRefiners), hooks1.eventSourceRefiners),\n        isDraggableTransformers: hooks0.isDraggableTransformers.concat(hooks1.isDraggableTransformers),\n        eventDragMutationMassagers: hooks0.eventDragMutationMassagers.concat(hooks1.eventDragMutationMassagers),\n        eventDefMutationAppliers: hooks0.eventDefMutationAppliers.concat(hooks1.eventDefMutationAppliers),\n        dateSelectionTransformers: hooks0.dateSelectionTransformers.concat(hooks1.dateSelectionTransformers),\n        datePointTransforms: hooks0.datePointTransforms.concat(hooks1.datePointTransforms),\n        dateSpanTransforms: hooks0.dateSpanTransforms.concat(hooks1.dateSpanTransforms),\n        views: Object.assign(Object.assign({}, hooks0.views), hooks1.views),\n        viewPropsTransformers: hooks0.viewPropsTransformers.concat(hooks1.viewPropsTransformers),\n        isPropsValid: hooks1.isPropsValid || hooks0.isPropsValid,\n        externalDefTransforms: hooks0.externalDefTransforms.concat(hooks1.externalDefTransforms),\n        viewContainerAppends: hooks0.viewContainerAppends.concat(hooks1.viewContainerAppends),\n        eventDropTransformers: hooks0.eventDropTransformers.concat(hooks1.eventDropTransformers),\n        calendarInteractions: hooks0.calendarInteractions.concat(hooks1.calendarInteractions),\n        componentInteractions: hooks0.componentInteractions.concat(hooks1.componentInteractions),\n        themeClasses: Object.assign(Object.assign({}, hooks0.themeClasses), hooks1.themeClasses),\n        eventSourceDefs: hooks0.eventSourceDefs.concat(hooks1.eventSourceDefs),\n        cmdFormatter: hooks1.cmdFormatter || hooks0.cmdFormatter,\n        recurringTypes: hooks0.recurringTypes.concat(hooks1.recurringTypes),\n        namedTimeZonedImpl: hooks1.namedTimeZonedImpl || hooks0.namedTimeZonedImpl,\n        initialView: hooks0.initialView || hooks1.initialView,\n        elementDraggingImpl: hooks0.elementDraggingImpl || hooks1.elementDraggingImpl,\n        optionChangeHandlers: Object.assign(Object.assign({}, hooks0.optionChangeHandlers), hooks1.optionChangeHandlers),\n        scrollGridImpl: hooks1.scrollGridImpl || hooks0.scrollGridImpl,\n        listenerRefiners: Object.assign(Object.assign({}, hooks0.listenerRefiners), hooks1.listenerRefiners),\n        optionRefiners: Object.assign(Object.assign({}, hooks0.optionRefiners), hooks1.optionRefiners),\n        propSetHandlers: Object.assign(Object.assign({}, hooks0.propSetHandlers), hooks1.propSetHandlers),\n    };\n}\nfunction compareOptionalDates(date0, date1) {\n    if (date0 === undefined) {\n        return date1;\n    }\n    if (date1 === undefined) {\n        return date0;\n    }\n    return new Date(Math.max(date0.valueOf(), date1.valueOf()));\n}\n\nclass StandardTheme extends Theme {\n}\nStandardTheme.prototype.classes = {\n    root: 'fc-theme-standard',\n    tableCellShaded: 'fc-cell-shaded',\n    buttonGroup: 'fc-button-group',\n    button: 'fc-button fc-button-primary',\n    buttonActive: 'fc-button-active',\n};\nStandardTheme.prototype.baseIconClass = 'fc-icon';\nStandardTheme.prototype.iconClasses = {\n    close: 'fc-icon-x',\n    prev: 'fc-icon-chevron-left',\n    next: 'fc-icon-chevron-right',\n    prevYear: 'fc-icon-chevrons-left',\n    nextYear: 'fc-icon-chevrons-right',\n};\nStandardTheme.prototype.rtlIconClasses = {\n    prev: 'fc-icon-chevron-right',\n    next: 'fc-icon-chevron-left',\n    prevYear: 'fc-icon-chevrons-right',\n    nextYear: 'fc-icon-chevrons-left',\n};\nStandardTheme.prototype.iconOverrideOption = 'buttonIcons'; // TODO: make TS-friendly\nStandardTheme.prototype.iconOverrideCustomButtonOption = 'icon';\nStandardTheme.prototype.iconOverridePrefix = 'fc-icon-';\n\nfunction compileViewDefs(defaultConfigs, overrideConfigs) {\n    let hash = {};\n    let viewType;\n    for (viewType in defaultConfigs) {\n        ensureViewDef(viewType, hash, defaultConfigs, overrideConfigs);\n    }\n    for (viewType in overrideConfigs) {\n        ensureViewDef(viewType, hash, defaultConfigs, overrideConfigs);\n    }\n    return hash;\n}\nfunction ensureViewDef(viewType, hash, defaultConfigs, overrideConfigs) {\n    if (hash[viewType]) {\n        return hash[viewType];\n    }\n    let viewDef = buildViewDef(viewType, hash, defaultConfigs, overrideConfigs);\n    if (viewDef) {\n        hash[viewType] = viewDef;\n    }\n    return viewDef;\n}\nfunction buildViewDef(viewType, hash, defaultConfigs, overrideConfigs) {\n    let defaultConfig = defaultConfigs[viewType];\n    let overrideConfig = overrideConfigs[viewType];\n    let queryProp = (name) => ((defaultConfig && defaultConfig[name] !== null) ? defaultConfig[name] :\n        ((overrideConfig && overrideConfig[name] !== null) ? overrideConfig[name] : null));\n    let theComponent = queryProp('component');\n    let superType = queryProp('superType');\n    let superDef = null;\n    if (superType) {\n        if (superType === viewType) {\n            throw new Error('Can\\'t have a custom view type that references itself');\n        }\n        superDef = ensureViewDef(superType, hash, defaultConfigs, overrideConfigs);\n    }\n    if (!theComponent && superDef) {\n        theComponent = superDef.component;\n    }\n    if (!theComponent) {\n        return null; // don't throw a warning, might be settings for a single-unit view\n    }\n    return {\n        type: viewType,\n        component: theComponent,\n        defaults: Object.assign(Object.assign({}, (superDef ? superDef.defaults : {})), (defaultConfig ? defaultConfig.rawOptions : {})),\n        overrides: Object.assign(Object.assign({}, (superDef ? superDef.overrides : {})), (overrideConfig ? overrideConfig.rawOptions : {})),\n    };\n}\n\nfunction parseViewConfigs(inputs) {\n    return mapHash(inputs, parseViewConfig);\n}\nfunction parseViewConfig(input) {\n    let rawOptions = typeof input === 'function' ?\n        { component: input } :\n        input;\n    let { component } = rawOptions;\n    if (rawOptions.content) {\n        // TODO: remove content/classNames/didMount/etc from options?\n        component = createViewHookComponent(rawOptions);\n    }\n    else if (component && !(component.prototype instanceof BaseComponent)) {\n        // WHY?: people were using `component` property for `content`\n        // TODO: converge on one setting name\n        component = createViewHookComponent(Object.assign(Object.assign({}, rawOptions), { content: component }));\n    }\n    return {\n        superType: rawOptions.type,\n        component: component,\n        rawOptions, // includes type and component too :(\n    };\n}\nfunction createViewHookComponent(options) {\n    return (viewProps) => (createElement(ViewContextType.Consumer, null, (context) => (createElement(ContentContainer, { elTag: \"div\", elClasses: buildViewClassNames(context.viewSpec), renderProps: Object.assign(Object.assign({}, viewProps), { nextDayThreshold: context.options.nextDayThreshold }), generatorName: undefined, customGenerator: options.content, classNameGenerator: options.classNames, didMount: options.didMount, willUnmount: options.willUnmount }))));\n}\n\nfunction buildViewSpecs(defaultInputs, optionOverrides, dynamicOptionOverrides, localeDefaults) {\n    let defaultConfigs = parseViewConfigs(defaultInputs);\n    let overrideConfigs = parseViewConfigs(optionOverrides.views);\n    let viewDefs = compileViewDefs(defaultConfigs, overrideConfigs);\n    return mapHash(viewDefs, (viewDef) => buildViewSpec(viewDef, overrideConfigs, optionOverrides, dynamicOptionOverrides, localeDefaults));\n}\nfunction buildViewSpec(viewDef, overrideConfigs, optionOverrides, dynamicOptionOverrides, localeDefaults) {\n    let durationInput = viewDef.overrides.duration ||\n        viewDef.defaults.duration ||\n        dynamicOptionOverrides.duration ||\n        optionOverrides.duration;\n    let duration = null;\n    let durationUnit = '';\n    let singleUnit = '';\n    let singleUnitOverrides = {};\n    if (durationInput) {\n        duration = createDurationCached(durationInput);\n        if (duration) { // valid?\n            let denom = greatestDurationDenominator(duration);\n            durationUnit = denom.unit;\n            if (denom.value === 1) {\n                singleUnit = durationUnit;\n                singleUnitOverrides = overrideConfigs[durationUnit] ? overrideConfigs[durationUnit].rawOptions : {};\n            }\n        }\n    }\n    let queryButtonText = (optionsSubset) => {\n        let buttonTextMap = optionsSubset.buttonText || {};\n        let buttonTextKey = viewDef.defaults.buttonTextKey;\n        if (buttonTextKey != null && buttonTextMap[buttonTextKey] != null) {\n            return buttonTextMap[buttonTextKey];\n        }\n        if (buttonTextMap[viewDef.type] != null) {\n            return buttonTextMap[viewDef.type];\n        }\n        if (buttonTextMap[singleUnit] != null) {\n            return buttonTextMap[singleUnit];\n        }\n        return null;\n    };\n    let queryButtonTitle = (optionsSubset) => {\n        let buttonHints = optionsSubset.buttonHints || {};\n        let buttonKey = viewDef.defaults.buttonTextKey; // use same key as text\n        if (buttonKey != null && buttonHints[buttonKey] != null) {\n            return buttonHints[buttonKey];\n        }\n        if (buttonHints[viewDef.type] != null) {\n            return buttonHints[viewDef.type];\n        }\n        if (buttonHints[singleUnit] != null) {\n            return buttonHints[singleUnit];\n        }\n        return null;\n    };\n    return {\n        type: viewDef.type,\n        component: viewDef.component,\n        duration,\n        durationUnit,\n        singleUnit,\n        optionDefaults: viewDef.defaults,\n        optionOverrides: Object.assign(Object.assign({}, singleUnitOverrides), viewDef.overrides),\n        buttonTextOverride: queryButtonText(dynamicOptionOverrides) ||\n            queryButtonText(optionOverrides) || // constructor-specified buttonText lookup hash takes precedence\n            viewDef.overrides.buttonText,\n        buttonTextDefault: queryButtonText(localeDefaults) ||\n            viewDef.defaults.buttonText ||\n            queryButtonText(BASE_OPTION_DEFAULTS) ||\n            viewDef.type,\n        // not DRY\n        buttonTitleOverride: queryButtonTitle(dynamicOptionOverrides) ||\n            queryButtonTitle(optionOverrides) ||\n            viewDef.overrides.buttonHint,\n        buttonTitleDefault: queryButtonTitle(localeDefaults) ||\n            viewDef.defaults.buttonHint ||\n            queryButtonTitle(BASE_OPTION_DEFAULTS),\n        // will eventually fall back to buttonText\n    };\n}\n// hack to get memoization working\nlet durationInputMap = {};\nfunction createDurationCached(durationInput) {\n    let json = JSON.stringify(durationInput);\n    let res = durationInputMap[json];\n    if (res === undefined) {\n        res = createDuration(durationInput);\n        durationInputMap[json] = res;\n    }\n    return res;\n}\n\nfunction reduceViewType(viewType, action) {\n    switch (action.type) {\n        case 'CHANGE_VIEW_TYPE':\n            viewType = action.viewType;\n    }\n    return viewType;\n}\n\nfunction reduceDynamicOptionOverrides(dynamicOptionOverrides, action) {\n    switch (action.type) {\n        case 'SET_OPTION':\n            return Object.assign(Object.assign({}, dynamicOptionOverrides), { [action.optionName]: action.rawOptionValue });\n        default:\n            return dynamicOptionOverrides;\n    }\n}\n\nfunction reduceDateProfile(currentDateProfile, action, currentDate, dateProfileGenerator) {\n    let dp;\n    switch (action.type) {\n        case 'CHANGE_VIEW_TYPE':\n            return dateProfileGenerator.build(action.dateMarker || currentDate);\n        case 'CHANGE_DATE':\n            return dateProfileGenerator.build(action.dateMarker);\n        case 'PREV':\n            dp = dateProfileGenerator.buildPrev(currentDateProfile, currentDate);\n            if (dp.isValid) {\n                return dp;\n            }\n            break;\n        case 'NEXT':\n            dp = dateProfileGenerator.buildNext(currentDateProfile, currentDate);\n            if (dp.isValid) {\n                return dp;\n            }\n            break;\n    }\n    return currentDateProfile;\n}\n\nfunction initEventSources(calendarOptions, dateProfile, context) {\n    let activeRange = dateProfile ? dateProfile.activeRange : null;\n    return addSources({}, parseInitialSources(calendarOptions, context), activeRange, context);\n}\nfunction reduceEventSources(eventSources, action, dateProfile, context) {\n    let activeRange = dateProfile ? dateProfile.activeRange : null; // need this check?\n    switch (action.type) {\n        case 'ADD_EVENT_SOURCES': // already parsed\n            return addSources(eventSources, action.sources, activeRange, context);\n        case 'REMOVE_EVENT_SOURCE':\n            return removeSource(eventSources, action.sourceId);\n        case 'PREV': // TODO: how do we track all actions that affect dateProfile :(\n        case 'NEXT':\n        case 'CHANGE_DATE':\n        case 'CHANGE_VIEW_TYPE':\n            if (dateProfile) {\n                return fetchDirtySources(eventSources, activeRange, context);\n            }\n            return eventSources;\n        case 'FETCH_EVENT_SOURCES':\n            return fetchSourcesByIds(eventSources, action.sourceIds ? // why no type?\n                arrayToHash(action.sourceIds) :\n                excludeStaticSources(eventSources, context), activeRange, action.isRefetch || false, context);\n        case 'RECEIVE_EVENTS':\n        case 'RECEIVE_EVENT_ERROR':\n            return receiveResponse(eventSources, action.sourceId, action.fetchId, action.fetchRange);\n        case 'REMOVE_ALL_EVENT_SOURCES':\n            return {};\n        default:\n            return eventSources;\n    }\n}\nfunction reduceEventSourcesNewTimeZone(eventSources, dateProfile, context) {\n    let activeRange = dateProfile ? dateProfile.activeRange : null; // need this check?\n    return fetchSourcesByIds(eventSources, excludeStaticSources(eventSources, context), activeRange, true, context);\n}\nfunction computeEventSourcesLoading(eventSources) {\n    for (let sourceId in eventSources) {\n        if (eventSources[sourceId].isFetching) {\n            return true;\n        }\n    }\n    return false;\n}\nfunction addSources(eventSourceHash, sources, fetchRange, context) {\n    let hash = {};\n    for (let source of sources) {\n        hash[source.sourceId] = source;\n    }\n    if (fetchRange) {\n        hash = fetchDirtySources(hash, fetchRange, context);\n    }\n    return Object.assign(Object.assign({}, eventSourceHash), hash);\n}\nfunction removeSource(eventSourceHash, sourceId) {\n    return filterHash(eventSourceHash, (eventSource) => eventSource.sourceId !== sourceId);\n}\nfunction fetchDirtySources(sourceHash, fetchRange, context) {\n    return fetchSourcesByIds(sourceHash, filterHash(sourceHash, (eventSource) => isSourceDirty(eventSource, fetchRange, context)), fetchRange, false, context);\n}\nfunction isSourceDirty(eventSource, fetchRange, context) {\n    if (!doesSourceNeedRange(eventSource, context)) {\n        return !eventSource.latestFetchId;\n    }\n    return !context.options.lazyFetching ||\n        !eventSource.fetchRange ||\n        eventSource.isFetching || // always cancel outdated in-progress fetches\n        fetchRange.start < eventSource.fetchRange.start ||\n        fetchRange.end > eventSource.fetchRange.end;\n}\nfunction fetchSourcesByIds(prevSources, sourceIdHash, fetchRange, isRefetch, context) {\n    let nextSources = {};\n    for (let sourceId in prevSources) {\n        let source = prevSources[sourceId];\n        if (sourceIdHash[sourceId]) {\n            nextSources[sourceId] = fetchSource(source, fetchRange, isRefetch, context);\n        }\n        else {\n            nextSources[sourceId] = source;\n        }\n    }\n    return nextSources;\n}\nfunction fetchSource(eventSource, fetchRange, isRefetch, context) {\n    let { options, calendarApi } = context;\n    let sourceDef = context.pluginHooks.eventSourceDefs[eventSource.sourceDefId];\n    let fetchId = guid();\n    sourceDef.fetch({\n        eventSource,\n        range: fetchRange,\n        isRefetch,\n        context,\n    }, (res) => {\n        let { rawEvents } = res;\n        if (options.eventSourceSuccess) {\n            rawEvents = options.eventSourceSuccess.call(calendarApi, rawEvents, res.response) || rawEvents;\n        }\n        if (eventSource.success) {\n            rawEvents = eventSource.success.call(calendarApi, rawEvents, res.response) || rawEvents;\n        }\n        context.dispatch({\n            type: 'RECEIVE_EVENTS',\n            sourceId: eventSource.sourceId,\n            fetchId,\n            fetchRange,\n            rawEvents,\n        });\n    }, (error) => {\n        let errorHandled = false;\n        if (options.eventSourceFailure) {\n            options.eventSourceFailure.call(calendarApi, error);\n            errorHandled = true;\n        }\n        if (eventSource.failure) {\n            eventSource.failure(error);\n            errorHandled = true;\n        }\n        if (!errorHandled) {\n            console.warn(error.message, error);\n        }\n        context.dispatch({\n            type: 'RECEIVE_EVENT_ERROR',\n            sourceId: eventSource.sourceId,\n            fetchId,\n            fetchRange,\n            error,\n        });\n    });\n    return Object.assign(Object.assign({}, eventSource), { isFetching: true, latestFetchId: fetchId });\n}\nfunction receiveResponse(sourceHash, sourceId, fetchId, fetchRange) {\n    let eventSource = sourceHash[sourceId];\n    if (eventSource && // not already removed\n        fetchId === eventSource.latestFetchId) {\n        return Object.assign(Object.assign({}, sourceHash), { [sourceId]: Object.assign(Object.assign({}, eventSource), { isFetching: false, fetchRange }) });\n    }\n    return sourceHash;\n}\nfunction excludeStaticSources(eventSources, context) {\n    return filterHash(eventSources, (eventSource) => doesSourceNeedRange(eventSource, context));\n}\nfunction parseInitialSources(rawOptions, context) {\n    let refiners = buildEventSourceRefiners(context);\n    let rawSources = [].concat(rawOptions.eventSources || []);\n    let sources = []; // parsed\n    if (rawOptions.initialEvents) {\n        rawSources.unshift(rawOptions.initialEvents);\n    }\n    if (rawOptions.events) {\n        rawSources.unshift(rawOptions.events);\n    }\n    for (let rawSource of rawSources) {\n        let source = parseEventSource(rawSource, context, refiners);\n        if (source) {\n            sources.push(source);\n        }\n    }\n    return sources;\n}\nfunction doesSourceNeedRange(eventSource, context) {\n    let defs = context.pluginHooks.eventSourceDefs;\n    return !defs[eventSource.sourceDefId].ignoreRange;\n}\n\nfunction reduceDateSelection(currentSelection, action) {\n    switch (action.type) {\n        case 'UNSELECT_DATES':\n            return null;\n        case 'SELECT_DATES':\n            return action.selection;\n        default:\n            return currentSelection;\n    }\n}\n\nfunction reduceSelectedEvent(currentInstanceId, action) {\n    switch (action.type) {\n        case 'UNSELECT_EVENT':\n            return '';\n        case 'SELECT_EVENT':\n            return action.eventInstanceId;\n        default:\n            return currentInstanceId;\n    }\n}\n\nfunction reduceEventDrag(currentDrag, action) {\n    let newDrag;\n    switch (action.type) {\n        case 'UNSET_EVENT_DRAG':\n            return null;\n        case 'SET_EVENT_DRAG':\n            newDrag = action.state;\n            return {\n                affectedEvents: newDrag.affectedEvents,\n                mutatedEvents: newDrag.mutatedEvents,\n                isEvent: newDrag.isEvent,\n            };\n        default:\n            return currentDrag;\n    }\n}\n\nfunction reduceEventResize(currentResize, action) {\n    let newResize;\n    switch (action.type) {\n        case 'UNSET_EVENT_RESIZE':\n            return null;\n        case 'SET_EVENT_RESIZE':\n            newResize = action.state;\n            return {\n                affectedEvents: newResize.affectedEvents,\n                mutatedEvents: newResize.mutatedEvents,\n                isEvent: newResize.isEvent,\n            };\n        default:\n            return currentResize;\n    }\n}\n\nfunction parseToolbars(calendarOptions, calendarOptionOverrides, theme, viewSpecs, calendarApi) {\n    let header = calendarOptions.headerToolbar ? parseToolbar(calendarOptions.headerToolbar, calendarOptions, calendarOptionOverrides, theme, viewSpecs, calendarApi) : null;\n    let footer = calendarOptions.footerToolbar ? parseToolbar(calendarOptions.footerToolbar, calendarOptions, calendarOptionOverrides, theme, viewSpecs, calendarApi) : null;\n    return { header, footer };\n}\nfunction parseToolbar(sectionStrHash, calendarOptions, calendarOptionOverrides, theme, viewSpecs, calendarApi) {\n    let sectionWidgets = {};\n    let viewsWithButtons = [];\n    let hasTitle = false;\n    for (let sectionName in sectionStrHash) {\n        let sectionStr = sectionStrHash[sectionName];\n        let sectionRes = parseSection(sectionStr, calendarOptions, calendarOptionOverrides, theme, viewSpecs, calendarApi);\n        sectionWidgets[sectionName] = sectionRes.widgets;\n        viewsWithButtons.push(...sectionRes.viewsWithButtons);\n        hasTitle = hasTitle || sectionRes.hasTitle;\n    }\n    return { sectionWidgets, viewsWithButtons, hasTitle };\n}\n/*\nBAD: querying icons and text here. should be done at render time\n*/\nfunction parseSection(sectionStr, calendarOptions, // defaults+overrides, then refined\ncalendarOptionOverrides, // overrides only!, unrefined :(\ntheme, viewSpecs, calendarApi) {\n    let isRtl = calendarOptions.direction === 'rtl';\n    let calendarCustomButtons = calendarOptions.customButtons || {};\n    let calendarButtonTextOverrides = calendarOptionOverrides.buttonText || {};\n    let calendarButtonText = calendarOptions.buttonText || {};\n    let calendarButtonHintOverrides = calendarOptionOverrides.buttonHints || {};\n    let calendarButtonHints = calendarOptions.buttonHints || {};\n    let sectionSubstrs = sectionStr ? sectionStr.split(' ') : [];\n    let viewsWithButtons = [];\n    let hasTitle = false;\n    let widgets = sectionSubstrs.map((buttonGroupStr) => (buttonGroupStr.split(',').map((buttonName) => {\n        if (buttonName === 'title') {\n            hasTitle = true;\n            return { buttonName };\n        }\n        let customButtonProps;\n        let viewSpec;\n        let buttonClick;\n        let buttonIcon; // only one of these will be set\n        let buttonText; // \"\n        let buttonHint;\n        // ^ for the title=\"\" attribute, for accessibility\n        if ((customButtonProps = calendarCustomButtons[buttonName])) {\n            buttonClick = (ev) => {\n                if (customButtonProps.click) {\n                    customButtonProps.click.call(ev.target, ev, ev.target); // TODO: use Calendar this context?\n                }\n            };\n            (buttonIcon = theme.getCustomButtonIconClass(customButtonProps)) ||\n                (buttonIcon = theme.getIconClass(buttonName, isRtl)) ||\n                (buttonText = customButtonProps.text);\n            buttonHint = customButtonProps.hint || customButtonProps.text;\n        }\n        else if ((viewSpec = viewSpecs[buttonName])) {\n            viewsWithButtons.push(buttonName);\n            buttonClick = () => {\n                calendarApi.changeView(buttonName);\n            };\n            (buttonText = viewSpec.buttonTextOverride) ||\n                (buttonIcon = theme.getIconClass(buttonName, isRtl)) ||\n                (buttonText = viewSpec.buttonTextDefault);\n            let textFallback = viewSpec.buttonTextOverride ||\n                viewSpec.buttonTextDefault;\n            buttonHint = formatWithOrdinals(viewSpec.buttonTitleOverride ||\n                viewSpec.buttonTitleDefault ||\n                calendarOptions.viewHint, [textFallback, buttonName], // view-name = buttonName\n            textFallback);\n        }\n        else if (calendarApi[buttonName]) { // a calendarApi method\n            buttonClick = () => {\n                calendarApi[buttonName]();\n            };\n            (buttonText = calendarButtonTextOverrides[buttonName]) ||\n                (buttonIcon = theme.getIconClass(buttonName, isRtl)) ||\n                (buttonText = calendarButtonText[buttonName]); // everything else is considered default\n            if (buttonName === 'prevYear' || buttonName === 'nextYear') {\n                let prevOrNext = buttonName === 'prevYear' ? 'prev' : 'next';\n                buttonHint = formatWithOrdinals(calendarButtonHintOverrides[prevOrNext] ||\n                    calendarButtonHints[prevOrNext], [\n                    calendarButtonText.year || 'year',\n                    'year',\n                ], calendarButtonText[buttonName]);\n            }\n            else {\n                buttonHint = (navUnit) => formatWithOrdinals(calendarButtonHintOverrides[buttonName] ||\n                    calendarButtonHints[buttonName], [\n                    calendarButtonText[navUnit] || navUnit,\n                    navUnit,\n                ], calendarButtonText[buttonName]);\n            }\n        }\n        return { buttonName, buttonClick, buttonIcon, buttonText, buttonHint };\n    })));\n    return { widgets, viewsWithButtons, hasTitle };\n}\n\n// always represents the current view. otherwise, it'd need to change value every time date changes\nclass ViewImpl {\n    constructor(type, getCurrentData, dateEnv) {\n        this.type = type;\n        this.getCurrentData = getCurrentData;\n        this.dateEnv = dateEnv;\n    }\n    get calendar() {\n        return this.getCurrentData().calendarApi;\n    }\n    get title() {\n        return this.getCurrentData().viewTitle;\n    }\n    get activeStart() {\n        return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.start);\n    }\n    get activeEnd() {\n        return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.end);\n    }\n    get currentStart() {\n        return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.start);\n    }\n    get currentEnd() {\n        return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.end);\n    }\n    getOption(name) {\n        return this.getCurrentData().options[name]; // are the view-specific options\n    }\n}\n\nlet eventSourceDef$2 = {\n    ignoreRange: true,\n    parseMeta(refined) {\n        if (Array.isArray(refined.events)) {\n            return refined.events;\n        }\n        return null;\n    },\n    fetch(arg, successCallback) {\n        successCallback({\n            rawEvents: arg.eventSource.meta,\n        });\n    },\n};\nconst arrayEventSourcePlugin = createPlugin({\n    name: 'array-event-source',\n    eventSourceDefs: [eventSourceDef$2],\n});\n\nlet eventSourceDef$1 = {\n    parseMeta(refined) {\n        if (typeof refined.events === 'function') {\n            return refined.events;\n        }\n        return null;\n    },\n    fetch(arg, successCallback, errorCallback) {\n        const { dateEnv } = arg.context;\n        const func = arg.eventSource.meta;\n        unpromisify(func.bind(null, buildRangeApiWithTimeZone(arg.range, dateEnv)), (rawEvents) => successCallback({ rawEvents }), errorCallback);\n    },\n};\nconst funcEventSourcePlugin = createPlugin({\n    name: 'func-event-source',\n    eventSourceDefs: [eventSourceDef$1],\n});\n\nconst JSON_FEED_EVENT_SOURCE_REFINERS = {\n    method: String,\n    extraParams: identity,\n    startParam: String,\n    endParam: String,\n    timeZoneParam: String,\n};\n\nlet eventSourceDef = {\n    parseMeta(refined) {\n        if (refined.url && (refined.format === 'json' || !refined.format)) {\n            return {\n                url: refined.url,\n                format: 'json',\n                method: (refined.method || 'GET').toUpperCase(),\n                extraParams: refined.extraParams,\n                startParam: refined.startParam,\n                endParam: refined.endParam,\n                timeZoneParam: refined.timeZoneParam,\n            };\n        }\n        return null;\n    },\n    fetch(arg, successCallback, errorCallback) {\n        const { meta } = arg.eventSource;\n        const requestParams = buildRequestParams(meta, arg.range, arg.context);\n        requestJson(meta.method, meta.url, requestParams).then(([rawEvents, response]) => {\n            successCallback({ rawEvents, response });\n        }, errorCallback);\n    },\n};\nconst jsonFeedEventSourcePlugin = createPlugin({\n    name: 'json-event-source',\n    eventSourceRefiners: JSON_FEED_EVENT_SOURCE_REFINERS,\n    eventSourceDefs: [eventSourceDef],\n});\nfunction buildRequestParams(meta, range, context) {\n    let { dateEnv, options } = context;\n    let startParam;\n    let endParam;\n    let timeZoneParam;\n    let customRequestParams;\n    let params = {};\n    startParam = meta.startParam;\n    if (startParam == null) {\n        startParam = options.startParam;\n    }\n    endParam = meta.endParam;\n    if (endParam == null) {\n        endParam = options.endParam;\n    }\n    timeZoneParam = meta.timeZoneParam;\n    if (timeZoneParam == null) {\n        timeZoneParam = options.timeZoneParam;\n    }\n    // retrieve any outbound GET/POST data from the options\n    if (typeof meta.extraParams === 'function') {\n        // supplied as a function that returns a key/value object\n        customRequestParams = meta.extraParams();\n    }\n    else {\n        // probably supplied as a straight key/value object\n        customRequestParams = meta.extraParams || {};\n    }\n    Object.assign(params, customRequestParams);\n    params[startParam] = dateEnv.formatIso(range.start);\n    params[endParam] = dateEnv.formatIso(range.end);\n    if (dateEnv.timeZone !== 'local') {\n        params[timeZoneParam] = dateEnv.timeZone;\n    }\n    return params;\n}\n\nconst SIMPLE_RECURRING_REFINERS = {\n    daysOfWeek: identity,\n    startTime: createDuration,\n    endTime: createDuration,\n    duration: createDuration,\n    startRecur: identity,\n    endRecur: identity,\n};\n\nlet recurring = {\n    parse(refined, dateEnv) {\n        if (refined.daysOfWeek || refined.startTime || refined.endTime || refined.startRecur || refined.endRecur) {\n            let recurringData = {\n                daysOfWeek: refined.daysOfWeek || null,\n                startTime: refined.startTime || null,\n                endTime: refined.endTime || null,\n                startRecur: refined.startRecur ? dateEnv.createMarker(refined.startRecur) : null,\n                endRecur: refined.endRecur ? dateEnv.createMarker(refined.endRecur) : null,\n            };\n            let duration;\n            if (refined.duration) {\n                duration = refined.duration;\n            }\n            if (!duration && refined.startTime && refined.endTime) {\n                duration = subtractDurations(refined.endTime, refined.startTime);\n            }\n            return {\n                allDayGuess: Boolean(!refined.startTime && !refined.endTime),\n                duration,\n                typeData: recurringData, // doesn't need endTime anymore but oh well\n            };\n        }\n        return null;\n    },\n    expand(typeData, framingRange, dateEnv) {\n        let clippedFramingRange = intersectRanges(framingRange, { start: typeData.startRecur, end: typeData.endRecur });\n        if (clippedFramingRange) {\n            return expandRanges(typeData.daysOfWeek, typeData.startTime, clippedFramingRange, dateEnv);\n        }\n        return [];\n    },\n};\nconst simpleRecurringEventsPlugin = createPlugin({\n    name: 'simple-recurring-event',\n    recurringTypes: [recurring],\n    eventRefiners: SIMPLE_RECURRING_REFINERS,\n});\nfunction expandRanges(daysOfWeek, startTime, framingRange, dateEnv) {\n    let dowHash = daysOfWeek ? arrayToHash(daysOfWeek) : null;\n    let dayMarker = startOfDay(framingRange.start);\n    let endMarker = framingRange.end;\n    let instanceStarts = [];\n    while (dayMarker < endMarker) {\n        let instanceStart;\n        // if everyday, or this particular day-of-week\n        if (!dowHash || dowHash[dayMarker.getUTCDay()]) {\n            if (startTime) {\n                instanceStart = dateEnv.add(dayMarker, startTime);\n            }\n            else {\n                instanceStart = dayMarker;\n            }\n            instanceStarts.push(instanceStart);\n        }\n        dayMarker = addDays(dayMarker, 1);\n    }\n    return instanceStarts;\n}\n\nconst changeHandlerPlugin = createPlugin({\n    name: 'change-handler',\n    optionChangeHandlers: {\n        events(events, context) {\n            handleEventSources([events], context);\n        },\n        eventSources: handleEventSources,\n    },\n});\n/*\nBUG: if `event` was supplied, all previously-given `eventSources` will be wiped out\n*/\nfunction handleEventSources(inputs, context) {\n    let unfoundSources = hashValuesToArray(context.getCurrentData().eventSources);\n    if (unfoundSources.length === 1 &&\n        inputs.length === 1 &&\n        Array.isArray(unfoundSources[0]._raw) &&\n        Array.isArray(inputs[0])) {\n        context.dispatch({\n            type: 'RESET_RAW_EVENTS',\n            sourceId: unfoundSources[0].sourceId,\n            rawEvents: inputs[0],\n        });\n        return;\n    }\n    let newInputs = [];\n    for (let input of inputs) {\n        let inputFound = false;\n        for (let i = 0; i < unfoundSources.length; i += 1) {\n            if (unfoundSources[i]._raw === input) {\n                unfoundSources.splice(i, 1); // delete\n                inputFound = true;\n                break;\n            }\n        }\n        if (!inputFound) {\n            newInputs.push(input);\n        }\n    }\n    for (let unfoundSource of unfoundSources) {\n        context.dispatch({\n            type: 'REMOVE_EVENT_SOURCE',\n            sourceId: unfoundSource.sourceId,\n        });\n    }\n    for (let newInput of newInputs) {\n        context.calendarApi.addEventSource(newInput);\n    }\n}\n\nfunction handleDateProfile(dateProfile, context) {\n    context.emitter.trigger('datesSet', Object.assign(Object.assign({}, buildRangeApiWithTimeZone(dateProfile.activeRange, context.dateEnv)), { view: context.viewApi }));\n}\n\nfunction handleEventStore(eventStore, context) {\n    let { emitter } = context;\n    if (emitter.hasHandlers('eventsSet')) {\n        emitter.trigger('eventsSet', buildEventApis(eventStore, context));\n    }\n}\n\n/*\nthis array is exposed on the root namespace so that UMD plugins can add to it.\nsee the rollup-bundles script.\n*/\nconst globalPlugins = [\n    arrayEventSourcePlugin,\n    funcEventSourcePlugin,\n    jsonFeedEventSourcePlugin,\n    simpleRecurringEventsPlugin,\n    changeHandlerPlugin,\n    createPlugin({\n        name: 'misc',\n        isLoadingFuncs: [\n            (state) => computeEventSourcesLoading(state.eventSources),\n        ],\n        propSetHandlers: {\n            dateProfile: handleDateProfile,\n            eventStore: handleEventStore,\n        },\n    }),\n];\n\nclass TaskRunner {\n    constructor(runTaskOption, drainedOption) {\n        this.runTaskOption = runTaskOption;\n        this.drainedOption = drainedOption;\n        this.queue = [];\n        this.delayedRunner = new DelayedRunner(this.drain.bind(this));\n    }\n    request(task, delay) {\n        this.queue.push(task);\n        this.delayedRunner.request(delay);\n    }\n    pause(scope) {\n        this.delayedRunner.pause(scope);\n    }\n    resume(scope, force) {\n        this.delayedRunner.resume(scope, force);\n    }\n    drain() {\n        let { queue } = this;\n        while (queue.length) {\n            let completedTasks = [];\n            let task;\n            while ((task = queue.shift())) {\n                this.runTask(task);\n                completedTasks.push(task);\n            }\n            this.drained(completedTasks);\n        } // keep going, in case new tasks were added in the drained handler\n    }\n    runTask(task) {\n        if (this.runTaskOption) {\n            this.runTaskOption(task);\n        }\n    }\n    drained(completedTasks) {\n        if (this.drainedOption) {\n            this.drainedOption(completedTasks);\n        }\n    }\n}\n\n// Computes what the title at the top of the calendarApi should be for this view\nfunction buildTitle(dateProfile, viewOptions, dateEnv) {\n    let range;\n    // for views that span a large unit of time, show the proper interval, ignoring stray days before and after\n    if (/^(year|month)$/.test(dateProfile.currentRangeUnit)) {\n        range = dateProfile.currentRange;\n    }\n    else { // for day units or smaller, use the actual day range\n        range = dateProfile.activeRange;\n    }\n    return dateEnv.formatRange(range.start, range.end, createFormatter(viewOptions.titleFormat || buildTitleFormat(dateProfile)), {\n        isEndExclusive: dateProfile.isRangeAllDay,\n        defaultSeparator: viewOptions.titleRangeSeparator,\n    });\n}\n// Generates the format string that should be used to generate the title for the current date range.\n// Attempts to compute the most appropriate format if not explicitly specified with `titleFormat`.\nfunction buildTitleFormat(dateProfile) {\n    let { currentRangeUnit } = dateProfile;\n    if (currentRangeUnit === 'year') {\n        return { year: 'numeric' };\n    }\n    if (currentRangeUnit === 'month') {\n        return { year: 'numeric', month: 'long' }; // like \"September 2014\"\n    }\n    let days = diffWholeDays(dateProfile.currentRange.start, dateProfile.currentRange.end);\n    if (days !== null && days > 1) {\n        // multi-day range. shorter, like \"Sep 9 - 10 2014\"\n        return { year: 'numeric', month: 'short', day: 'numeric' };\n    }\n    // one day. longer, like \"September 9 2014\"\n    return { year: 'numeric', month: 'long', day: 'numeric' };\n}\n\n// in future refactor, do the redux-style function(state=initial) for initial-state\n// also, whatever is happening in constructor, have it happen in action queue too\nclass CalendarDataManager {\n    constructor(props) {\n        this.computeCurrentViewData = memoize(this._computeCurrentViewData);\n        this.organizeRawLocales = memoize(organizeRawLocales);\n        this.buildLocale = memoize(buildLocale);\n        this.buildPluginHooks = buildBuildPluginHooks();\n        this.buildDateEnv = memoize(buildDateEnv$1);\n        this.buildTheme = memoize(buildTheme);\n        this.parseToolbars = memoize(parseToolbars);\n        this.buildViewSpecs = memoize(buildViewSpecs);\n        this.buildDateProfileGenerator = memoizeObjArg(buildDateProfileGenerator);\n        this.buildViewApi = memoize(buildViewApi);\n        this.buildViewUiProps = memoizeObjArg(buildViewUiProps);\n        this.buildEventUiBySource = memoize(buildEventUiBySource, isPropsEqual);\n        this.buildEventUiBases = memoize(buildEventUiBases);\n        this.parseContextBusinessHours = memoizeObjArg(parseContextBusinessHours);\n        this.buildTitle = memoize(buildTitle);\n        this.emitter = new Emitter();\n        this.actionRunner = new TaskRunner(this._handleAction.bind(this), this.updateData.bind(this));\n        this.currentCalendarOptionsInput = {};\n        this.currentCalendarOptionsRefined = {};\n        this.currentViewOptionsInput = {};\n        this.currentViewOptionsRefined = {};\n        this.currentCalendarOptionsRefiners = {};\n        this.optionsForRefining = [];\n        this.optionsForHandling = [];\n        this.getCurrentData = () => this.data;\n        this.dispatch = (action) => {\n            this.actionRunner.request(action); // protects against recursive calls to _handleAction\n        };\n        this.props = props;\n        this.actionRunner.pause();\n        let dynamicOptionOverrides = {};\n        let optionsData = this.computeOptionsData(props.optionOverrides, dynamicOptionOverrides, props.calendarApi);\n        let currentViewType = optionsData.calendarOptions.initialView || optionsData.pluginHooks.initialView;\n        let currentViewData = this.computeCurrentViewData(currentViewType, optionsData, props.optionOverrides, dynamicOptionOverrides);\n        // wire things up\n        // TODO: not DRY\n        props.calendarApi.currentDataManager = this;\n        this.emitter.setThisContext(props.calendarApi);\n        this.emitter.setOptions(currentViewData.options);\n        let currentDate = getInitialDate(optionsData.calendarOptions, optionsData.dateEnv);\n        let dateProfile = currentViewData.dateProfileGenerator.build(currentDate);\n        if (!rangeContainsMarker(dateProfile.activeRange, currentDate)) {\n            currentDate = dateProfile.currentRange.start;\n        }\n        let calendarContext = {\n            dateEnv: optionsData.dateEnv,\n            options: optionsData.calendarOptions,\n            pluginHooks: optionsData.pluginHooks,\n            calendarApi: props.calendarApi,\n            dispatch: this.dispatch,\n            emitter: this.emitter,\n            getCurrentData: this.getCurrentData,\n        };\n        // needs to be after setThisContext\n        for (let callback of optionsData.pluginHooks.contextInit) {\n            callback(calendarContext);\n        }\n        // NOT DRY\n        let eventSources = initEventSources(optionsData.calendarOptions, dateProfile, calendarContext);\n        let initialState = {\n            dynamicOptionOverrides,\n            currentViewType,\n            currentDate,\n            dateProfile,\n            businessHours: this.parseContextBusinessHours(calendarContext),\n            eventSources,\n            eventUiBases: {},\n            eventStore: createEmptyEventStore(),\n            renderableEventStore: createEmptyEventStore(),\n            dateSelection: null,\n            eventSelection: '',\n            eventDrag: null,\n            eventResize: null,\n            selectionConfig: this.buildViewUiProps(calendarContext).selectionConfig,\n        };\n        let contextAndState = Object.assign(Object.assign({}, calendarContext), initialState);\n        for (let reducer of optionsData.pluginHooks.reducers) {\n            Object.assign(initialState, reducer(null, null, contextAndState));\n        }\n        if (computeIsLoading(initialState, calendarContext)) {\n            this.emitter.trigger('loading', true); // NOT DRY\n        }\n        this.state = initialState;\n        this.updateData();\n        this.actionRunner.resume();\n    }\n    resetOptions(optionOverrides, changedOptionNames) {\n        let { props } = this;\n        if (changedOptionNames === undefined) {\n            props.optionOverrides = optionOverrides;\n        }\n        else {\n            props.optionOverrides = Object.assign(Object.assign({}, (props.optionOverrides || {})), optionOverrides);\n            this.optionsForRefining.push(...changedOptionNames);\n        }\n        if (changedOptionNames === undefined || changedOptionNames.length) {\n            this.actionRunner.request({\n                type: 'NOTHING',\n            });\n        }\n    }\n    _handleAction(action) {\n        let { props, state, emitter } = this;\n        let dynamicOptionOverrides = reduceDynamicOptionOverrides(state.dynamicOptionOverrides, action);\n        let optionsData = this.computeOptionsData(props.optionOverrides, dynamicOptionOverrides, props.calendarApi);\n        let currentViewType = reduceViewType(state.currentViewType, action);\n        let currentViewData = this.computeCurrentViewData(currentViewType, optionsData, props.optionOverrides, dynamicOptionOverrides);\n        // wire things up\n        // TODO: not DRY\n        props.calendarApi.currentDataManager = this;\n        emitter.setThisContext(props.calendarApi);\n        emitter.setOptions(currentViewData.options);\n        let calendarContext = {\n            dateEnv: optionsData.dateEnv,\n            options: optionsData.calendarOptions,\n            pluginHooks: optionsData.pluginHooks,\n            calendarApi: props.calendarApi,\n            dispatch: this.dispatch,\n            emitter,\n            getCurrentData: this.getCurrentData,\n        };\n        let { currentDate, dateProfile } = state;\n        if (this.data && this.data.dateProfileGenerator !== currentViewData.dateProfileGenerator) { // hack\n            dateProfile = currentViewData.dateProfileGenerator.build(currentDate);\n        }\n        currentDate = reduceCurrentDate(currentDate, action);\n        dateProfile = reduceDateProfile(dateProfile, action, currentDate, currentViewData.dateProfileGenerator);\n        if (action.type === 'PREV' || // TODO: move this logic into DateProfileGenerator\n            action.type === 'NEXT' || // \"\n            !rangeContainsMarker(dateProfile.currentRange, currentDate)) {\n            currentDate = dateProfile.currentRange.start;\n        }\n        let eventSources = reduceEventSources(state.eventSources, action, dateProfile, calendarContext);\n        let eventStore = reduceEventStore(state.eventStore, action, eventSources, dateProfile, calendarContext);\n        let isEventsLoading = computeEventSourcesLoading(eventSources); // BAD. also called in this func in computeIsLoading\n        let renderableEventStore = (isEventsLoading && !currentViewData.options.progressiveEventRendering) ?\n            (state.renderableEventStore || eventStore) : // try from previous state\n            eventStore;\n        let { eventUiSingleBase, selectionConfig } = this.buildViewUiProps(calendarContext); // will memoize obj\n        let eventUiBySource = this.buildEventUiBySource(eventSources);\n        let eventUiBases = this.buildEventUiBases(renderableEventStore.defs, eventUiSingleBase, eventUiBySource);\n        let newState = {\n            dynamicOptionOverrides,\n            currentViewType,\n            currentDate,\n            dateProfile,\n            eventSources,\n            eventStore,\n            renderableEventStore,\n            selectionConfig,\n            eventUiBases,\n            businessHours: this.parseContextBusinessHours(calendarContext),\n            dateSelection: reduceDateSelection(state.dateSelection, action),\n            eventSelection: reduceSelectedEvent(state.eventSelection, action),\n            eventDrag: reduceEventDrag(state.eventDrag, action),\n            eventResize: reduceEventResize(state.eventResize, action),\n        };\n        let contextAndState = Object.assign(Object.assign({}, calendarContext), newState);\n        for (let reducer of optionsData.pluginHooks.reducers) {\n            Object.assign(newState, reducer(state, action, contextAndState)); // give the OLD state, for old value\n        }\n        let wasLoading = computeIsLoading(state, calendarContext);\n        let isLoading = computeIsLoading(newState, calendarContext);\n        // TODO: use propSetHandlers in plugin system\n        if (!wasLoading && isLoading) {\n            emitter.trigger('loading', true);\n        }\n        else if (wasLoading && !isLoading) {\n            emitter.trigger('loading', false);\n        }\n        this.state = newState;\n        if (props.onAction) {\n            props.onAction(action);\n        }\n    }\n    updateData() {\n        let { props, state } = this;\n        let oldData = this.data;\n        let optionsData = this.computeOptionsData(props.optionOverrides, state.dynamicOptionOverrides, props.calendarApi);\n        let currentViewData = this.computeCurrentViewData(state.currentViewType, optionsData, props.optionOverrides, state.dynamicOptionOverrides);\n        let data = this.data = Object.assign(Object.assign(Object.assign({ viewTitle: this.buildTitle(state.dateProfile, currentViewData.options, optionsData.dateEnv), calendarApi: props.calendarApi, dispatch: this.dispatch, emitter: this.emitter, getCurrentData: this.getCurrentData }, optionsData), currentViewData), state);\n        let changeHandlers = optionsData.pluginHooks.optionChangeHandlers;\n        let oldCalendarOptions = oldData && oldData.calendarOptions;\n        let newCalendarOptions = optionsData.calendarOptions;\n        if (oldCalendarOptions && oldCalendarOptions !== newCalendarOptions) {\n            if (oldCalendarOptions.timeZone !== newCalendarOptions.timeZone) {\n                // hack\n                state.eventSources = data.eventSources = reduceEventSourcesNewTimeZone(data.eventSources, state.dateProfile, data);\n                state.eventStore = data.eventStore = rezoneEventStoreDates(data.eventStore, oldData.dateEnv, data.dateEnv);\n                state.renderableEventStore = data.renderableEventStore = rezoneEventStoreDates(data.renderableEventStore, oldData.dateEnv, data.dateEnv);\n            }\n            for (let optionName in changeHandlers) {\n                if (this.optionsForHandling.indexOf(optionName) !== -1 ||\n                    oldCalendarOptions[optionName] !== newCalendarOptions[optionName]) {\n                    changeHandlers[optionName](newCalendarOptions[optionName], data);\n                }\n            }\n        }\n        this.optionsForHandling = [];\n        if (props.onData) {\n            props.onData(data);\n        }\n    }\n    computeOptionsData(optionOverrides, dynamicOptionOverrides, calendarApi) {\n        // TODO: blacklist options that are handled by optionChangeHandlers\n        if (!this.optionsForRefining.length &&\n            optionOverrides === this.stableOptionOverrides &&\n            dynamicOptionOverrides === this.stableDynamicOptionOverrides) {\n            return this.stableCalendarOptionsData;\n        }\n        let { refinedOptions, pluginHooks, localeDefaults, availableLocaleData, extra, } = this.processRawCalendarOptions(optionOverrides, dynamicOptionOverrides);\n        warnUnknownOptions(extra);\n        let dateEnv = this.buildDateEnv(refinedOptions.timeZone, refinedOptions.locale, refinedOptions.weekNumberCalculation, refinedOptions.firstDay, refinedOptions.weekText, pluginHooks, availableLocaleData, refinedOptions.defaultRangeSeparator);\n        let viewSpecs = this.buildViewSpecs(pluginHooks.views, this.stableOptionOverrides, this.stableDynamicOptionOverrides, localeDefaults);\n        let theme = this.buildTheme(refinedOptions, pluginHooks);\n        let toolbarConfig = this.parseToolbars(refinedOptions, this.stableOptionOverrides, theme, viewSpecs, calendarApi);\n        return this.stableCalendarOptionsData = {\n            calendarOptions: refinedOptions,\n            pluginHooks,\n            dateEnv,\n            viewSpecs,\n            theme,\n            toolbarConfig,\n            localeDefaults,\n            availableRawLocales: availableLocaleData.map,\n        };\n    }\n    // always called from behind a memoizer\n    processRawCalendarOptions(optionOverrides, dynamicOptionOverrides) {\n        let { locales, locale } = mergeRawOptions([\n            BASE_OPTION_DEFAULTS,\n            optionOverrides,\n            dynamicOptionOverrides,\n        ]);\n        let availableLocaleData = this.organizeRawLocales(locales);\n        let availableRawLocales = availableLocaleData.map;\n        let localeDefaults = this.buildLocale(locale || availableLocaleData.defaultCode, availableRawLocales).options;\n        let pluginHooks = this.buildPluginHooks(optionOverrides.plugins || [], globalPlugins);\n        let refiners = this.currentCalendarOptionsRefiners = Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({}, BASE_OPTION_REFINERS), CALENDAR_LISTENER_REFINERS), CALENDAR_OPTION_REFINERS), pluginHooks.listenerRefiners), pluginHooks.optionRefiners);\n        let extra = {};\n        let raw = mergeRawOptions([\n            BASE_OPTION_DEFAULTS,\n            localeDefaults,\n            optionOverrides,\n            dynamicOptionOverrides,\n        ]);\n        let refined = {};\n        let currentRaw = this.currentCalendarOptionsInput;\n        let currentRefined = this.currentCalendarOptionsRefined;\n        let anyChanges = false;\n        for (let optionName in raw) {\n            if (this.optionsForRefining.indexOf(optionName) === -1 && (raw[optionName] === currentRaw[optionName] || (COMPLEX_OPTION_COMPARATORS[optionName] &&\n                (optionName in currentRaw) &&\n                COMPLEX_OPTION_COMPARATORS[optionName](currentRaw[optionName], raw[optionName])))) {\n                refined[optionName] = currentRefined[optionName];\n            }\n            else if (refiners[optionName]) {\n                refined[optionName] = refiners[optionName](raw[optionName]);\n                anyChanges = true;\n            }\n            else {\n                extra[optionName] = currentRaw[optionName];\n            }\n        }\n        if (anyChanges) {\n            this.currentCalendarOptionsInput = raw;\n            this.currentCalendarOptionsRefined = refined;\n            this.stableOptionOverrides = optionOverrides;\n            this.stableDynamicOptionOverrides = dynamicOptionOverrides;\n        }\n        this.optionsForHandling.push(...this.optionsForRefining);\n        this.optionsForRefining = [];\n        return {\n            rawOptions: this.currentCalendarOptionsInput,\n            refinedOptions: this.currentCalendarOptionsRefined,\n            pluginHooks,\n            availableLocaleData,\n            localeDefaults,\n            extra,\n        };\n    }\n    _computeCurrentViewData(viewType, optionsData, optionOverrides, dynamicOptionOverrides) {\n        let viewSpec = optionsData.viewSpecs[viewType];\n        if (!viewSpec) {\n            throw new Error(`viewType \"${viewType}\" is not available. Please make sure you've loaded all neccessary plugins`);\n        }\n        let { refinedOptions, extra } = this.processRawViewOptions(viewSpec, optionsData.pluginHooks, optionsData.localeDefaults, optionOverrides, dynamicOptionOverrides);\n        warnUnknownOptions(extra);\n        let dateProfileGenerator = this.buildDateProfileGenerator({\n            dateProfileGeneratorClass: viewSpec.optionDefaults.dateProfileGeneratorClass,\n            duration: viewSpec.duration,\n            durationUnit: viewSpec.durationUnit,\n            usesMinMaxTime: viewSpec.optionDefaults.usesMinMaxTime,\n            dateEnv: optionsData.dateEnv,\n            calendarApi: this.props.calendarApi,\n            slotMinTime: refinedOptions.slotMinTime,\n            slotMaxTime: refinedOptions.slotMaxTime,\n            showNonCurrentDates: refinedOptions.showNonCurrentDates,\n            dayCount: refinedOptions.dayCount,\n            dateAlignment: refinedOptions.dateAlignment,\n            dateIncrement: refinedOptions.dateIncrement,\n            hiddenDays: refinedOptions.hiddenDays,\n            weekends: refinedOptions.weekends,\n            nowInput: refinedOptions.now,\n            validRangeInput: refinedOptions.validRange,\n            visibleRangeInput: refinedOptions.visibleRange,\n            fixedWeekCount: refinedOptions.fixedWeekCount,\n        });\n        let viewApi = this.buildViewApi(viewType, this.getCurrentData, optionsData.dateEnv);\n        return { viewSpec, options: refinedOptions, dateProfileGenerator, viewApi };\n    }\n    processRawViewOptions(viewSpec, pluginHooks, localeDefaults, optionOverrides, dynamicOptionOverrides) {\n        let raw = mergeRawOptions([\n            BASE_OPTION_DEFAULTS,\n            viewSpec.optionDefaults,\n            localeDefaults,\n            optionOverrides,\n            viewSpec.optionOverrides,\n            dynamicOptionOverrides,\n        ]);\n        let refiners = Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({}, BASE_OPTION_REFINERS), CALENDAR_LISTENER_REFINERS), CALENDAR_OPTION_REFINERS), VIEW_OPTION_REFINERS), pluginHooks.listenerRefiners), pluginHooks.optionRefiners);\n        let refined = {};\n        let currentRaw = this.currentViewOptionsInput;\n        let currentRefined = this.currentViewOptionsRefined;\n        let anyChanges = false;\n        let extra = {};\n        for (let optionName in raw) {\n            if (raw[optionName] === currentRaw[optionName] ||\n                (COMPLEX_OPTION_COMPARATORS[optionName] &&\n                    COMPLEX_OPTION_COMPARATORS[optionName](raw[optionName], currentRaw[optionName]))) {\n                refined[optionName] = currentRefined[optionName];\n            }\n            else {\n                if (raw[optionName] === this.currentCalendarOptionsInput[optionName] ||\n                    (COMPLEX_OPTION_COMPARATORS[optionName] &&\n                        COMPLEX_OPTION_COMPARATORS[optionName](raw[optionName], this.currentCalendarOptionsInput[optionName]))) {\n                    if (optionName in this.currentCalendarOptionsRefined) { // might be an \"extra\" prop\n                        refined[optionName] = this.currentCalendarOptionsRefined[optionName];\n                    }\n                }\n                else if (refiners[optionName]) {\n                    refined[optionName] = refiners[optionName](raw[optionName]);\n                }\n                else {\n                    extra[optionName] = raw[optionName];\n                }\n                anyChanges = true;\n            }\n        }\n        if (anyChanges) {\n            this.currentViewOptionsInput = raw;\n            this.currentViewOptionsRefined = refined;\n        }\n        return {\n            rawOptions: this.currentViewOptionsInput,\n            refinedOptions: this.currentViewOptionsRefined,\n            extra,\n        };\n    }\n}\nfunction buildDateEnv$1(timeZone, explicitLocale, weekNumberCalculation, firstDay, weekText, pluginHooks, availableLocaleData, defaultSeparator) {\n    let locale = buildLocale(explicitLocale || availableLocaleData.defaultCode, availableLocaleData.map);\n    return new DateEnv({\n        calendarSystem: 'gregory',\n        timeZone,\n        namedTimeZoneImpl: pluginHooks.namedTimeZonedImpl,\n        locale,\n        weekNumberCalculation,\n        firstDay,\n        weekText,\n        cmdFormatter: pluginHooks.cmdFormatter,\n        defaultSeparator,\n    });\n}\nfunction buildTheme(options, pluginHooks) {\n    let ThemeClass = pluginHooks.themeClasses[options.themeSystem] || StandardTheme;\n    return new ThemeClass(options);\n}\nfunction buildDateProfileGenerator(props) {\n    let DateProfileGeneratorClass = props.dateProfileGeneratorClass || DateProfileGenerator;\n    return new DateProfileGeneratorClass(props);\n}\nfunction buildViewApi(type, getCurrentData, dateEnv) {\n    return new ViewImpl(type, getCurrentData, dateEnv);\n}\nfunction buildEventUiBySource(eventSources) {\n    return mapHash(eventSources, (eventSource) => eventSource.ui);\n}\nfunction buildEventUiBases(eventDefs, eventUiSingleBase, eventUiBySource) {\n    let eventUiBases = { '': eventUiSingleBase };\n    for (let defId in eventDefs) {\n        let def = eventDefs[defId];\n        if (def.sourceId && eventUiBySource[def.sourceId]) {\n            eventUiBases[defId] = eventUiBySource[def.sourceId];\n        }\n    }\n    return eventUiBases;\n}\nfunction buildViewUiProps(calendarContext) {\n    let { options } = calendarContext;\n    return {\n        eventUiSingleBase: createEventUi({\n            display: options.eventDisplay,\n            editable: options.editable,\n            startEditable: options.eventStartEditable,\n            durationEditable: options.eventDurationEditable,\n            constraint: options.eventConstraint,\n            overlap: typeof options.eventOverlap === 'boolean' ? options.eventOverlap : undefined,\n            allow: options.eventAllow,\n            backgroundColor: options.eventBackgroundColor,\n            borderColor: options.eventBorderColor,\n            textColor: options.eventTextColor,\n            color: options.eventColor,\n            // classNames: options.eventClassNames // render hook will handle this\n        }, calendarContext),\n        selectionConfig: createEventUi({\n            constraint: options.selectConstraint,\n            overlap: typeof options.selectOverlap === 'boolean' ? options.selectOverlap : undefined,\n            allow: options.selectAllow,\n        }, calendarContext),\n    };\n}\nfunction computeIsLoading(state, context) {\n    for (let isLoadingFunc of context.pluginHooks.isLoadingFuncs) {\n        if (isLoadingFunc(state)) {\n            return true;\n        }\n    }\n    return false;\n}\nfunction parseContextBusinessHours(calendarContext) {\n    return parseBusinessHours(calendarContext.options.businessHours, calendarContext);\n}\nfunction warnUnknownOptions(options, viewName) {\n    for (let optionName in options) {\n        console.warn(`Unknown option '${optionName}'` +\n            (viewName ? ` for view '${viewName}'` : ''));\n    }\n}\n\nclass ToolbarSection extends BaseComponent {\n    render() {\n        let children = this.props.widgetGroups.map((widgetGroup) => this.renderWidgetGroup(widgetGroup));\n        return createElement('div', { className: 'fc-toolbar-chunk' }, ...children);\n    }\n    renderWidgetGroup(widgetGroup) {\n        let { props } = this;\n        let { theme } = this.context;\n        let children = [];\n        let isOnlyButtons = true;\n        for (let widget of widgetGroup) {\n            let { buttonName, buttonClick, buttonText, buttonIcon, buttonHint } = widget;\n            if (buttonName === 'title') {\n                isOnlyButtons = false;\n                children.push(createElement(\"h2\", { className: \"fc-toolbar-title\", id: props.titleId }, props.title));\n            }\n            else {\n                let isPressed = buttonName === props.activeButton;\n                let isDisabled = (!props.isTodayEnabled && buttonName === 'today') ||\n                    (!props.isPrevEnabled && buttonName === 'prev') ||\n                    (!props.isNextEnabled && buttonName === 'next');\n                let buttonClasses = [`fc-${buttonName}-button`, theme.getClass('button')];\n                if (isPressed) {\n                    buttonClasses.push(theme.getClass('buttonActive'));\n                }\n                children.push(createElement(\"button\", { type: \"button\", title: typeof buttonHint === 'function' ? buttonHint(props.navUnit) : buttonHint, disabled: isDisabled, \"aria-pressed\": isPressed, className: buttonClasses.join(' '), onClick: buttonClick }, buttonText || (buttonIcon ? createElement(\"span\", { className: buttonIcon, role: \"img\" }) : '')));\n            }\n        }\n        if (children.length > 1) {\n            let groupClassName = (isOnlyButtons && theme.getClass('buttonGroup')) || '';\n            return createElement('div', { className: groupClassName }, ...children);\n        }\n        return children[0];\n    }\n}\n\nclass Toolbar extends BaseComponent {\n    render() {\n        let { model, extraClassName } = this.props;\n        let forceLtr = false;\n        let startContent;\n        let endContent;\n        let sectionWidgets = model.sectionWidgets;\n        let centerContent = sectionWidgets.center;\n        if (sectionWidgets.left) {\n            forceLtr = true;\n            startContent = sectionWidgets.left;\n        }\n        else {\n            startContent = sectionWidgets.start;\n        }\n        if (sectionWidgets.right) {\n            forceLtr = true;\n            endContent = sectionWidgets.right;\n        }\n        else {\n            endContent = sectionWidgets.end;\n        }\n        let classNames = [\n            extraClassName || '',\n            'fc-toolbar',\n            forceLtr ? 'fc-toolbar-ltr' : '',\n        ];\n        return (createElement(\"div\", { className: classNames.join(' ') },\n            this.renderSection('start', startContent || []),\n            this.renderSection('center', centerContent || []),\n            this.renderSection('end', endContent || [])));\n    }\n    renderSection(key, widgetGroups) {\n        let { props } = this;\n        return (createElement(ToolbarSection, { key: key, widgetGroups: widgetGroups, title: props.title, navUnit: props.navUnit, activeButton: props.activeButton, isTodayEnabled: props.isTodayEnabled, isPrevEnabled: props.isPrevEnabled, isNextEnabled: props.isNextEnabled, titleId: props.titleId }));\n    }\n}\n\nclass ViewHarness extends BaseComponent {\n    constructor() {\n        super(...arguments);\n        this.state = {\n            availableWidth: null,\n        };\n        this.handleEl = (el) => {\n            this.el = el;\n            setRef(this.props.elRef, el);\n            this.updateAvailableWidth();\n        };\n        this.handleResize = () => {\n            this.updateAvailableWidth();\n        };\n    }\n    render() {\n        let { props, state } = this;\n        let { aspectRatio } = props;\n        let classNames = [\n            'fc-view-harness',\n            (aspectRatio || props.liquid || props.height)\n                ? 'fc-view-harness-active' // harness controls the height\n                : 'fc-view-harness-passive', // let the view do the height\n        ];\n        let height = '';\n        let paddingBottom = '';\n        if (aspectRatio) {\n            if (state.availableWidth !== null) {\n                height = state.availableWidth / aspectRatio;\n            }\n            else {\n                // while waiting to know availableWidth, we can't set height to *zero*\n                // because will cause lots of unnecessary scrollbars within scrollgrid.\n                // BETTER: don't start rendering ANYTHING yet until we know container width\n                // NOTE: why not always use paddingBottom? Causes height oscillation (issue 5606)\n                paddingBottom = `${(1 / aspectRatio) * 100}%`;\n            }\n        }\n        else {\n            height = props.height || '';\n        }\n        return (createElement(\"div\", { \"aria-labelledby\": props.labeledById, ref: this.handleEl, className: classNames.join(' '), style: { height, paddingBottom } }, props.children));\n    }\n    componentDidMount() {\n        this.context.addResizeHandler(this.handleResize);\n    }\n    componentWillUnmount() {\n        this.context.removeResizeHandler(this.handleResize);\n    }\n    updateAvailableWidth() {\n        if (this.el && // needed. but why?\n            this.props.aspectRatio // aspectRatio is the only height setting that needs availableWidth\n        ) {\n            this.setState({ availableWidth: this.el.offsetWidth });\n        }\n    }\n}\n\n/*\nDetects when the user clicks on an event within a DateComponent\n*/\nclass EventClicking extends Interaction {\n    constructor(settings) {\n        super(settings);\n        this.handleSegClick = (ev, segEl) => {\n            let { component } = this;\n            let { context } = component;\n            let seg = getElSeg(segEl);\n            if (seg && // might be the <div> surrounding the more link\n                component.isValidSegDownEl(ev.target)) {\n                // our way to simulate a link click for elements that can't be <a> tags\n                // grab before trigger fired in case trigger trashes DOM thru rerendering\n                let hasUrlContainer = elementClosest(ev.target, '.fc-event-forced-url');\n                let url = hasUrlContainer ? hasUrlContainer.querySelector('a[href]').href : '';\n                context.emitter.trigger('eventClick', {\n                    el: segEl,\n                    event: new EventImpl(component.context, seg.eventRange.def, seg.eventRange.instance),\n                    jsEvent: ev,\n                    view: context.viewApi,\n                });\n                if (url && !ev.defaultPrevented) {\n                    window.location.href = url;\n                }\n            }\n        };\n        this.destroy = listenBySelector(settings.el, 'click', '.fc-event', // on both fg and bg events\n        this.handleSegClick);\n    }\n}\n\n/*\nTriggers events and adds/removes core classNames when the user's pointer\nenters/leaves event-elements of a component.\n*/\nclass EventHovering extends Interaction {\n    constructor(settings) {\n        super(settings);\n        // for simulating an eventMouseLeave when the event el is destroyed while mouse is over it\n        this.handleEventElRemove = (el) => {\n            if (el === this.currentSegEl) {\n                this.handleSegLeave(null, this.currentSegEl);\n            }\n        };\n        this.handleSegEnter = (ev, segEl) => {\n            if (getElSeg(segEl)) { // TODO: better way to make sure not hovering over more+ link or its wrapper\n                this.currentSegEl = segEl;\n                this.triggerEvent('eventMouseEnter', ev, segEl);\n            }\n        };\n        this.handleSegLeave = (ev, segEl) => {\n            if (this.currentSegEl) {\n                this.currentSegEl = null;\n                this.triggerEvent('eventMouseLeave', ev, segEl);\n            }\n        };\n        this.removeHoverListeners = listenToHoverBySelector(settings.el, '.fc-event', // on both fg and bg events\n        this.handleSegEnter, this.handleSegLeave);\n    }\n    destroy() {\n        this.removeHoverListeners();\n    }\n    triggerEvent(publicEvName, ev, segEl) {\n        let { component } = this;\n        let { context } = component;\n        let seg = getElSeg(segEl);\n        if (!ev || component.isValidSegDownEl(ev.target)) {\n            context.emitter.trigger(publicEvName, {\n                el: segEl,\n                event: new EventImpl(context, seg.eventRange.def, seg.eventRange.instance),\n                jsEvent: ev,\n                view: context.viewApi,\n            });\n        }\n    }\n}\n\nclass CalendarContent extends PureComponent {\n    constructor() {\n        super(...arguments);\n        this.buildViewContext = memoize(buildViewContext);\n        this.buildViewPropTransformers = memoize(buildViewPropTransformers);\n        this.buildToolbarProps = memoize(buildToolbarProps);\n        this.headerRef = createRef();\n        this.footerRef = createRef();\n        this.interactionsStore = {};\n        // eslint-disable-next-line\n        this.state = {\n            viewLabelId: getUniqueDomId(),\n        };\n        // Component Registration\n        // -----------------------------------------------------------------------------------------------------------------\n        this.registerInteractiveComponent = (component, settingsInput) => {\n            let settings = parseInteractionSettings(component, settingsInput);\n            let DEFAULT_INTERACTIONS = [\n                EventClicking,\n                EventHovering,\n            ];\n            let interactionClasses = DEFAULT_INTERACTIONS.concat(this.props.pluginHooks.componentInteractions);\n            let interactions = interactionClasses.map((TheInteractionClass) => new TheInteractionClass(settings));\n            this.interactionsStore[component.uid] = interactions;\n            interactionSettingsStore[component.uid] = settings;\n        };\n        this.unregisterInteractiveComponent = (component) => {\n            let listeners = this.interactionsStore[component.uid];\n            if (listeners) {\n                for (let listener of listeners) {\n                    listener.destroy();\n                }\n                delete this.interactionsStore[component.uid];\n            }\n            delete interactionSettingsStore[component.uid];\n        };\n        // Resizing\n        // -----------------------------------------------------------------------------------------------------------------\n        this.resizeRunner = new DelayedRunner(() => {\n            this.props.emitter.trigger('_resize', true); // should window resizes be considered \"forced\" ?\n            this.props.emitter.trigger('windowResize', { view: this.props.viewApi });\n        });\n        this.handleWindowResize = (ev) => {\n            let { options } = this.props;\n            if (options.handleWindowResize &&\n                ev.target === window // avoid jqui events\n            ) {\n                this.resizeRunner.request(options.windowResizeDelay);\n            }\n        };\n    }\n    /*\n    renders INSIDE of an outer div\n    */\n    render() {\n        let { props } = this;\n        let { toolbarConfig, options } = props;\n        let toolbarProps = this.buildToolbarProps(props.viewSpec, props.dateProfile, props.dateProfileGenerator, props.currentDate, getNow(props.options.now, props.dateEnv), // TODO: use NowTimer????\n        props.viewTitle);\n        let viewVGrow = false;\n        let viewHeight = '';\n        let viewAspectRatio;\n        if (props.isHeightAuto || props.forPrint) {\n            viewHeight = '';\n        }\n        else if (options.height != null) {\n            viewVGrow = true;\n        }\n        else if (options.contentHeight != null) {\n            viewHeight = options.contentHeight;\n        }\n        else {\n            viewAspectRatio = Math.max(options.aspectRatio, 0.5); // prevent from getting too tall\n        }\n        let viewContext = this.buildViewContext(props.viewSpec, props.viewApi, props.options, props.dateProfileGenerator, props.dateEnv, props.theme, props.pluginHooks, props.dispatch, props.getCurrentData, props.emitter, props.calendarApi, this.registerInteractiveComponent, this.unregisterInteractiveComponent);\n        let viewLabelId = (toolbarConfig.header && toolbarConfig.header.hasTitle)\n            ? this.state.viewLabelId\n            : undefined;\n        return (createElement(ViewContextType.Provider, { value: viewContext },\n            toolbarConfig.header && (createElement(Toolbar, Object.assign({ ref: this.headerRef, extraClassName: \"fc-header-toolbar\", model: toolbarConfig.header, titleId: viewLabelId }, toolbarProps))),\n            createElement(ViewHarness, { liquid: viewVGrow, height: viewHeight, aspectRatio: viewAspectRatio, labeledById: viewLabelId },\n                this.renderView(props),\n                this.buildAppendContent()),\n            toolbarConfig.footer && (createElement(Toolbar, Object.assign({ ref: this.footerRef, extraClassName: \"fc-footer-toolbar\", model: toolbarConfig.footer, titleId: \"\" }, toolbarProps)))));\n    }\n    componentDidMount() {\n        let { props } = this;\n        this.calendarInteractions = props.pluginHooks.calendarInteractions\n            .map((CalendarInteractionClass) => new CalendarInteractionClass(props));\n        window.addEventListener('resize', this.handleWindowResize);\n        let { propSetHandlers } = props.pluginHooks;\n        for (let propName in propSetHandlers) {\n            propSetHandlers[propName](props[propName], props);\n        }\n    }\n    componentDidUpdate(prevProps) {\n        let { props } = this;\n        let { propSetHandlers } = props.pluginHooks;\n        for (let propName in propSetHandlers) {\n            if (props[propName] !== prevProps[propName]) {\n                propSetHandlers[propName](props[propName], props);\n            }\n        }\n    }\n    componentWillUnmount() {\n        window.removeEventListener('resize', this.handleWindowResize);\n        this.resizeRunner.clear();\n        for (let interaction of this.calendarInteractions) {\n            interaction.destroy();\n        }\n        this.props.emitter.trigger('_unmount');\n    }\n    buildAppendContent() {\n        let { props } = this;\n        let children = props.pluginHooks.viewContainerAppends.map((buildAppendContent) => buildAppendContent(props));\n        return createElement(Fragment, {}, ...children);\n    }\n    renderView(props) {\n        let { pluginHooks } = props;\n        let { viewSpec } = props;\n        let viewProps = {\n            dateProfile: props.dateProfile,\n            businessHours: props.businessHours,\n            eventStore: props.renderableEventStore,\n            eventUiBases: props.eventUiBases,\n            dateSelection: props.dateSelection,\n            eventSelection: props.eventSelection,\n            eventDrag: props.eventDrag,\n            eventResize: props.eventResize,\n            isHeightAuto: props.isHeightAuto,\n            forPrint: props.forPrint,\n        };\n        let transformers = this.buildViewPropTransformers(pluginHooks.viewPropsTransformers);\n        for (let transformer of transformers) {\n            Object.assign(viewProps, transformer.transform(viewProps, props));\n        }\n        let ViewComponent = viewSpec.component;\n        return (createElement(ViewComponent, Object.assign({}, viewProps)));\n    }\n}\nfunction buildToolbarProps(viewSpec, dateProfile, dateProfileGenerator, currentDate, now, title) {\n    // don't force any date-profiles to valid date profiles (the `false`) so that we can tell if it's invalid\n    let todayInfo = dateProfileGenerator.build(now, undefined, false); // TODO: need `undefined` or else INFINITE LOOP for some reason\n    let prevInfo = dateProfileGenerator.buildPrev(dateProfile, currentDate, false);\n    let nextInfo = dateProfileGenerator.buildNext(dateProfile, currentDate, false);\n    return {\n        title,\n        activeButton: viewSpec.type,\n        navUnit: viewSpec.singleUnit,\n        isTodayEnabled: todayInfo.isValid && !rangeContainsMarker(dateProfile.currentRange, now),\n        isPrevEnabled: prevInfo.isValid,\n        isNextEnabled: nextInfo.isValid,\n    };\n}\n// Plugin\n// -----------------------------------------------------------------------------------------------------------------\nfunction buildViewPropTransformers(theClasses) {\n    return theClasses.map((TheClass) => new TheClass());\n}\n\nclass Calendar extends CalendarImpl {\n    constructor(el, optionOverrides = {}) {\n        super();\n        this.isRendering = false;\n        this.isRendered = false;\n        this.currentClassNames = [];\n        this.customContentRenderId = 0;\n        this.handleAction = (action) => {\n            // actions we know we want to render immediately\n            switch (action.type) {\n                case 'SET_EVENT_DRAG':\n                case 'SET_EVENT_RESIZE':\n                    this.renderRunner.tryDrain();\n            }\n        };\n        this.handleData = (data) => {\n            this.currentData = data;\n            this.renderRunner.request(data.calendarOptions.rerenderDelay);\n        };\n        this.handleRenderRequest = () => {\n            if (this.isRendering) {\n                this.isRendered = true;\n                let { currentData } = this;\n                flushSync(() => {\n                    render(createElement(CalendarRoot, { options: currentData.calendarOptions, theme: currentData.theme, emitter: currentData.emitter }, (classNames, height, isHeightAuto, forPrint) => {\n                        this.setClassNames(classNames);\n                        this.setHeight(height);\n                        return (createElement(RenderId.Provider, { value: this.customContentRenderId },\n                            createElement(CalendarContent, Object.assign({ isHeightAuto: isHeightAuto, forPrint: forPrint }, currentData))));\n                    }), this.el);\n                });\n            }\n            else if (this.isRendered) {\n                this.isRendered = false;\n                render(null, this.el);\n                this.setClassNames([]);\n                this.setHeight('');\n            }\n        };\n        ensureElHasStyles(el);\n        this.el = el;\n        this.renderRunner = new DelayedRunner(this.handleRenderRequest);\n        new CalendarDataManager({\n            optionOverrides,\n            calendarApi: this,\n            onAction: this.handleAction,\n            onData: this.handleData,\n        });\n    }\n    render() {\n        let wasRendering = this.isRendering;\n        if (!wasRendering) {\n            this.isRendering = true;\n        }\n        else {\n            this.customContentRenderId += 1;\n        }\n        this.renderRunner.request();\n        if (wasRendering) {\n            this.updateSize();\n        }\n    }\n    destroy() {\n        if (this.isRendering) {\n            this.isRendering = false;\n            this.renderRunner.request();\n        }\n    }\n    updateSize() {\n        flushSync(() => {\n            super.updateSize();\n        });\n    }\n    batchRendering(func) {\n        this.renderRunner.pause('batchRendering');\n        func();\n        this.renderRunner.resume('batchRendering');\n    }\n    pauseRendering() {\n        this.renderRunner.pause('pauseRendering');\n    }\n    resumeRendering() {\n        this.renderRunner.resume('pauseRendering', true);\n    }\n    resetOptions(optionOverrides, changedOptionNames) {\n        this.currentDataManager.resetOptions(optionOverrides, changedOptionNames);\n    }\n    setClassNames(classNames) {\n        if (!isArraysEqual(classNames, this.currentClassNames)) {\n            let { classList } = this.el;\n            for (let className of this.currentClassNames) {\n                classList.remove(className);\n            }\n            for (let className of classNames) {\n                classList.add(className);\n            }\n            this.currentClassNames = classNames;\n        }\n    }\n    setHeight(height) {\n        applyStyleProp(this.el, 'height', height);\n    }\n}\n\nfunction formatDate(dateInput, options = {}) {\n    let dateEnv = buildDateEnv(options);\n    let formatter = createFormatter(options);\n    let dateMeta = dateEnv.createMarkerMeta(dateInput);\n    if (!dateMeta) { // TODO: warning?\n        return '';\n    }\n    return dateEnv.format(dateMeta.marker, formatter, {\n        forcedTzo: dateMeta.forcedTzo,\n    });\n}\nfunction formatRange(startInput, endInput, options) {\n    let dateEnv = buildDateEnv(typeof options === 'object' && options ? options : {}); // pass in if non-null object\n    let formatter = createFormatter(options);\n    let startMeta = dateEnv.createMarkerMeta(startInput);\n    let endMeta = dateEnv.createMarkerMeta(endInput);\n    if (!startMeta || !endMeta) { // TODO: warning?\n        return '';\n    }\n    return dateEnv.formatRange(startMeta.marker, endMeta.marker, formatter, {\n        forcedStartTzo: startMeta.forcedTzo,\n        forcedEndTzo: endMeta.forcedTzo,\n        isEndExclusive: options.isEndExclusive,\n        defaultSeparator: BASE_OPTION_DEFAULTS.defaultRangeSeparator,\n    });\n}\n// TODO: more DRY and optimized\nfunction buildDateEnv(settings) {\n    let locale = buildLocale(settings.locale || 'en', organizeRawLocales([]).map); // TODO: don't hardcode 'en' everywhere\n    return new DateEnv(Object.assign(Object.assign({ timeZone: BASE_OPTION_DEFAULTS.timeZone, calendarSystem: 'gregory' }, settings), { locale }));\n}\n\n// HELPERS\n/*\nif nextDayThreshold is specified, slicing is done in an all-day fashion.\nyou can get nextDayThreshold from context.nextDayThreshold\n*/\nfunction sliceEvents(props, allDay) {\n    return sliceEventStore(props.eventStore, props.eventUiBases, props.dateProfile.activeRange, allDay ? props.nextDayThreshold : null).fg;\n}\n\nconst version = '6.1.15';\n\nexport { Calendar, createPlugin, formatDate, formatRange, globalLocales, globalPlugins, sliceEvents, version };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}