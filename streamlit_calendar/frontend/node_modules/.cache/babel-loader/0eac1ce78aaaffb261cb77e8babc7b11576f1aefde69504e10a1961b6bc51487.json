{"ast":null,"code":"/**\n * This class helps us to emulate python's generators, sorta.\n */\nvar IterResult = /** @class */function () {\n  function IterResult(method, args) {\n    this.minDate = null;\n    this.maxDate = null;\n    this._result = [];\n    this.total = 0;\n    this.method = method;\n    this.args = args;\n    if (method === 'between') {\n      this.maxDate = args.inc ? args.before : new Date(args.before.getTime() - 1);\n      this.minDate = args.inc ? args.after : new Date(args.after.getTime() + 1);\n    } else if (method === 'before') {\n      this.maxDate = args.inc ? args.dt : new Date(args.dt.getTime() - 1);\n    } else if (method === 'after') {\n      this.minDate = args.inc ? args.dt : new Date(args.dt.getTime() + 1);\n    }\n  }\n  /**\n   * Possibly adds a date into the result.\n   *\n   * @param {Date} date - the date isn't necessarly added to the result\n   * list (if it is too late/too early)\n   * @return {Boolean} true if it makes sense to continue the iteration\n   * false if we're done.\n   */\n  IterResult.prototype.accept = function (date) {\n    ++this.total;\n    var tooEarly = this.minDate && date < this.minDate;\n    var tooLate = this.maxDate && date > this.maxDate;\n    if (this.method === 'between') {\n      if (tooEarly) return true;\n      if (tooLate) return false;\n    } else if (this.method === 'before') {\n      if (tooLate) return false;\n    } else if (this.method === 'after') {\n      if (tooEarly) return true;\n      this.add(date);\n      return false;\n    }\n    return this.add(date);\n  };\n  /**\n   *\n   * @param {Date} date that is part of the result.\n   * @return {Boolean} whether we are interested in more values.\n   */\n  IterResult.prototype.add = function (date) {\n    this._result.push(date);\n    return true;\n  };\n  /**\n   * 'before' and 'after' return only one date, whereas 'all'\n   * and 'between' an array.\n   *\n   * @return {Date,Array?}\n   */\n  IterResult.prototype.getValue = function () {\n    var res = this._result;\n    switch (this.method) {\n      case 'all':\n      case 'between':\n        return res;\n      case 'before':\n      case 'after':\n      default:\n        return res.length ? res[res.length - 1] : null;\n    }\n  };\n  IterResult.prototype.clone = function () {\n    return new IterResult(this.method, this.args);\n  };\n  return IterResult;\n}();\nexport default IterResult;","map":{"version":3,"names":["IterResult","method","args","minDate","maxDate","_result","total","inc","before","Date","getTime","after","dt","prototype","accept","date","tooEarly","tooLate","add","push","getValue","res","length","clone"],"sources":["../../src/iterresult.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}